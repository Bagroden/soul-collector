# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–∫–Ω–∞ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
–ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ "–°–∏–ª—å–Ω—ã–π" –∏ –≤—ã—Ö–æ–¥–∞ –∏–∑ –æ–∫–Ω–∞ –≤—ã–±–æ—Ä–∞ –ø–∞—Å—Å–∏–≤–æ–∫, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ —Å—Ç–∞—Ç—É—Å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ "–ù–µ–∞–∫—Ç–∏–≤–Ω–∞", —Ö–æ—Ç—è –±–æ–Ω—É—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–º–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### **1. –ó–∞–º–µ–Ω–µ–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**

#### **–ë—ã–ª–æ (–ø—Ä–æ—Å—Ç–æ–µ –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ):**
```gdscript
func _show_passive_abilities_window():
	# –°–æ–∑–¥–∞–µ–º –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ
	var dialog = AcceptDialog.new()
	dialog.title = "–ü–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞"
	dialog.size = Vector2(700, 600)
	
	# –°–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
	var main_container = VBoxContainer.new()
	# ... –º–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ UI ...
	
	# –î–æ–±–∞–≤–ª—è–µ–º –∫ —Å—Ü–µ–Ω–µ
	add_child(dialog)
	dialog.popup_centered()
```

#### **–°—Ç–∞–ª–æ (–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ):**
```gdscript
func _show_passive_abilities_window():
	# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
	var passive_window_scene = preload("res://Scenes/UI/PassiveAbilitiesWindow.tscn")
	var passive_window = passive_window_scene.instantiate()
	add_child(passive_window)
	
	print("–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –æ—Ç–∫—Ä—ã—Ç–æ")
```

### **2. –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ UI:**
- ‚úÖ **–£–¥–∞–ª–µ–Ω–∞ `_create_ability_item()`** - —Å–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–£–¥–∞–ª–µ–Ω–∞ `_on_toggle_ability()`** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–£–¥–∞–ª–µ–Ω –≤–µ—Å—å –∫–æ–¥ –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–∏–∞–ª–æ–≥–æ–≤–æ–≥–æ –æ–∫–Ω–∞** - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω

### **3. –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ `PassiveAbilitiesWindow.gd`:**

#### **–§—É–Ω–∫—Ü–∏–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞:**
```gdscript
func _on_toggle_passive(ability_id: String):
	"""–ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏"""
	var success = player_data.toggle_passive_ability(ability_id)
	if success:
		print("–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞ –ø–∞—Å—Å–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: ", ability_id)
		# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ–º UI
		load_passive_abilities()
		update_ui()
	else:
		print("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", ability_id)
```

#### **–§—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI:**
```gdscript
func update_ui():
	"""–û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å"""
	update_active_passives_list()
	update_available_passives_list()
	update_info_label()

func update_active_passives_list():
	# –û—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫
	for child in active_passives_list.get_children():
		child.queue_free()
	
	# –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
	for passive_data in passive_abilities:
		if passive_data.is_active:
			create_passive_item(passive_data, active_passives_list, true)
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### **–¢–µ–ø–µ—Ä—å –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**

#### **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏:**
- ‚úÖ **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ** - `PassiveAbilitiesWindow.tscn`
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - –∞–∫—Ç–∏–≤–Ω—ã–µ/–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - –º–µ–∂–¥—É –æ—Ç–∫—Ä—ã—Ç–∏—è–º–∏

#### **–ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - —á–µ—Ä–µ–∑ `player_data.toggle_passive_ability()`
- ‚úÖ **–û–±–Ω–æ–≤–ª—è–µ—Ç UI** - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è** - —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ –∞–∫—Ç–∏–≤–∞—Ü–∏—é/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—é

#### **–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏:**
- ‚úÖ **–ü–æ–º–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å** - "–ê–∫—Ç–∏–≤–Ω–∞" –¥–ª—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** - –º–æ–∂–Ω–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### **–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∫–∞–∂—É—Ç:**
```
=== –ò–ó–£–ß–ï–ù–ò–ï –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô ===
–£–∂–µ –∏–∑—É—á–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π: 4
–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —É–∂–µ –∏–∑—É—á–µ–Ω—ã: ["player_fortress", "player_strong", "player_wise", "player_vitality"]
=== –ö–û–ù–ï–¶ –ò–ó–£–ß–ï–ù–ò–Ø –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô ===
–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –æ—Ç–∫—Ä—ã—Ç–æ
```

**–ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
```
–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞ –ø–∞—Å—Å–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: player_strong
=== –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ë–û–ù–£–°–ê –û–¢ –°–ü–û–°–û–ë–ù–û–°–¢–ò: player_strong ===
–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –î–û –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:
  –ë–∞–∑–æ–≤–∞—è —Å–∏–ª–∞: 5, –ë–æ–Ω—É—Å —Å–∏–ª—ã: 0, –ò—Ç–æ–≥–æ–≤–∞—è —Å–∏–ª–∞: 5
–ü—Ä–∏–º–µ–Ω–µ–Ω –±–æ–Ω—É—Å —Å–∏–ª—ã: +30 –∫ —Å–∏–ª–µ
=== –ü–ï–†–ï–°–ß–ï–¢ –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö ===
–ë–∞–∑–æ–≤—ã–µ: –°–∏–ª=5, –õ–æ–≤=5, –í–∏—Ç–∞=5
–ë–æ–Ω—É—Å—ã: –°–∏–ª=30, –õ–æ–≤=0, –í–∏—Ç–∞=0
–ò—Ç–æ–≥–æ–≤—ã–µ: –°–∏–ª=35, –õ–æ–≤=5, –í–∏—Ç–∞=5
=== –ö–û–ù–ï–¶ –ü–ï–†–ï–°–ß–ï–¢–ê ===
–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ü–û–°–õ–ï –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:
  –ë–∞–∑–æ–≤–∞—è —Å–∏–ª–∞: 5, –ë–æ–Ω—É—Å —Å–∏–ª—ã: 30, –ò—Ç–æ–≥–æ–≤–∞—è —Å–∏–ª–∞: 35
=== –ö–û–ù–ï–¶ –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø –ë–û–ù–£–°–ê ===
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ** - `PassiveAbilitiesWindow.tscn`
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - –º–µ–∂–¥—É –æ—Ç–∫—Ä—ã—Ç–∏—è–º–∏
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å** - –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** - –º–æ–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ **–û–±–Ω–æ–≤–ª—è–µ—Ç UI** - —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–¢–µ–ø–µ—Ä—å –ø–∞—Å—Å–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å "–°–∏–ª—å–Ω—ã–π" –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å "–ê–∫—Ç–∏–≤–Ω–∞" –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞!** üéØ‚ú®
