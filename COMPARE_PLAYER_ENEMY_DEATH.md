# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞ –∏ –≤—Ä–∞–≥–æ–≤

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:
–£ –≤—Å–µ—Ö –≤—Ä–∞–≥–æ–≤ –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∞ —É –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è –Ω–µ—Ç.

## üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–¥–∞:

### **1. –ö–æ–¥ —Å–º–µ—Ä—Ç–∏ –≤—Ä–∞–≥–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç):**
```gdscript
func _on_enemy_died():
	print("–í—Ä–∞–≥ –ø–æ–≥–∏–±, –≤—ã–∑—ã–≤–∞–µ–º _on_enemy_died()")
	# –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏ –≤—Ä–∞–≥–∞
	var enemy_visual = enemy_node.get_node_or_null("Visual")
	if enemy_visual and enemy_visual.has_method("play_die"):
		enemy_visual.play_die()
```

### **2. –ö–æ–¥ —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞ (–ù–ï —Ä–∞–±–æ—Ç–∞–ª):**
```gdscript
func _on_player_died():
	# –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏
	var visual = player_node.get_node_or_null("Visual")
	if visual:
		if visual.has_method("play_die"):
			visual.play_die()
			# –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
			await visual.animation_finished
```

## üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### **1. –£–±—Ä–∞–ª–∏ `await` –∏–∑ `battle_manager.gd`:**
```gdscript
func _on_player_died():
	# –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏
	var visual = player_node.get_node_or_null("Visual")
	if visual:
		if visual.has_method("play_die"):
			visual.play_die()
			print("play_die() –≤—ã–∑–≤–∞–Ω (–±–µ–∑ await, –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤)")
			# –ù–ï –∂–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏, –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤
```

### **2. –£–±—Ä–∞–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–∏–≥–Ω–∞–ª—É –≤ `character_visual.gd`:**
```gdscript
if has_animation(die_anim):
	print("–ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏: ", die_anim)
	play(die_anim)
	print("–ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞, —Ç–µ–∫—É—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è: ", animation)
	# –ù–ï –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–∏–≥–Ω–∞–ª—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤
```

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### **1. –¢–µ–ø–µ—Ä—å –∫–æ–¥ –∏–≥—Ä–æ–∫–∞ —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤:**
- ‚úÖ **–ù–µ—Ç `await`** - –Ω–µ –∂–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
- ‚úÖ **–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–∏–≥–Ω–∞–ª—É** - –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ animation_finished
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ–º `play_die()`** - –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤

### **2. –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∫–∞–∂—É—Ç:**
```
–ò–≥—Ä–æ–∫ –ø–æ–≥–∏–±, –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏...
Visual –Ω–∞–π–¥–µ–Ω: Visual:<AnimatedSprite2D#193290307301>
–í—ã–∑—ã–≤–∞–µ–º play_die()
play_die() –≤—ã–∑–≤–∞–Ω –¥–ª—è PlayerBody
die_anim = die
has_animation(die_anim) = true
sprite_frames = [SpriteFrames:1234]
current animation = idle
–ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏: die
–ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞, —Ç–µ–∫—É—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è: die
play_die() –≤—ã–∑–≤–∞–Ω (–±–µ–∑ await, –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤)
–°–æ–æ–±—â–µ–Ω–∏–µ: –¢—ã –ø–æ–≥–∏–±. –î—É—à–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ **–¢–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ –∫–æ–¥, –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤** - –±–µ–∑ await –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ —Å–∏–≥–Ω–∞–ª–∞–º
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏** - –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤
- ‚úÖ **–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–∞–∂–¥—ã–π —à–∞–≥
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –∞–Ω–∏–º–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏–≥—Ä–∞—Ç—å—Å—è

**–¢–µ–ø–µ—Ä—å –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤!** üéÆüíÄ
