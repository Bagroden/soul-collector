# –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–∑—É—á–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π - –ó–ê–í–ï–†–®–Å–ù ‚úÖ

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ `ActiveAbilityLearningSystem`

**–§–∞–π–ª:** `Scripts/Systems/ActiveAbilityLearningSystem.gd`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è 21 –∞–∫—Ç–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Ä–∞–≥–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–∑—É—á–µ–Ω–∏—è (0-100%)
- ‚úÖ –†–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–¥–∫–æ—Å—Ç–∏ –≤—Ä–∞–≥–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è UI
- ‚úÖ –ú–µ—Ç–æ–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∏–∑—É—á–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

–í—Å–µ 21 –∞–∫—Ç–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å:
- **ability_id** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- **ability_name** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
- **rarity** - —Ä–µ–¥–∫–æ—Å—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (common, uncommon, rare, epic, legendary)
- **required_progress** - –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è (100)
- **enemy_type** - —Ç–∏–ø –≤—Ä–∞–≥–∞-–∏—Å—Ç–æ—á–Ω–∏–∫–∞
- **damage_type** - —Ç–∏–ø —É—Ä–æ–Ω–∞
- **sources** - –ø—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç –∫–∞–∂–¥–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏ –≤—Ä–∞–≥–∞

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:**
- Common –≤—Ä–∞–≥ (–ö—Ä—ã—Å–∞) ‚Üí 10 –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- Uncommon –≤—Ä–∞–≥ (–ö—Ä—ã—Å–∞) ‚Üí 15 –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- Rare –≤—Ä–∞–≥ (–ö—Ä—ã—Å–∞) ‚Üí 20 –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- Epic –≤—Ä–∞–≥ (–ö—Ä—ã—Å–∞) ‚Üí 25 –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- Legendary –≤—Ä–∞–≥ (–ö—Ä—ã—Å–∞) ‚Üí 30 –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

**–§–∞–π–ª:** `Scripts/Battle/battle_manager.gd`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_add_active_ability_learning_progress()`
2. ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –Ω–∞–¥ –∫–∞–∂–¥—ã–º –≤—Ä–∞–≥–æ–º
3. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –≤—Ä–∞–≥–∞ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å

### 4. Autoload –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–§–∞–π–ª:** `project.godot`

```
ActiveAbilityLearningSystem="*res://Scripts/Systems/ActiveAbilityLearningSystem.gd"
```

## –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ

### Common (–û–±—ã—á–Ω—ã–µ):
1. **–ö—Ä—ã—Å–∏–Ω—ã–π —É–∫—É—Å** (`rat_bite`) - –ö—Ä—ã—Å–∞
2. **–ü–∏–∫–∏—Ä–æ–≤–∞–Ω–∏–µ** (`bat_swoop`) - –õ–µ—Ç—É—á–∞—è –º—ã—à—å
3. **–†—É–±—è—â–∏–π —É–¥–∞—Ä** (`slashing_strike`) - –°–∫–µ–ª–µ—Ç –º–µ—á–Ω–∏–∫

### Uncommon (–ù–µ–æ–±—ã—á–Ω—ã–µ):
4. **–ö–∏—Å–ª–æ—Ç–Ω—ã–π –≤–∑—Ä—ã–≤** (`slime_acid_blast`) - –°–ª–∏–∑–µ–Ω—å
5. **–î–≤–æ–π–Ω–æ–π —É–¥–∞—Ä** (`double_strike`) - –ì–æ–±–ª–∏–Ω –≤–æ–∏–Ω
6. **–ê—Ä–±–∞–ª–µ—Ç–Ω—ã–π –≤—ã—Å—Ç—Ä–µ–ª** (`crossbow_shot`) - –°–∫–µ–ª–µ—Ç –∞—Ä–±–∞–ª–µ—Ç—á–∏–∫
7. **–¢–æ—á–Ω—ã–π –≤—ã—Å—Ç—Ä–µ–ª** (`orc_arrow_shot`) - –û—Ä–∫ –ª—É—á–Ω–∏–∫

### Rare (–†–µ–¥–∫–∏–µ):
8. **–ì–Ω–∏–ª–æ—Å—Ç–Ω—ã–π –≤–∑—Ä—ã–≤** (`rotten_slime_blast`) - –ì–Ω–∏–ª–æ–π —Å–ª–∏–∑–µ–Ω—å
9. **–Ø–¥–æ–≤–∏—Ç—ã–π —É–¥–∞—Ä** (`poison_strike`) - –ì–æ–±–ª–∏–Ω –≤–æ—Ä
10. **–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–µ–ª—ã** (`magic_arrows`) - –ì–æ–±–ª–∏–Ω –∫–æ–ª–¥—É–Ω
11. **–ü—Ä–æ–∫–ª—è—Ç—ã–π –≤–∑—Ä—ã–≤** (`curse_blast`) - –î–µ–º–æ–Ω –ø—Ä–æ–∫–ª—è—Ç–∏—è
12. **–£–¥–∞—Ä –≤ —Å–ø–∏–Ω—É** (`orc_backstab`) - –û—Ä–∫ —É–±–∏–π—Ü–∞
13. **–î—É—Ö–æ–≤–Ω—ã–π –≤–∑—Ä—ã–≤** (`orc_spirit_blast`) - –û—Ä–∫ —à–∞–º–∞–Ω

### Epic (–≠–ø–∏—á–µ—Å–∫–∏–µ):
14. **–ù–∞–¥–≥—Ä–æ–±–∏–µ** (`tombstone`) - –ì—É–ª—å
15. **–°–æ–∫—Ä—É—à–∏—Ç–µ–ª—å–Ω—ã–π –º–æ–ª–æ—Ç** (`crushing_hammer`) - –≠–ª–∏—Ç–Ω—ã–π —Å–∫–µ–ª–µ—Ç
16. **–¢–µ–º–Ω—ã–π –≤–∑—Ä—ã–≤** (`alkara_dark_blast`) - –î–µ–º–æ–Ω –ê–ª–∫–∞—Ä–∞
17. **–£–¥–∞—Ä –ø–∞–ª–∞—á–∞** (`executioner_strike`) - –î–µ–º–æ–Ω –ø–∞–ª–∞—á
18. **–Ø—Ä–æ—Å—Ç–Ω—ã–π —É–¥–∞—Ä** (`orc_berserker_strike`) - –û—Ä–∫ –±–µ—Ä—Å–µ—Ä–∫

### Legendary (–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ):
19. **–¢–µ–Ω–µ–≤—ã–µ —à–∏–ø—ã** (`shadow_spikes`) - –¢—ë–º–Ω—ã–π —à–∞—Ç—É–Ω
20. **–°–æ–∫—Ä—É—à–∞—é—â–∏–π —É–¥–∞—Ä** (`tharnok_crushing_strike`) - –î–µ–º–æ–Ω –¢–∞—Ä–Ω–æ–∫
21. **–£–¥–∞—Ä –±—Ä–æ–Ω–∏** (`armor_strike`) - –°–∫–µ–ª–µ—Ç –ª–æ—Ä–¥

## API —Å–∏—Å—Ç–µ–º—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```gdscript
# –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –Ω–∞–¥ –≤—Ä–∞–≥–æ–º
add_progress(enemy_type: String, enemy_rarity: String) -> void

# –ò–∑—É—á–∏—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ UI)
learn_ability(ability_id: String) -> bool

# –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
get_ability_progress(ability_id: String) -> Dictionary

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∏–∑—É—á–µ–Ω–∞ –ª–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
is_ability_learned(ability_id: String) -> bool

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑—É—á–µ–Ω–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
get_learned_abilities() -> Array[String]

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
get_all_abilities() -> Array[String]

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏
get_abilities_by_rarity(rarity: String) -> Array[String]

# –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
reset_progress() -> void
```

### –°–∏–≥–Ω–∞–ª—ã:

```gdscript
# –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏–∑—É—á–µ–Ω–∞
signal ability_learned(ability_id: String, ability_name: String)

# –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—ë–Ω
signal progress_updated(ability_id: String, current_progress: int, required_progress: int)
```

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É** –∏ –Ω–∞—á–∞—Ç—å –±–æ–π
2. **–ü–æ–±–µ–¥–∏—Ç—å –≤—Ä–∞–≥–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ö—Ä—ã—Å—É)
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
   ```
   üìñ –ê–∫—Ç–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å '–ö—Ä—ã—Å–∏–Ω—ã–π —É–∫—É—Å': +10 –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (10/100)
   ```
4. **–ü–æ–±–µ–¥–∏—Ç—å 10 –ö—Ä—ã—Å** (common) –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 100% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –∑–∞–∫—Ä—ã—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä—É, –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è

## –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø

**–≠—Ç–∞–ø 2: UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞**
- –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω "–ö–Ω–∏–≥–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π"
- –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–∑—É—á–µ–Ω–∏—è
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏
- –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ `user://active_ability_learning.save`
- –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–ª—è —É–∂–µ –∏–∑—É—á–µ–Ω–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- –ö–∞–∂–¥—ã–π –≤—Ä–∞–≥ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–µ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –ë–æ–ª–µ–µ —Ä–µ–¥–∫–∏–µ –≤—Ä–∞–≥–∏ –¥–∞—é—Ç –±–æ–ª—å—à–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

## –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:

```gdscript
# –°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å
ActiveAbilityLearningSystem.reset_progress()

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
print(ActiveAbilityLearningSystem.get_all_abilities())

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
print(ActiveAbilityLearningSystem.get_ability_progress("rat_bite"))

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI)
# –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:
for i in range(10):
    ActiveAbilityLearningSystem.add_progress("rat", "common")
# –ó–∞—Ç–µ–º –∏–∑—É—á–∏—Ç—å:
ActiveAbilityLearningSystem.learn_ability("rat_bite")
```
