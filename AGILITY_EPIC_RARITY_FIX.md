# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–¥–∫–æ—Å—Ç–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ "–ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç—å" –Ω–∞ –≠–ø–∏—á–µ—Å–∫—É—é

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:

### **–ò–∑–º–µ–Ω–µ–Ω–∞ —Ä–µ–¥–∫–æ—Å—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
- **"–ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç—å"** (`agility`) —Ç–µ–ø–µ—Ä—å **—ç–ø–∏—á–µ—Å–∫–∞—è (epic)** —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∞** –∏–∑ –ø–∞–ø–∫–∏ `Rare/` –≤ –ø–∞–ø–∫—É `Epic/`
- **–û–±–Ω–æ–≤–ª–µ–Ω–∞** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ PassiveAbilityManager

## üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

### **1. –ò–∑–º–µ–Ω–µ–Ω–∞ —Ä–µ–¥–∫–æ—Å—Ç—å –≤ —Ñ–∞–π–ª–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
```gdscript
# –§–∞–π–ª: Scripts/PassiveAbilities/Epic/Agility.gd
func _init():
    id = "agility"
    name = "–ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç—å"
    description = "–í–æ –≤—Ä–µ–º—è —É–∫–ª–æ–Ω–µ–Ω–∏—è –µ—Å—Ç—å 50% —à–∞–Ω—Å –ø—Ä–æ–≤–µ—Å—Ç–∏ –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫—É –Ω–∞–Ω–µ—Å—è —É—Ä–æ–Ω –æ–±—ã—á–Ω–æ–π –∞—Ç–∞–∫–∏"
    rarity = "epic"  # ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ —Å "rare" –Ω–∞ "epic"
    ability_type = AbilityType.DEFENSIVE
    trigger_type = TriggerType.ON_DAMAGE_TAKEN
    value = 50.0  # 50% —à–∞–Ω—Å –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∏ –ø—Ä–∏ —É–∫–ª–æ–Ω–µ–Ω–∏–∏
```

### **2. –ü–µ—Ä–µ–º–µ—â–µ–Ω —Ñ–∞–π–ª:**
- **–ë—ã–ª–æ**: `Scripts/PassiveAbilities/Rare/Agility.gd`
- **–°—Ç–∞–ª–æ**: `Scripts/PassiveAbilities/Epic/Agility.gd`

### **3. –û–±–Ω–æ–≤–ª–µ–Ω PassiveAbilityManager:**
```gdscript
# –£–¥–∞–ª–µ–Ω–æ –∏–∑ _load_rare_abilities():
# var agility = load("res://Scripts/PassiveAbilities/Rare/Agility.gd").new()

# –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ _load_epic_abilities():
var agility = load("res://Scripts/PassiveAbilities/Epic/Agility.gd").new()
abilities["agility"] = agility
```

### **4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑—É—á–µ–Ω–∏—è –æ—Å—Ç–∞–ª–∞—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π:**
```gdscript
# –§–∞–π–ª: Scripts/Systems/AbilityLearningSystem.gd
"agility": {
    "name": "–ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç—å",
    "required_progress": 100,
    "sources": {
        "epic_rat": 10,        # 10% –∑–∞ —ç–ø–∏—á–µ—Å–∫—É—é –∫—Ä—ã—Å—É
        "legendary_rat": 10    # 10% –∑–∞ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—É—é –∫—Ä—ã—Å—É
    }
}
```

### **5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Ä–∞–≥–æ–≤ –æ—Å—Ç–∞–ª–∞—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π:**
```gdscript
# –§–∞–π–ª: Scripts/PassiveAbilities/EnemyPassiveConfig.gd
"–ö—Ä—ã—Å–∞": {
    "rare": ["rat_vitality", "dodge", "blood_flow"],
    "epic": ["rat_vitality", "dodge", "blood_flow", "agility"],  # ‚úÖ agility –¥–æ—Å—Ç—É–ø–Ω–∞ –æ—Ç epic+
    "legendary": ["rat_vitality", "dodge", "blood_flow", "agility", "cornered"]
}
```

## üéØ –õ–æ–≥–∏–∫–∞ —ç–ø–∏—á–µ—Å–∫–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏:

### **–ü–æ—á–µ–º—É "–ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç—å" –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —ç–ø–∏—á–µ—Å–∫–æ–π:**

#### **1. –ú–æ—â–Ω–æ—Å—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
- **50% —à–∞–Ω—Å –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∏** –ø—Ä–∏ —É–∫–ª–æ–Ω–µ–Ω–∏–∏
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–Ω** = (—Å–∏–ª–∞ + –ª–æ–≤–∫–æ—Å—Ç—å) √ó 1.5
- **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç** - —É–∫–ª–æ–Ω–µ–Ω–∏–µ + –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∞

#### **2. –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è:**
- **–¢—Ä–µ–±—É–µ—Ç —ç–ø–∏—á–µ—Å–∫–∏—Ö+ –∫—Ä—ã—Å** –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è
- **–í—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å** –≤ –æ—Å–∫–æ–ª–∫–∞—Ö –¥—É—à (700)
- **–†–µ–¥–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** –≤ –∏–≥—Ä–µ

#### **3. –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å:**
- **–ó–∞—â–∏—Ç–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** —Å –Ω–∞—Å—Ç—É–ø–∞—Ç–µ–ª—å–Ω—ã–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º
- **–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫/–Ω–∞–≥—Ä–∞–¥–∞** - –Ω—É–∂–Ω–æ —É–∫–ª–æ–Ω—è—Ç—å—Å—è –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - —É—Ä–æ–Ω —Ä–∞—Å—Ç–µ—Ç —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏

## üìä –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏:

### **üü¢ –û–ë–´–ß–ù–´–ï (Common) - 6 —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**
- `dodge`, `quick_strike`, `rat_bite`, `restlessness`, `bat_speed`, `rat_vitality`

### **üü° –ù–ï–û–ë–´–ß–ù–´–ï (Uncommon) - 5 —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**
- `blood_flow`, `alkara_vampirism`, `curse_magic`, `mouse_nimble`, `sharp_claws`

### **üîµ –†–ï–î–ö–ò–ï (Rare) - 10 —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**
- `demon_strength`, `executioner_rage`, `tharnok_shield`, `blood_sucker`, `infection`, `alkara_blood_ritual`, `curse_weakness`, `executioner_guillotine`, `tharnok_armor`, `ninja_assassinate`

### **üü£ –≠–ü–ò–ß–ï–°–ö–ò–ï (Epic) - 11 —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**
- `life_steal`, `blood_bleeding`, `agility` ‚úÖ, `ninja_shadow`, `ninja_shadow_strike`, `mouse_pack`, `echolocation`, `alkara_soul_drain`, `curse_cursed`, `executioner_judgment`, `demon_vitality`, `ninja_lethality`

### **üü† –õ–ï–ì–ï–ù–î–ê–†–ù–´–ï (Legendary) - 9 —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**
- `cornered`, `mouse_king`, `silent_song`, `alkara_demon_lord`, `curse_master`, `executioner_final`, `tharnok_guardian`, `tharnok_mastery`, `ninja_master`

## üéÆ –ò–≥—Ä–æ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç:

### **–£–ª—É—á—à–µ–Ω–Ω—ã–π –±–∞–ª–∞–Ω—Å:**
- **–≠–ø–∏—á–µ—Å–∫–∞—è —Ä–µ–¥–∫–æ—Å—Ç—å** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–æ—â–Ω–æ—Å—Ç–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å** - 700 –æ—Å–∫–æ–ª–∫–æ–≤ –¥—É—à
- **–õ–æ–≥–∏—á–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** - —Ç–æ–ª—å–∫–æ –æ—Ç —ç–ø–∏—á–µ—Å–∫–∏—Ö+ –∫—Ä—ã—Å

### **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è –∏–∑—É—á–µ–Ω–∏—è –∫—Ä—ã—Å:**
1. **Common** ‚Üí `rat_vitality`, `quick_strike`
2. **Uncommon** ‚Üí `dodge`
3. **Rare** ‚Üí `blood_flow`
4. **Epic** ‚Üí `agility` ‚úÖ (—Ç–µ–ø–µ—Ä—å —ç–ø–∏—á–µ—Å–∫–∞—è)
5. **Legendary** ‚Üí `cornered`

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–¢–µ–ø–µ—Ä—å "–ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç—å" –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∫–∞–∫ —ç–ø–∏—á–µ—Å–∫–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –æ—Ç —ç–ø–∏—á–µ—Å–∫–∏—Ö+ –∫—Ä—ã—Å!
