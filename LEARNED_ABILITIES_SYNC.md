# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑—É—á–µ–Ω–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π —Å –æ–∫–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üéØ –¶–µ–ª—å:
–°–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –≤—Å–µ –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∏–∑—É—á–µ–Ω–∏—è (`AbilityLearningSystem`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤ –æ–∫–Ω–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏.

## üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

### **1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ PlayerData.gd:**

#### **–§—É–Ω–∫—Ü–∏—è `_sync_learned_abilities_from_learning_system()`:**
```gdscript
func _sync_learned_abilities_from_learning_system():
	"""–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–∑ AbilityLearningSystem —Å learned_passives"""
	var ability_learning_system = get_node_or_null("/root/AbilityLearningSystem")
	if not ability_learning_system:
		return
	
	# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–∏–≥–Ω–∞–ª—É –∏–∑—É—á–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã)
	if not ability_learning_system.is_connected("ability_learned", Callable(self, "_on_ability_learned")):
		ability_learning_system.connect("ability_learned", Callable(self, "_on_ability_learned"))
	
	# –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∏–∑—É—á–µ–Ω–∏—è
	var learned_from_system = ability_learning_system.get_learned_abilities()
	
	# –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤ learned_passives
	for ability_id in learned_from_system:
		if ability_id not in learned_passives:
			learned_passives.append(ability_id)
			print("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑—É—á–µ–Ω–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: ", ability_id)
```

#### **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–∞ `_on_ability_learned()`:**
```gdscript
func _on_ability_learned(ability_id: String, progress: int):
	"""–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–∞ –∏–∑—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏"""
	if ability_id not in learned_passives:
		learned_passives.append(ability_id)
		print("–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–∑—É—á–µ–Ω–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: ", ability_id)
```

### **2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

#### **–í `initialize_passive_system()`:**
```gdscript
func initialize_passive_system():
	"""–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π"""
	if not passive_ability_manager:
		var script = load("res://Scripts/PassiveAbilities/PassiveAbilityManager.gd")
		passive_ability_manager = Node.new()
		passive_ability_manager.set_script(script)
		add_child(passive_ability_manager)
	
	# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∏–∑—É—á–µ–Ω–∏—è
	_sync_learned_abilities_from_learning_system()
```

#### **–í `get_available_passives_for_ui()`:**
```gdscript
func get_available_passives_for_ui() -> Array[Dictionary]:
	"""–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ UI"""
	var result: Array[Dictionary] = []
	
	if not passive_ability_manager:
		initialize_passive_system()
	
	# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–∑ AbilityLearningSystem
	_sync_learned_abilities_from_learning_system()
	
	# ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
```

## üéÆ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
1. **–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** —Å–∏—Å—Ç–µ–º—ã –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
2. **–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞** —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏
3. **–ü—Ä–∏ –∏–∑—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** (—á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª `ability_learned`)

### **–ü—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞** –∏–∑—É—á–µ–Ω–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –∏–∑ `AbilityLearningSystem`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞** –∫–∞–∂–¥–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –≤ `learned_passives`
3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ** –Ω–æ–≤—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –≤ `learned_passives`
4. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–∏–≥–Ω–∞–ª—É** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–í—Å–µ –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** (–≤–∫–ª—é—á–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ª–µ—Ç—É—á–µ–π –º—ã—à–∏) –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –æ–∫–Ω–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –∏–∑—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ –∏–≥—Ä—ã

## üìã –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã:

### **–î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- –ò–∑—É—á–∞–µ—à—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ª–µ—Ç—É—á–µ–π –º—ã—à–∏ ‚Üí –æ–Ω–∏ –ù–ï –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –æ–∫–Ω–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ù—É–∂–Ω–æ –±—ã–ª–æ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤ `learned_passives`

### **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- –ò–∑—É—á–∞–µ—à—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ª–µ—Ç—É—á–µ–π –º—ã—à–∏ ‚Üí –æ–Ω–∏ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –æ–∫–Ω–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ú–æ–∂–µ—à—å —Å—Ä–∞–∑—É –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤

## üîÑ Workflow –∏–≥—Ä–æ–∫–∞:

1. **–ü–æ–±–µ–∂–¥–∞–µ—à—å –≤—Ä–∞–≥–æ–≤** ‚Üí –∏–∑—É—á–∞–µ—à—å –∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
2. **–û—Ç–∫—Ä—ã–≤–∞–µ—à—å –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –ø–∞—Å—Å–∏–≤–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏
3. **–í–∏–¥–∏—à—å –≤—Å–µ –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** –≤ —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
4. **–ê–∫—Ç–∏–≤–∏—Ä—É–µ—à—å –Ω—É–∂–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –±–æ—é

## ‚úÖ –°—Ç–∞—Ç—É—Å: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–¢–µ–ø–µ—Ä—å –≤—Å–µ –∏–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏!
