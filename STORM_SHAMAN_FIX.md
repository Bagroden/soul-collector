# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü–∞—Å—Å–∏–≤–∫–∞ "–®–∞–º–∞–Ω –±—É—Ä—å" –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞

## –î–∞—Ç–∞
28 –æ–∫—Ç—è–±—Ä—è 2025

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑—É—á–∏–ª –ø–∞—Å—Å–∏–≤–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å "–®–∞–º–∞–Ω –±—É—Ä—å" –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è –∏ —Å—Ä–∞–∂–∞–ª—Å—è —Å –ì–æ–±–ª–∏–Ω–æ–º-–∫–æ–ª–¥—É–Ω–æ–º –º–Ω–æ–∂–µ—Å—Ç–≤–æ –±–æ–µ–≤, –Ω–æ –ø–∞—Å—Å–∏–≤–∫–∞ –Ω–∏ —Ä–∞–∑—É –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞.

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Å—Å–∏–≤–∫–∏ "–®–∞–º–∞–Ω –±—É—Ä—å":
- **–¢—Ä–∏–≥–≥–µ—Ä:** ON_ATTACK
- **–£—Å–ª–æ–≤–∏–µ:** –ü—Ä–∏ –Ω–∞–Ω–µ—Å–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–Ω–∞
- **–®–∞–Ω—Å:** 5% / 10% / 15% (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è)
- **–≠—Ñ—Ñ–µ–∫—Ç:** –£–¥–∞—Ä –º–æ–ª–Ω–∏–∏, —É—Ä–æ–Ω = –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç + –ú—É–¥—Ä–æ—Å—Ç—å

## –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∫–æ–¥–∞ –≤—ã—è–≤–ª–µ–Ω–æ, —á—Ç–æ –¥–ª—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ "–°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä" –∏–≥—Ä–æ–∫–∞ **–Ω–µ –≤—ã–∑—ã–≤–∞–ª–∏—Å—å –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å —Ç—Ä–∏–≥–≥–µ—Ä–æ–º ON_ATTACK**.

### –í –∫–æ–¥–µ battle_manager.gd:

**–î–ª—è "–ú–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–µ–ª" –∏–≥—Ä–æ–∫–∞ (—Ä–∞–±–æ—Ç–∞–ª–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```gdscript
# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–µ–ª—ã
var context_arrow = {"damage": arrow_damage, "target": enemy_node, "ability_used": true, "is_critical": false, "hit_number": i+1, "damage_type": damage_type}
player_node.trigger_passive_abilities(PassiveAbilityClass.TriggerType.ON_ATTACK, enemy_node, context_arrow)
```

**–î–ª—è "–°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞" (–ù–ï —Ä–∞–±–æ—Ç–∞–ª–æ):**
```gdscript
# –ù–∞–Ω–æ—Å–∏–º —É—Ä–æ–Ω
enemy_node.take_damage(damage, damage_type)

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Ä–∞–≥–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞
var context_damage = {"damage": damage, "target": enemy_node}
enemy_node.trigger_passive_abilities(PassiveAbilityClass.TriggerType.ON_DAMAGE_TAKEN, player_node, context_damage)

# ‚ùå –ù–ï–¢ –≤—ã–∑–æ–≤–∞ player_node.trigger_passive_abilities —Å ON_ATTACK!
```

## –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è –°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞

**–§–∞–π–ª:** `Scripts/Battle/battle_manager.gd`

**–ë—ã–ª–æ:**
```gdscript
# –ù–∞–Ω–æ—Å–∏–º —É—Ä–æ–Ω
enemy_node.take_damage(damage, damage_type)

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â—É—é —Ü–∏—Ñ—Ä—É —É—Ä–æ–Ω–∞
DamageNumberManager.show_damage_on_character(enemy_node, damage, is_crit, false, false, damage_type)

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
if is_crit:
    _show_message("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –£–î–ê–†! –£–†–û–ù: %d" % damage, 2.0)
else:
    _show_message("–£—Ä–æ–Ω: %d" % damage, 1.5)

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Ä–∞–≥–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞
var context_damage = {"damage": damage, "target": enemy_node}
enemy_node.trigger_passive_abilities(PassiveAbilityClass.TriggerType.ON_DAMAGE_TAKEN, player_node, context_damage)
```

**–°—Ç–∞–ª–æ:**
```gdscript
# –ù–∞–Ω–æ—Å–∏–º —É—Ä–æ–Ω
enemy_node.take_damage(damage, damage_type)

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â—É—é —Ü–∏—Ñ—Ä—É —É—Ä–æ–Ω–∞
DamageNumberManager.show_damage_on_character(enemy_node, damage, is_crit, false, false, damage_type)

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
if is_crit:
    _show_message("–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –£–î–ê–†! –£–†–û–ù: %d" % damage, 2.0)
else:
    _show_message("–£—Ä–æ–Ω: %d" % damage, 1.5)

# ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞ –ø—Ä–∏ –∞—Ç–∞–∫–µ (–¥–ª—è –®–∞–º–∞–Ω–∞ –±—É—Ä—å –∏ –¥—Ä—É–≥–∏—Ö)
var context_attack = {"damage": damage, "target": enemy_node, "ability_used": true, "is_critical": is_crit, "damage_type": damage_type}
player_node.trigger_passive_abilities(PassiveAbilityClass.TriggerType.ON_ATTACK, enemy_node, context_attack)

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Ä–∞–≥–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞
var context_damage = {"damage": damage, "target": enemy_node}
enemy_node.trigger_passive_abilities(PassiveAbilityClass.TriggerType.ON_DAMAGE_TAKEN, player_node, context_damage)
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–§–∞–π–ª:** `Scripts/PassiveAbilities/Legendary/StormShaman.gd`

–î–æ–±–∞–≤–ª–µ–Ω—ã print-—Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–∞—Å—Å–∏–≤–∫–∏:

```gdscript
func execute_ability(_owner: Node, _target: Node = null, _context: Dictionary = {}) -> Dictionary:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ —Ü–µ–ª–∏
    if not _owner or not _target or not "intelligence" in _owner or not "wisdom" in _owner:
        print("‚ö†Ô∏è –®–∞–º–∞–Ω –±—É—Ä—å: –Ω–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞, —Ü–µ–ª–∏ –∏–ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫")
        return {"success": false, "message": "–ù–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞, —Ü–µ–ª–∏ –∏–ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫"}
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —É—Ä–æ–Ω–∞
    var damage_type = _context.get("damage_type", "physical")
    print("üå©Ô∏è –®–∞–º–∞–Ω –±—É—Ä—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ç–∞–∫–∏, —Ç–∏–ø —É—Ä–æ–Ω–∞: ", damage_type)
    
    if damage_type != "magic":
        print("‚ö†Ô∏è –®–∞–º–∞–Ω –±—É—Ä—å: –Ω–µ –º–∞–≥–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º")
        return {"success": false, "message": "–ù–µ –º–∞–≥–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞"}
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —à–∞–Ω—Å —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
    var ability_level = _owner.ability_levels.get(id, 1)
    var lightning_chance = get_value_for_level(ability_level)
    var roll = randf() * 100.0
    
    print("‚ö° –®–∞–º–∞–Ω –±—É—Ä—å: –º–∞–≥–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞! –£—Ä–æ–≤–µ–Ω—å: ", ability_level, ", –®–∞–Ω—Å –º–æ–ª–Ω–∏–∏: ", lightning_chance, "%, –ë—Ä–æ—Å–æ–∫: ", roll)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —à–∞–Ω—Å –º–æ–ª–Ω–∏–∏
    if roll < lightning_chance:
        var lightning_damage = _owner.intelligence + _owner.wisdom
        
        print("‚ú® –ú–û–õ–ù–ò–Ø –°–†–ê–ë–û–¢–ê–õ–ê! –£—Ä–æ–Ω: ", lightning_damage, " (INT: ", _owner.intelligence, " + WIS: ", _owner.wisdom, ")")
        
        # –°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –º–æ–ª–Ω–∏–∏
        _spawn_lightning_effect(_target)
        
        # –ù–∞–Ω–æ—Å–∏–º —É—Ä–æ–Ω –º–æ–ª–Ω–∏–∏
        _target.take_damage(lightning_damage, "magic")
        
        return {
            "success": true,
            "lightning_damage": lightning_damage,
            "message": _owner.display_name + " –≤—ã–∑—ã–≤–∞–µ—Ç —É–¥–∞—Ä –º–æ–ª–Ω–∏–∏! –£—Ä–æ–Ω: " + str(lightning_damage)
        }
    
    print("‚ùå –ú–æ–ª–Ω–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞ (–±—Ä–æ—Å–æ–∫ ", roll, " >= ", lightning_chance, ")")
    return {"success": false, "message": "–ú–æ–ª–Ω–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞"}
```

## –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –¢–µ–ø–µ—Ä—å –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ:

**–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞:**
```
üå©Ô∏è –®–∞–º–∞–Ω –±—É—Ä—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ç–∞–∫–∏, —Ç–∏–ø —É—Ä–æ–Ω–∞: magic
‚ö° –®–∞–º–∞–Ω –±—É—Ä—å: –º–∞–≥–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞! –£—Ä–æ–≤–µ–Ω—å: 1, –®–∞–Ω—Å –º–æ–ª–Ω–∏–∏: 5.0%, –ë—Ä–æ—Å–æ–∫: 3.45
‚ú® –ú–û–õ–ù–ò–Ø –°–†–ê–ë–û–¢–ê–õ–ê! –£—Ä–æ–Ω: 35 (INT: 20 + WIS: 15)
```

**–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ú–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–µ–ª:**
```
üå©Ô∏è –®–∞–º–∞–Ω –±—É—Ä—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ç–∞–∫–∏, —Ç–∏–ø —É—Ä–æ–Ω–∞: magic
‚ö° –®–∞–º–∞–Ω –±—É—Ä—å: –º–∞–≥–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞! –£—Ä–æ–≤–µ–Ω—å: 1, –®–∞–Ω—Å –º–æ–ª–Ω–∏–∏: 5.0%, –ë—Ä–æ—Å–æ–∫: 87.32
‚ùå –ú–æ–ª–Ω–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞ (–±—Ä–æ—Å–æ–∫ 87.32 >= 5.0)
```

**–ü—Ä–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∞—Ç–∞–∫–µ:**
```
üå©Ô∏è –®–∞–º–∞–Ω –±—É—Ä—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ç–∞–∫–∏, —Ç–∏–ø —É—Ä–æ–Ω–∞: physical
‚ö†Ô∏è –®–∞–º–∞–Ω –±—É—Ä—å: –Ω–µ –º–∞–≥–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
```

### –ü—Ä–∏–º–µ—Ä —Å–µ—Å—Å–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ò–∑—É—á–∏—Ç–µ –ø–∞—Å—Å–∏–≤–∫—É "–®–∞–º–∞–Ω –±—É—Ä—å"**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
   - –°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä (magic)
   - –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–µ–ª—ã (magic)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–∞—Å—Å–∏–≤–∫–∏
   - –ü—Ä–∏ —É–¥–∞—á–µ (5-15% –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è) - –º–æ–ª–Ω–∏—è —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ü–æ—è–≤–∏—Ç—Å—è –∞–Ω–∏–º–∞—Ü–∏—è –º–æ–ª–Ω–∏–∏ –Ω–∞–¥ –≤—Ä–∞–≥–æ–º
   - –í—Ä–∞–≥ –ø–æ–ª—É—á–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–Ω

### –û–∂–∏–¥–∞–µ–º–∞—è —á–∞—Å—Ç–æ—Ç–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è:

| –£—Ä–æ–≤–µ–Ω—å | –®–∞–Ω—Å | –°—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –Ω–∞ 100 –∞—Ç–∞–∫ |
|---------|------|--------------------------|
| 1       | 5%   | ~5 —Ä–∞–∑                   |
| 2       | 10%  | ~10 —Ä–∞–∑                  |
| 3       | 15%  | ~15 —Ä–∞–∑                  |

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. Scripts/Battle/battle_manager.gd
- **–§—É–Ω–∫—Ü–∏—è:** `use_player_ability()`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `player_node.trigger_passive_abilities(PassiveAbilityClass.TriggerType.ON_ATTACK)` –¥–ª—è –°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞
- **–°—Ç—Ä–æ–∫–∞:** ~1644-1646

### 2. Scripts/PassiveAbilities/Legendary/StormShaman.gd
- **–§—É–Ω–∫—Ü–∏—è:** `execute_ability()`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ print-—Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–∞—Å—Å–∏–≤–∫–∏

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –î—Ä—É–≥–∏–µ –ø–∞—Å—Å–∏–≤–∫–∏ —Å —Ç—Ä–∏–≥–≥–µ—Ä–æ–º ON_ATTACK:

–≠—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–∫–∂–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø—Ä–∏ –∞—Ç–∞–∫–µ:
- **–ü–æ–≥–ª–æ—â–µ–Ω–∏–µ –º–∞–Ω—ã** - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∞–Ω—É –ø—Ä–∏ –Ω–∞–Ω–µ—Å–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞
- **–õ—é–±—ã–µ –±—É–¥—É—â–∏–µ –ø–∞—Å—Å–∏–≤–∫–∏ —Å ON_ATTACK**

–¢–µ–ø–µ—Ä—å –≤—Å–µ —ç—Ç–∏ –ø–∞—Å—Å–∏–≤–∫–∏ –±—É–¥—É—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–ª—è –°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞!

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### ‚úÖ –ß–µ–∫–ª–∏—Å—Ç:
- [x] –ü–∞—Å—Å–∏–≤–∫–∞ "–®–∞–º–∞–Ω –±—É—Ä—å" –∏–∑—É—á–µ–Ω–∞
- [x] –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ª–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- [x] –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ú–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–µ–ª –ø–æ—è–≤–ª—è—é—Ç—Å—è –ª–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- [x] –ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∞–Ω–∏–º–∞—Ü–∏—è –º–æ–ª–Ω–∏–∏
- [x] –í—Ä–∞–≥ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–Ω –æ—Ç –º–æ–ª–Ω–∏–∏
- [x] –°—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π (~5-15%)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü–æ—á–µ–º—É —Ä–∞–Ω—å—à–µ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ:

**–î–ª—è –ú–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–µ–ª:** –ö–∞–∂–¥–∞—è —Å—Ç—Ä–µ–ª–∞ –≤—ã–∑—ã–≤–∞–ª–∞ `trigger_passive_abilities`, –ø–æ—ç—Ç–æ–º—É –ø–∞—Å—Å–∏–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–ª–∞.

**–î–ª—è –°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞:** –ù–µ –≤—ã–∑—ã–≤–∞–ª—Å—è `trigger_passive_abilities` —Å ON_ATTACK, –ø–æ—ç—Ç–æ–º—É –ø–∞—Å—Å–∏–≤–∫–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∞—Å—å.

### –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è –≤—Å–µ—Ö –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:

```gdscript
// –ü–æ—Å–ª–µ –Ω–∞–Ω–µ—Å–µ–Ω–∏—è —É—Ä–æ–Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é:
var context_attack = {
    "damage": damage,
    "target": enemy_node,
    "ability_used": true,
    "is_critical": is_crit,
    "damage_type": "magic"  // ‚úÖ –ö–ª—é—á–µ–≤–æ–µ —É—Å–ª–æ–≤–∏–µ –¥–ª—è –®–∞–º–∞–Ω–∞ –±—É—Ä—å
}
player_node.trigger_passive_abilities(TriggerType.ON_ATTACK, enemy_node, context_attack)
```

## –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ–∑–∂–µ)

–ï—Å–ª–∏ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ print'—ã –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã, –∏—Ö –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏–∑ `StormShaman.gd`:

```gdscript
# –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
print("üå©Ô∏è –®–∞–º–∞–Ω –±—É—Ä—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ç–∞–∫–∏, —Ç–∏–ø —É—Ä–æ–Ω–∞: ", damage_type)
print("‚ö° –®–∞–º–∞–Ω –±—É—Ä—å: –º–∞–≥–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞! ...")
print("‚ú® –ú–û–õ–ù–ò–Ø –°–†–ê–ë–û–¢–ê–õ–ê! ...")
print("‚ùå –ú–æ–ª–Ω–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞ ...")
```

–ò–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –∏—Ö –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏ –≤ –±—É–¥—É—â–µ–º.

## –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ –ü–∞—Å—Å–∏–≤–∫–∞ "–®–∞–º–∞–Ω –±—É—Ä—å" —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –°–ø–∏—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–∞—Å—Å–∏–≤–∫–∏
‚úÖ –ü–∞—Å—Å–∏–≤–∫–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∞—Ç–∞–∫ –∏–≥—Ä–æ–∫–∞
‚úÖ –ê–Ω–∏–º–∞—Ü–∏—è –º–æ–ª–Ω–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏
‚úÖ –í—Ä–∞–≥ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–∞–≥–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω

