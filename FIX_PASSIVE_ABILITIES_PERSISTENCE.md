# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –∏–≥—Ä—ã –∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å —Å–Ω–æ–≤–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, —Ö–æ—Ç—è –æ–Ω–∏ –±—ã–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã —Ä–∞–Ω–µ–µ.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### **1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `apply_active_passive_bonuses()` –≤ PlayerData.gd:**
```gdscript
func apply_active_passive_bonuses():
	"""–ü—Ä–∏–º–µ–Ω—è–µ—Ç –±–æ–Ω—É—Å—ã –æ—Ç –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–≥—Ä—ã)"""
	print("=== –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ë–û–ù–£–°–û–í –û–¢ –ê–ö–¢–ò–í–ù–´–• –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô ===")
	print("–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è: ", active_passives)
	
	# –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –±–æ–Ω—É—Å—ã –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
	passive_strength_bonus = 0
	passive_agility_bonus = 0
	passive_vitality_bonus = 0
	passive_endurance_bonus = 0
	passive_intelligence_bonus = 0
	passive_wisdom_bonus = 0
	passive_hp_bonus = 0
	
	# –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–Ω—É—Å—ã –æ—Ç –∫–∞–∂–¥–æ–π –∞–∫—Ç–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
	for ability_id in active_passives:
		_apply_single_passive_bonus(ability_id)
	
	print("=== –ö–û–ù–ï–¶ –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø –ë–û–ù–£–°–û–í –û–¢ –ê–ö–¢–ò–í–ù–´–• –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô ===")
```

### **2. –ò–∑–º–µ–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `load_game_data()` –≤ PlayerManager.gd:**
```gdscript
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—É –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
player_data.initialize_passive_system()

# –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–Ω—É—Å—ã –æ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
player_data.apply_active_passive_bonuses()

# –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –±–æ–Ω—É—Å—ã
player_data.calculate_stat_bonuses()
player_data.apply_stat_bonuses()
```

### **3. –î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PassiveAbilitiesWindow.gd:**
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- –ü—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π  
- –ü—Ä–∏ –∏–∑—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### **–®–∞–≥ 1: –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É
2. –û—Ç–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–°–∏–ª—å–Ω—ã–π" –∏ "–ñ–∏–≤—É—á–µ—Å—Ç—å")
4. –ó–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ

### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**
1. –í—ã–π–¥–∏—Ç–µ –∏–∑ –∏–≥—Ä—ã (Alt+F4 –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É —Å–Ω–æ–≤–∞
3. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"

### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞–Ω–µ–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞–ª–∏—Å—å –∞–∫—Ç–∏–≤–Ω—ã–º–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ–Ω—É—Å—ã –æ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, +30 –∫ —Å–∏–ª–µ –æ—Ç "–°–∏–ª—å–Ω–æ–≥–æ")

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

### **–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ:**
1. –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å —Ç–æ–ª—å–∫–æ ID –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –≤ –º–∞—Å—Å–∏–≤–µ `active_passives`
2. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —ç—Ç–∏ ID –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å, –Ω–æ –±–æ–Ω—É—Å—ã –æ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –ù–ï –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å
3. –§—É–Ω–∫—Ü–∏—è `sync_active_passives_with_bonuses()` —Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–∞–æ–±–æ—Ä–æ—Ç - –¥–æ–±–∞–≤–ª—è–ª–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤ `active_passives` –µ—Å–ª–∏ –µ—Å—Ç—å –±–æ–Ω—É—Å—ã, –∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∞ –±–æ–Ω—É—Å—ã –µ—Å–ª–∏ –µ—Å—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### **–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `apply_active_passive_bonuses()` –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç –±–æ–Ω—É—Å—ã –æ—Ç –≤—Å–µ—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –≤ `active_passives`
2. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–≥—Ä—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ `active_passives`
3. –î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:
–¢–µ–ø–µ—Ä—å –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–≥—Ä—ã. –ò–≥—Ä–æ–∫—É –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–Ω–æ–≤–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏ –≤—Ö–æ–¥–∞ –≤ –∏–≥—Ä—É.
