# üè† –ö–õ–ò–ö–ê–ë–ï–õ–¨–ù–ê–Ø –¢–û–ß–ö–ê "–ö–û–õ–û–î–ï–¶ –î–£–®" –ù–ê –ö–ê–†–¢–ï

## üìã **–ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï**

–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Ç–æ—á–∫—É **"–ö–æ–ª–æ–¥–µ—Ü –¥—É—à"** –Ω–∞ –∫–∞—Ä—Ç–µ –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—é. –†–∞–Ω–µ–µ —ç—Ç–∞ —Ç–æ—á–∫–∞ –±—ã–ª–∞ —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–π, –Ω–æ –Ω–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π.

---

## ‚ùå **–ß–¢–û –ë–´–õ–û**

### **–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ù–∞ –∫–∞—Ä—Ç–µ –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏:
- –ï—Å—Ç—å —Ç–æ—á–∫–∞ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à" (–≤–∏–∑—É–∞–ª—å–Ω–∞—è)
- ‚ùå –ö–ª–∏–∫ –Ω–∞ –Ω–µ—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–ª
- ‚úÖ –ú–æ–∂–Ω–æ –±—ã–ª–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –¢–æ—á–∫–∞ –±—ã–ª–∞ –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞
- –ò–≥—Ä–æ–∫ –º–æ–≥ –Ω–µ –ø–æ–Ω—è—Ç—å –µ—ë –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –ù–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
```

---

## ‚úÖ **–ß–¢–û –°–¢–ê–õ–û**

### **–†–µ—à–µ–Ω–∏–µ:**
```
–ù–∞ –∫–∞—Ä—Ç–µ –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏:
- –ï—Å—Ç—å —Ç–æ—á–∫–∞ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à" (–≤–∏–∑—É–∞–ª—å–Ω–∞—è)
- ‚úÖ –ö–ª–∏–∫ –Ω–∞ –Ω–µ—ë –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
- ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≥–æ–ª—É–±—ã–º —Ü–≤–µ—Ç–æ–º –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- ‚úÖ –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫–∞–∫ –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥", —Ç–∞–∫ –∏ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –¢–æ—á–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ
- –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ (—É–¥–æ–±–Ω–µ–µ –¥–ª—è –∏–≥—Ä–æ–∫–∞)
```

---

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø**

### **–§–∞–π–ª:** `Scripts/LocationSelector.gd`

---

#### **–ò–∑–º–µ–Ω–µ–Ω–∏–µ 1: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à" (—Å—Ç—Ä–æ–∫–∞ 71-86)**

**–ë–´–õ–û:**
```gdscript
func _on_background_clicked(event: InputEvent):
	"""–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —Ñ–æ–Ω—É"""
	if event is InputEventMouseButton and event.pressed and event.button_index == MOUSE_BUTTON_LEFT:
		var global_mouse_pos = get_global_mouse_position()
		
		# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª–∏–∫ –ø–æ POI (—Ç–æ—á–∫–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–∞)
		var clicked_location = _get_location_at_poi_click(global_mouse_pos)
		
		if clicked_location:
			_show_location_selection_window(clicked_location)  // ‚ùå –¢–æ–ª—å–∫–æ –ª–æ–∫–∞—Ü–∏–∏
```

**–°–¢–ê–õ–û:**
```gdscript
func _on_background_clicked(event: InputEvent):
	"""–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —Ñ–æ–Ω—É"""
	if event is InputEventMouseButton and event.pressed and event.button_index == MOUSE_BUTTON_LEFT:
		var global_mouse_pos = get_global_mouse_position()
		
		# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª–∏–∫ –ø–æ POI (—Ç–æ—á–∫–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–∞)
		var clicked_result = _get_location_at_poi_click(global_mouse_pos)
		
		# ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ö–æ–ª–æ–¥–µ—Ü –¥—É—à
		if clicked_result == "soul_well":
			# –ö–ª–∏–∫ –Ω–∞ –ö–æ–ª–æ–¥–µ—Ü –¥—É—à - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
			_on_back_pressed()
		elif clicked_result:
			# –ö–ª–∏–∫ –Ω–∞ –ª–æ–∫–∞—Ü–∏—é - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞
			_show_location_selection_window(clicked_result)
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ä `"soul_well"`
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à" –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `_on_back_pressed()`
- ‚úÖ –õ–æ–∫–∞—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ —Ä–∞–Ω—å—à–µ

---

#### **–ò–∑–º–µ–Ω–µ–Ω–∏–µ 2: –í–æ–∑–≤—Ä–∞—Ç –º–∞—Ä–∫–µ—Ä–∞ "soul_well" (—Å—Ç—Ä–æ–∫–∞ 395-409)**

**–ë–´–õ–û:**
```gdscript
func _get_location_at_poi_click(mouse_pos: Vector2):
	# ... –∫–æ–¥ ...
	
	if distance <= click_radius:
		if poi_id == "soul_well":
			# –ö–æ–ª–æ–¥–µ—Ü –¥—É—à - –Ω–µ –ª–æ–∫–∞—Ü–∏—è, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
			continue  // ‚ùå –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏ –∫–ª–∏–∫
		
		# –ò—â–µ–º –ª–æ–∫–∞—Ü–∏—é...
		return location
```

**–°–¢–ê–õ–û:**
```gdscript
func _get_location_at_poi_click(mouse_pos: Vector2):
	# ... –∫–æ–¥ ...
	
	if distance <= click_radius:
		if poi_id == "soul_well":
			# ‚úÖ –ò–ó–ú–ï–ù–ï–ù–û: –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ä
			print("DEBUG: ‚úÖ –ö–ª–∏–∫ –ø–æ –ö–æ–ª–æ–¥—Ü—É –¥—É—à –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ ", distance, " –ø–∏–∫—Å–µ–ª–µ–π")
			return "soul_well"
		
		# –ò—â–µ–º –ª–æ–∫–∞—Ü–∏—é...
		return location
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –í–º–µ—Å—Ç–æ `continue` –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–∫—É `"soul_well"`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –§—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –ª–∏–±–æ –æ–±—ä–µ–∫—Ç –ª–æ–∫–∞—Ü–∏–∏, –ª–∏–±–æ —Å—Ç—Ä–æ–∫—É `"soul_well"`, –ª–∏–±–æ `null`

---

#### **–ò–∑–º–µ–Ω–µ–Ω–∏–µ 3: –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (—Å—Ç—Ä–æ–∫–∞ 114-130)**

**–ë–´–õ–û:**
```gdscript
func _update_poi_highlight():
	# ... –∫–æ–¥ ...
	
	if distance <= hover_radius:
		# –ö—É—Ä—Å–æ—Ä —Ä—è–¥–æ–º —Å POI - –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
		var is_unlocked = _is_location_unlocked(poi_id)
		var is_coming_soon = poi_configs.get(poi_id, {}).get("coming_soon", false)
		
		if is_unlocked and not is_coming_soon:
			poi_sprite.modulate = Color(0.2, 1.0, 0.2, 1.0)  # –ó–µ–ª–µ–Ω—ã–π
		elif is_coming_soon:
			poi_sprite.modulate = Color(1.0, 0.2, 0.2, 1.0)  # –ö—Ä–∞—Å–Ω—ã–π
		else:
			poi_sprite.modulate = Color(1.0, 0.2, 0.2, 1.0)  # –ö—Ä–∞—Å–Ω—ã–π
```

**–°–¢–ê–õ–û:**
```gdscript
func _update_poi_highlight():
	# ... –∫–æ–¥ ...
	
	if distance <= hover_radius:
		# ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –ö–æ–ª–æ–¥—Ü–∞ –¥—É—à
		if poi_id == "soul_well":
			# –ö–æ–ª–æ–¥–µ—Ü –¥—É—à - –≥–æ–ª—É–±–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
			poi_sprite.modulate = Color(0.2, 0.8, 1.0, 1.0)  # –ì–æ–ª—É–±–æ–π
		else:
			# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ª–æ–∫–∞—Ü–∏–∏
			var is_unlocked = _is_location_unlocked(poi_id)
			var is_coming_soon = poi_configs.get(poi_id, {}).get("coming_soon", false)
			
			if is_unlocked and not is_coming_soon:
				poi_sprite.modulate = Color(0.2, 1.0, 0.2, 1.0)  # –ó–µ–ª–µ–Ω—ã–π
			elif is_coming_soon:
				poi_sprite.modulate = Color(1.0, 0.2, 0.2, 1.0)  # –ö—Ä–∞—Å–Ω—ã–π
			else:
				poi_sprite.modulate = Color(1.0, 0.2, 0.2, 1.0)  # –ö—Ä–∞—Å–Ω—ã–π
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `poi_id == "soul_well"`
- ‚úÖ –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à" –ø–æ–¥—Å–≤–µ—Ç–∫–∞ **–≥–æ–ª—É–±—ã–º —Ü–≤–µ—Ç–æ–º**
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ª–æ–∫–∞—Ü–∏–π (–≥–æ–ª—É–±–æ–π –≤–º–µ—Å—Ç–æ –∑–µ–ª–µ–Ω–æ–≥–æ)

---

## üé® **–¶–í–ï–¢–û–í–ê–Ø –°–•–ï–ú–ê POI**

### **–ö–æ–ª–æ–¥–µ—Ü –¥—É—à:**
```
–ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç: –ë–µ–ª—ã–π (1.0, 1.0, 1.0)
–ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏: –ì–æ–ª—É–±–æ–π (0.2, 0.8, 1.0)
```

### **–î–æ—Å—Ç—É–ø–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è:**
```
–ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç: –°–∏–Ω–∏–π (0.3, 0.5, 1.0)
–ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏: –ó–µ–ª–µ–Ω—ã–π (0.2, 1.0, 0.2)
```

### **–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è:**
```
–ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç: –ö—Ä–∞—Å–Ω—ã–π (1.0, 0.2, 0.2)
–ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏: –ö—Ä–∞—Å–Ω—ã–π (1.0, 0.2, 0.2) - –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
```

### **–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:**
```
–ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç: –ö—Ä–∞—Å–Ω—ã–π (1.0, 0.2, 0.2)
–ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏: –ö—Ä–∞—Å–Ω—ã–π (1.0, 0.2, 0.2) - –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
```

---

## üéÆ **–û–ü–´–¢ –ò–ì–†–û–ö–ê**

### **–î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

```
–ò–≥—Ä–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ:
1. –í–∏–¥–∏—Ç —Ç–æ—á–∫—É "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à"
2. –ü—Ä–æ–±—É–µ—Ç –∫–ª–∏–∫–Ω—É—Ç—å ‚Üí ‚ùå –ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
3. –ù–µ –ø–æ–Ω–∏–º–∞–µ—Ç, –∑–∞—á–µ–º —ç—Ç–∞ —Ç–æ—á–∫–∞
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"

–ü—Ä–æ–±–ª–µ–º—ã:
‚ùå –ù–µ–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ
‚ùå –ë–µ—Å–ø–æ–ª–µ–∑–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
‚ùå –ü—É—Ç–∞–Ω–∏—Ü–∞
```

---

### **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

```
–ò–≥—Ä–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ:
1. –í–∏–¥–∏—Ç —Ç–æ—á–∫—É "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à"
2. –ù–∞–≤–æ–¥–∏—Ç –∫—É—Ä—Å–æ—Ä ‚Üí ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≥–æ–ª—É–±—ã–º
3. –ö–ª–∏–∫–∞–µ—Ç ‚Üí ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ
‚úÖ –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ (–∫–Ω–æ–ø–∫–∞ + —Ç–æ—á–∫–∞)
‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
‚úÖ –õ–æ–≥–∏—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
```

---

## üìä **–î–ò–ê–ì–†–ê–ú–ú–ê –ü–û–í–ï–î–ï–ù–ò–Ø**

### **–°—Ö–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞:**

```
[–ò–≥—Ä–æ–∫ –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ –∫–∞—Ä—Ç–µ]
       ‚Üì
[_on_background_clicked()]
       ‚Üì
[_get_location_at_poi_click()]
       ‚Üì
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ –ü—Ä–æ–≤–µ—Ä–∫–∞ POI:  ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚Üì             ‚Üì
[soul_well?]   [–õ–æ–∫–∞—Ü–∏—è?]
    ‚Üì             ‚Üì
[–í–µ—Ä–Ω—É—Ç—å]   [–í–µ—Ä–Ω—É—Ç—å –æ–±—ä–µ–∫—Ç]
"soul_well"     –ª–æ–∫–∞—Ü–∏–∏
    ‚Üì             ‚Üì
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚Üì
[_on_background_clicked() –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç]
           ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚Üì             ‚Üì
[== "soul_well"?] [–õ–æ–∫–∞—Ü–∏—è?]
    ‚Üì             ‚Üì
[_on_back_pressed()] [_show_location_selection_window()]
    ‚Üì             ‚Üì
[–≠–∫—Ä–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏] [–û–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏]
```

---

### **–°—Ö–µ–º–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏:**

```
[–ò–≥—Ä–æ–∫ –Ω–∞–≤–æ–¥–∏—Ç –∫—É—Ä—Å–æ—Ä]
       ‚Üì
[_update_poi_highlight()]
       ‚Üì
[–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ POI]
       ‚Üì
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ distance ‚â§ ‚îÇ
  ‚îÇ 100px?     ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚Üì             ‚Üì
  [–î–∞]          [–ù–µ—Ç]
    ‚Üì             ‚Üì
[poi_id ==]   [–ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç]
"soul_well"?
    ‚Üì
 ‚îå‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îê
 ‚Üì     ‚Üì
[–î–∞] [–ù–µ—Ç]
 ‚Üì     ‚Üì
[–ì–æ–ª—É–±–æ–π] [–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞—Ü–∏–∏]
          ‚Üì
       ‚îå‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îê
       ‚Üì     ‚Üì
   [–î–æ—Å—Ç—É–ø–Ω–∞?] [–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞?]
       ‚Üì     ‚Üì
   [–ó–µ–ª–µ–Ω—ã–π] [–ö—Ä–∞—Å–Ω—ã–π]
```

---

## üîç **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï**

### **–¢–µ—Å—Ç 1: –ö–ª–∏–∫ –Ω–∞ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à"**
```
1. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏
2. –ù–∞–π—Ç–∏ —Ç–æ—á–∫—É "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à" (–≤ —Ü–µ–Ω—Ç—Ä–µ —Å–Ω–∏–∑—É)
3. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Ç–æ—á–∫—É

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—é
‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: "DEBUG: ‚úÖ –ö–ª–∏–∫ –ø–æ –ö–æ–ª–æ–¥—Ü—É –¥—É—à..."
```

---

### **–¢–µ—Å—Ç 2: –ù–∞–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à"**
```
1. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏
2. –ù–∞–≤–µ—Å—Ç–∏ –∫—É—Ä—Å–æ—Ä –Ω–∞ —Ç–æ—á–∫—É "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à"

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –¢–æ—á–∫–∞ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –≥–æ–ª—É–±—ã–º —Ü–≤–µ—Ç–æ–º
‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
```

---

### **–¢–µ—Å—Ç 3: –ö–ª–∏–∫ —Ä—è–¥–æ–º —Å "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à"**
```
1. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏
2. –ö–ª–∏–∫–Ω—É—Ç—å –†–Ø–î–û–ú —Å —Ç–æ—á–∫–æ–π (–≤ —Ä–∞–¥–∏—É—Å–µ 100px)

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
‚úÖ –†–∞–¥–∏—É—Å –∫–ª–∏–∫–∞ 100px (—É–¥–æ–±–Ω–æ –¥–ª—è –∏–≥—Ä–æ–∫–∞)
```

---

### **–¢–µ—Å—Ç 4: –ö–ª–∏–∫ –≤–Ω–µ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à"**
```
1. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏
2. –ö–ª–∏–∫–Ω—É—Ç—å –î–ê–õ–ï–ö–û –æ—Ç —Ç–æ—á–∫–∏ (>100px)

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–∏–ª–∏ –∫–ª–∏–∫ –Ω–∞ –¥—Ä—É–≥—É—é POI)
‚úÖ –ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–∞–∫ —Ä–∞–Ω—å—à–µ
```

---

### **–¢–µ—Å—Ç 5: –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"**
```
1. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
‚úÖ –û–±–∞ —Å–ø–æ—Å–æ–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
```

---

## üí° **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê**

### **1. –£–¥–æ–±—Å—Ç–≤–æ:**
```
‚úÖ –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è (–∫–Ω–æ–ø–∫–∞ + —Ç–æ—á–∫–∞)
‚úÖ –ù–µ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ
```

### **2. –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:**
```
‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç (–≥–æ–ª—É–±–æ–π)
‚úÖ –ü–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Ç–æ—á–∫–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞
```

### **3. –õ–æ–≥–∏–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –º–∏—Ä–∞:**
```
‚úÖ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à" - —ç—Ç–æ –¥–æ–º/–±–∞–∑–∞
‚úÖ –õ–æ–≥–∏—á–Ω–æ, —á—Ç–æ –∫–ª–∏–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ–º–æ–π
‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º –∏–≥—Ä–æ–∫–∞
```

### **4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```
‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤–æ–∑–≤—Ä–∞—Ç–∞
‚úÖ –ù–∏–∫–∞–∫–∏—Ö –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

---

## ‚ö†Ô∏è **–í–û–ó–ú–û–ñ–ù–´–ï –í–û–ü–†–û–°–´**

### **Q: –ü–æ—á–µ–º—É –≥–æ–ª—É–±–æ–π —Ü–≤–µ—Ç, –∞ –Ω–µ –∑–µ–ª–µ–Ω—ã–π?**
```
A: –ì–æ–ª—É–±–æ–π –æ—Ç–ª–∏—á–∞–µ—Ç "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à" –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π:
   - –ó–µ–ª–µ–Ω—ã–π = –¥–æ—Å—Ç—É–ø–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è (–º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –∑–∞–±–µ–≥)
   - –ì–æ–ª—É–±–æ–π = –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –±–∞–∑—É (–¥—Ä—É–≥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ)
   –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∏–≥—Ä–æ–∫—É —Ä–∞–∑–ª–∏—á–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏.
```

### **Q: –ú–æ–∂–Ω–æ –ª–∏ —É–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"?**
```
A: –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" - —ç—Ç–æ:
   1. –ü—Ä–∏–≤—ã—á–Ω—ã–π UI —ç–ª–µ–º–µ–Ω—Ç
   2. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–æ–∑–≤—Ä–∞—Ç–∞
   3. –ü–æ–Ω—è—Ç–Ω–µ–µ –¥–ª—è –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
   –õ—É—á—à–µ –æ—Å—Ç–∞–≤–∏—Ç—å –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞.
```

### **Q: –†–∞–¥–∏—É—Å 100px - –Ω–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ?**
```
A: –ù–µ—Ç, —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–∞–¥–∏—É—Å:
   - –£–¥–æ–±–Ω–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (–µ—Å–ª–∏ –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ç–æ—á–Ω–æ–≥–æ –∫–ª–∏–∫–∞
   - –¢–∞–∫–æ–π –∂–µ —Ä–∞–¥–∏—É—Å —É –≤—Å–µ—Ö POI
```

### **Q: –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è—Ö?**
```
A: ‚úÖ –î–∞, –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ UI.
   –ù–∏–∫–∞–∫–æ–≥–æ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.
```

---

## üìù **–ò–¢–û–ì**

### **–ò–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –¢–æ—á–∫–∞ "–ö–æ–ª–æ–¥–µ—Ü –¥—É—à" —Ç–µ–ø–µ—Ä—å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞
- ‚úÖ –ö–ª–∏–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
- ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≥–æ–ª—É–±—ã–º —Ü–≤–µ—Ç–æ–º –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- ‚úÖ 3 –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ)

### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –£–ª—É—á—à–µ–Ω UX (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç)
- ‚úÖ –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è (—É–¥–æ–±–Ω–µ–µ)
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
- ‚úÖ –õ–æ–≥–∏—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ linter

### **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è–º–∏
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ POI
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É –≤–æ–∑–≤—Ä–∞—Ç–∞

### **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `Scripts/LocationSelector.gd` (3 —Ñ—É–Ω–∫—Ü–∏–∏)
- ‚úÖ `SOUL_WELL_CLICKABLE_POI.md` (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

---

**–ê–≤—Ç–æ—Ä:** Claude AI Assistant  
**–î–∞—Ç–∞:** 2024  
**–í–µ—Ä—Å–∏—è:** beta 0.6.11

