# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ "–ñ–∏–≤—É—á–µ—Å—Ç–∏"

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–∞—Å—Å–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å "–ñ–∏–≤—É—á–µ—Å—Ç—å" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è, —Ö–æ—Ç—è –∏–≥—Ä–æ–∫ –µ—ë –Ω–µ –≤—ã–±–∏—Ä–∞–ª.

## üîç –ü—Ä–∏—á–∏–Ω–∞:
–§—É–Ω–∫—Ü–∏—è `sync_active_passives_with_bonuses()` –ø—Ä–æ–≤–µ—Ä—è–ª–∞ `max_hp >= 150` –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ "–ñ–∏–≤—É—á–µ—Å—Ç–∏", –Ω–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:

1. **–ë–∞–∑–æ–≤–æ–µ HP** = 100
2. **–ë–æ–Ω—É—Å –æ—Ç –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏** = 5 * 10 = 50
3. **–ë–æ–Ω—É—Å –æ—Ç —É—Ä–æ–≤–Ω—è** = 1 * 10 = 10
4. **–ò—Ç–æ–≥–æ** = 100 + 50 + 10 = **160 HP**

–ü–æ—Å–∫–æ–ª—å–∫—É 160 >= 150, —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å "–ñ–∏–≤—É—á–µ—Å—Ç—å" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∞—Å—å!

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ HP –¥–ª—è "–ñ–∏–≤—É—á–µ—Å—Ç–∏":**

```gdscript
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–æ–Ω—É—Å HP —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω —Ç–æ—á–Ω–æ –æ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ "–ñ–∏–≤—É—á–µ—Å—Ç—å" (+50 HP)
# –ë–∞–∑–æ–≤–æ–µ HP = 100, –±–æ–Ω—É—Å –æ—Ç "–ñ–∏–≤—É—á–µ—Å—Ç—å" = +50, –∏—Ç–æ–≥–æ = 150
# –ù–û! –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ HP –±–æ–ª—å—à–µ –±–∞–∑–æ–≤–æ–≥–æ + –±–æ–Ω—É—Å–æ–≤ –æ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
# –ë–∞–∑–æ–≤–æ–µ HP = 100, –±–æ–Ω—É—Å –æ—Ç –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏ = vitality * 10, –±–æ–Ω—É—Å –æ—Ç —É—Ä–æ–≤–Ω—è = level * 10
# –ï—Å–ª–∏ HP –±–æ–ª—å—à–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ 50, –∑–Ω–∞—á–∏—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ "–ñ–∏–≤—É—á–µ—Å—Ç—å"
var expected_hp = base_hp + (vitality * 10) + (level * 10)
if max_hp >= expected_hp + 50 and "player_vitality" not in active_passives:
    active_passives.append("player_vitality")
    print("–ù–∞–π–¥–µ–Ω –±–æ–Ω—É—Å HP –æ—Ç –ñ–∏–≤—É—á–µ—Å—Ç–∏: ", max_hp, " (–æ–∂–∏–¥–∞–ª–æ—Å—å: ", expected_hp, ") - –¥–æ–±–∞–≤–ª—è–µ–º player_vitality")
```

### **–¢–∞–∫–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —É—Å–ª–æ–≤–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**

```gdscript
"player_vitality":
    var expected_hp = base_hp + (vitality * 10) + (level * 10)
    if max_hp < expected_hp + 50:
        should_remove = true
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### **–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:**

#### **1. –†–∞—Å—á–µ—Ç HP:**
```
–ë–∞–∑–æ–≤–æ–µ HP: 100
–ë–æ–Ω—É—Å –æ—Ç –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏ (5): 5 * 10 = 50
–ë–æ–Ω—É—Å –æ—Ç —É—Ä–æ–≤–Ω—è (1): 1 * 10 = 10
–û–∂–∏–¥–∞–µ–º–æ–µ HP: 100 + 50 + 10 = 160
```

#### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ "–ñ–∏–≤—É—á–µ—Å—Ç–∏":**
```
max_hp >= expected_hp + 50
160 >= 160 + 50
160 >= 210
FALSE ‚Üê "–ñ–∏–≤—É—á–µ—Å—Ç—å" –ù–ï –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
```

#### **3. –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ "–ñ–∏–≤—É—á–µ—Å—Ç–∏" –≤—Ä—É—á–Ω—É—é:**
```
max_hp += 50  # +50 HP –æ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
max_hp = 160 + 50 = 210

–ü—Ä–æ–≤–µ—Ä–∫–∞: 210 >= 160 + 50 = 210
TRUE ‚Üê "–ñ–∏–≤—É—á–µ—Å—Ç—å" –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω–∞—è
```

## üîß –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

### **1. –§—É–Ω–∫—Ü–∏—è `sync_active_passives_with_bonuses()` —Ç–µ–ø–µ—Ä—å:**
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–µ HP** - –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑–æ–≤—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–º–µ–Ω–Ω–æ –±–æ–Ω—É—Å +50 HP** - –æ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ "–ñ–∏–≤—É—á–µ—Å—Ç—å"
- ‚úÖ **–ù–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø—Ä–∏ —Ä—É—á–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### **2. –ü–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã:**
1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞** - `max_hp = 160`, –Ω–æ "–ñ–∏–≤—É—á–µ—Å—Ç—å" –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
2. **–†—É—á–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è** - `max_hp = 210`, "–ñ–∏–≤—É—á–µ—Å—Ç—å" –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω–∞—è
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–µ–Ω—é
4. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –±–æ—é** - –±–æ–Ω—É—Å +50 HP —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### **3. –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π:**
- ‚úÖ **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞** - —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ç–æ—á–Ω–æ–º —Ä–∞—Å—á–µ—Ç–µ
- ‚úÖ **–ü—Ä–∏ —Å–±—Ä–æ—Å–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫** - –≤—Å–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è
- ‚úÖ **–¢–æ–ª—å–∫–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è** - —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –≤ –º–µ–Ω—é

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –ø–∞—Å—Å–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å "–ñ–∏–≤—É—á–µ—Å—Ç—å":
- ‚úÖ **–ù–ï –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- ‚úÖ **–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏** - –≤ –º–µ–Ω—é
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω–∞—è** - –ø—Ä–∏ —Ä—É—á–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å** - –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–µ–Ω—é
- ‚úÖ **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –±–æ—é** - –±–æ–Ω—É—Å +50 HP —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –º–µ–∂–¥—É –º–µ–Ω—é –∏ –±–æ–µ–º

**–¢–µ–ø–µ—Ä—å "–ñ–∏–≤—É—á–µ—Å—Ç—å" –Ω–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞!** üéØ‚ú®
