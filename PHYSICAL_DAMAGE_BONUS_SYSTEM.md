# –°–∏—Å—Ç–µ–º–∞ –±–æ–Ω—É—Å–æ–≤ –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É –¥–ª—è –≤—Ä–∞–≥–æ–≤

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤ –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É –¥–ª—è –≤—Ä–∞–≥–æ–≤, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π **P** —É –∏–≥—Ä–æ–∫–∞. –í—Å–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –¥–∞—é—â–∏–µ –±–æ–Ω—É—Å—ã –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É, –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `physical_damage_bonus` –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ **–≤—Å–µ–º** —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º –∞—Ç–∞–∫–∞–º.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è P –¥–ª—è –≤—Ä–∞–≥–æ–≤:**
```gdscript
# –í body.gd
var physical_damage_bonus: int = 0  # –û–±—â–∏–π –±–æ–Ω—É—Å –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É (P)
```

### **–§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–Ω–∞:**
```gdscript
func get_physical_damage() -> int:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Ä–æ–Ω –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –∞—Ç–∞–∫ (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω + –±–æ–Ω—É—Å –æ—Ç –°–∏–ª—ã + –±–æ–Ω—É—Å—ã –æ—Ç –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π)"""
    var strength_bonus = strength  # 1 —É—Ä–æ–Ω –∑–∞ –æ—á–∫–æ –°–∏–ª—ã
    var base_damage = attack_power + strength_bonus + physical_damage_bonus
    
    # –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–Ω—É—Å "–ë–æ–µ—Ü" –∫ –∏—Ç–æ–≥–æ–≤–æ–º—É —É—Ä–æ–Ω—É
    var fighter_bonus = 0
    for ability in passive_abilities:
        if ability.id == "fighter":
            var ability_level = ability_levels.get(ability.id, 1)
            var fighter_percentage = ability.get_value_for_level(ability_level)
            fighter_bonus = int(base_damage * (fighter_percentage / 100.0))
            break
    
    return base_damage + fighter_bonus
```

### **–§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–∞–º–∏:**
```gdscript
func add_physical_damage_bonus(bonus: int):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –±–æ–Ω—É—Å –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É"""
    physical_damage_bonus += bonus

func remove_physical_damage_bonus(bonus: int):
    """–£–¥–∞–ª—è–µ—Ç –±–æ–Ω—É—Å –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É"""
    physical_damage_bonus -= bonus
```

## üéØ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º

### **–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `get_physical_damage()`:**
- **"–î–≤–æ–π–Ω–æ–π —É–¥–∞—Ä"** - –∫–∞–∂–¥—ã–π —É–¥–∞—Ä –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å
- **"–°—É–µ—Ç–ª–∏–≤–æ—Å—Ç—å"** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞—Ç–∞–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å
- **"–ë—ã—Å—Ç—Ä—ã–π —É–¥–∞—Ä"** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞—Ç–∞–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å
- **–ë–∞–∑–æ–≤—ã–µ –∞—Ç–∞–∫–∏** - –ø–æ–ª—É—á–∞—é—Ç –±–æ–Ω—É—Å
- **–õ—é–±—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** - –ø–æ–ª—É—á–∞—é—Ç –±–æ–Ω—É—Å

### **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```gdscript
# –í battle_manager.gd –¥–ª—è "–î–≤–æ–π–Ω–æ–≥–æ —É–¥–∞—Ä–∞"
var damage_per_hit = result.get("damage_per_hit", damage / 2.0)
# damage_per_hit —É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –±–æ–Ω—É—Å—ã –æ—Ç physical_damage_bonus

# –í battle_manager.gd –¥–ª—è "–°—É–µ—Ç–ª–∏–≤–æ—Å—Ç–∏"
var base_damage: int
if attacker.has_method("get_physical_damage"):
    base_damage = attacker.get_physical_damage()  # –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –±–æ–Ω—É—Å—ã
```

## üî• –ü–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –¥–∞—é—â–∏–µ –±–æ–Ω—É—Å—ã

### **"–Ø—Ä–æ—Å—Ç—å" (Rage):**
- **–¢—Ä–∏–≥–≥–µ—Ä**: `ON_DAMAGE_TAKEN` (–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞)
- **–≠—Ñ—Ñ–µ–∫—Ç**: +1/+2/+3 –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É –Ω–∞ 3 —Ä–∞—É–Ω–¥–∞
- **–°—Ç–∞–∫–∞–µ—Ç—Å—è**: –î–∞, –±–æ–Ω—É—Å—ã –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ß–µ—Ä–µ–∑ `add_physical_damage_bonus()`

### **"–ú–∞—Å—Å–∏–≤–Ω—ã–π" (Massive):**
- **–¢—Ä–∏–≥–≥–µ—Ä**: `PASSIVE` (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∞–∫—Ç–∏–≤–Ω–∞—è)
- **–≠—Ñ—Ñ–µ–∫—Ç**: +2%/+4%/+6% –æ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ HP –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ß–µ—Ä–µ–∑ `add_physical_damage_bonus()`

### **"–ë–æ–µ—Ü" (Fighter):**
- **–¢—Ä–∏–≥–≥–µ—Ä**: `PASSIVE` (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∞–∫—Ç–∏–≤–Ω–∞—è)
- **–≠—Ñ—Ñ–µ–∫—Ç**: +15%/+25%/+35% –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ß–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–π –±–æ–Ω—É—Å –≤ `get_physical_damage()`

## ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

### **–≠—Ñ—Ñ–µ–∫—Ç "rage_bonus":**
```gdscript
# –°–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ "–Ø—Ä–æ—Å—Ç–∏"
owner.add_effect("rage_bonus", {
    "damage_bonus": current_value,
    "duration": 3,
    "remaining_turns": 3
})
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞:**
```gdscript
# –í process_effects()
elif effect_id == "rage_bonus":
    var damage_bonus = effect.get("damage_bonus", 0)
    if damage_bonus > 0 and has_method("remove_physical_damage_bonus"):
        remove_physical_damage_bonus(damage_bonus)
        print(display_name, " —Ç–µ—Ä—è–µ—Ç –±–æ–Ω—É—Å –Ø—Ä–æ—Å—Ç–∏: -", damage_bonus, " –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É")
```

## üìä –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### **–í—Ä–∞–≥ —Å "–Ø—Ä–æ—Å—Ç—å—é" 1 —É—Ä–æ–≤–Ω—è:**
1. **–ü–æ–ª—É—á–∞–µ—Ç —É—Ä–æ–Ω** ‚Üí "–Ø—Ä–æ—Å—Ç—å" —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
2. **–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è +1 –∫ `physical_damage_bonus`**
3. **–°–ª–µ–¥—É—é—â–∏–µ –∞—Ç–∞–∫–∏** –ø–æ–ª—É—á–∞—é—Ç +1 —É—Ä–æ–Ω–∞:
   - –ë–∞–∑–æ–≤—ã–µ –∞—Ç–∞–∫–∏: +1 —É—Ä–æ–Ω–∞
   - "–î–≤–æ–π–Ω–æ–π —É–¥–∞—Ä": –∫–∞–∂–¥—ã–π —É–¥–∞—Ä +1 —É—Ä–æ–Ω–∞
   - "–°—É–µ—Ç–ª–∏–≤–æ—Å—Ç—å": –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞—Ç–∞–∫–∞ +1 —É—Ä–æ–Ω–∞

### **–í—Ä–∞–≥ —Å "–Ø—Ä–æ—Å—Ç—å—é" 3 —É—Ä–æ–≤–Ω—è:**
1. **–ü–æ–ª—É—á–∞–µ—Ç —É—Ä–æ–Ω** ‚Üí "–Ø—Ä–æ—Å—Ç—å" —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
2. **–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è +3 –∫ `physical_damage_bonus`**
3. **–°–ª–µ–¥—É—é—â–∏–µ –∞—Ç–∞–∫–∏** –ø–æ–ª—É—á–∞—é—Ç +3 —É—Ä–æ–Ω–∞
4. **–ß–µ—Ä–µ–∑ 3 —Ä–∞—É–Ω–¥–∞** –±–æ–Ω—É—Å —É–¥–∞–ª—è–µ—Ç—Å—è

### **–í—Ä–∞–≥ —Å "–ú–∞—Å—Å–∏–≤–Ω—ã–º" –∏ "–Ø—Ä–æ—Å—Ç—å—é":**
- **"–ú–∞—Å—Å–∏–≤–Ω—ã–π"**: +6 —É—Ä–æ–Ω–∞ (6% –æ—Ç 100 HP)
- **"–Ø—Ä–æ—Å—Ç—å"**: +3 —É—Ä–æ–Ω–∞ (3 —É—Ä–æ–≤–µ–Ω—å)
- **–ò—Ç–æ–≥–æ–≤—ã–π –±–æ–Ω—É—Å**: +9 –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É

## üéÆ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

1. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –í—Å–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –±–æ–Ω—É—Å—ã
2. **–°—Ç–∞–∫–∞–µ–º–æ—Å—Ç—å**: –ë–æ–Ω—É—Å—ã –æ—Ç —Ä–∞–∑–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
3. **–í—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å**: –≠—Ñ—Ñ–µ–∫—Ç—ã –∏–º–µ—é—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
4. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –±–æ–Ω—É—Å—ã

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –±–∞–ª–∞–Ω—Å

### **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –±–æ–Ω—É—Å–æ–≤:**
```gdscript
# –í –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
func execute_ability(owner: Node, _target: Node = null, _context: Dictionary = {}) -> Dictionary:
    var bonus_value = get_value_for_level(current_level)
    if owner.has_method("add_physical_damage_bonus"):
        owner.add_physical_damage_bonus(bonus_value)
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–æ–≤:**
```gdscript
# –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
print("–¢–µ–∫—É—â–∏–π –±–æ–Ω—É—Å –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É —É—Ä–æ–Ω—É:", physical_damage_bonus)
print("–ò—Ç–æ–≥–æ–≤—ã–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω:", get_physical_damage())
```

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### **–ü—Ä–æ–±–ª–µ–º–∞**: –ë–æ–Ω—É—Å—ã –æ—Ç "–Ø—Ä–æ—Å—Ç–∏" –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å –∫ "–î–≤–æ–π–Ω–æ–º—É —É–¥–∞—Ä—É" –∏ "–°—É–µ—Ç–ª–∏–≤–æ—Å—Ç–∏"
### **–ü—Ä–∏—á–∏–Ω–∞**: "–Ø—Ä–æ—Å—Ç—å" —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –ø–æ—Å–ª–µ –Ω–∞–Ω–µ—Å–µ–Ω–∏—è —É—Ä–æ–Ω–∞, –∞ –Ω–µ –¥–æ –Ω–µ–≥–æ
### **–†–µ—à–µ–Ω–∏–µ**: 
1. –ë–æ–Ω—É—Å—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ `physical_damage_bonus`
2. `get_physical_damage()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
3. –í—Å–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `get_physical_damage()`

---

**–ê–≤—Ç–æ—Ä**: Claude AI Assistant  
**–î–∞—Ç–∞**: 2024  
**–í–µ—Ä—Å–∏—è**: 1.0
