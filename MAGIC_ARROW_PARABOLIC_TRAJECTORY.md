# –ü–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–µ–ª

## üéØ –ò–∑–º–µ–Ω–µ–Ω–∏—è:

–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–µ–ª—ã —Ç–µ–ø–µ—Ä—å –ª–µ—Ç—è—Ç **–ø–æ –ø–∞—Ä–∞–±–æ–ª–µ**, –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–µ —Å—Ç—Ä–µ–ª—ã, –∞ –Ω–µ –≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –ø–æ–ª—ë—Ç–µ.

---

## üèπ –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

### **1. –£–±—Ä–∞–Ω–æ –≤—Ä–∞—â–µ–Ω–∏–µ**

**–ë—ã–ª–æ:**
```gdscript
@export var rotation_speed: float = 10.0  # –°–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è

# –í _process():
rotation += rotation_speed * delta  # –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ
```

**–°—Ç–∞–ª–æ:**
```gdscript
@export var arc_height: float = 50.0  # –í—ã—Å–æ—Ç–∞ –ø–∞—Ä–∞–±–æ–ª—ã

# –°—Ç—Ä–µ–ª–∞ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–≤–∏–∂–µ–Ω–∏—è
```

---

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è**

**–§–æ—Ä–º—É–ª–∞ –ø–∞—Ä–∞–±–æ–ª—ã:**
```gdscript
# –í—ã—Å–æ—Ç–∞ –¥—É–≥–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –ø–æ–ª—ë—Ç–∞ (progress = 0.5)
var arc_offset = sin(progress * PI) * arc_height

# –°–º–µ—â–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –≤–≤–µ—Ä—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä–∞–±–æ–ª—ã
global_position = linear_position + Vector2(0, -arc_offset)
```

**–ì—Ä–∞—Ñ–∏–∫ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏:**
```
     ^
     |        ‚ï±‚Äæ‚Äæ‚Äæ‚ï≤
     |       ‚ï±     ‚ï≤
     |      ‚ï±       ‚ï≤
     |_____‚ï±_________‚ï≤_____>
   start   mid      end
```

- –í –Ω–∞—á–∞–ª–µ: `sin(0) = 0` ‚Üí —Å—Ç—Ä–µ–ª–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç–∞—Ä—Ç–∞
- –í —Å–µ—Ä–µ–¥–∏–Ω–µ: `sin(œÄ/2) = 1` ‚Üí —Å—Ç—Ä–µ–ª–∞ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≤—ã—Å–æ—Ç–µ
- –í –∫–æ–Ω—Ü–µ: `sin(œÄ) = 0` ‚Üí —Å—Ç—Ä–µ–ª–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ü–µ–ª–∏

---

### **3. –ü–æ–≤–æ—Ä–æ—Ç –ø–æ –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π –∫ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏**

–°—Ç—Ä–µ–ª–∞ —Ç–µ–ø–µ—Ä—å **–ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–≤–∏–∂–µ–Ω–∏—è**, –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∞—è —Å—Ç—Ä–µ–ª–∞ –≤ –ø–æ–ª—ë—Ç–µ:

```gdscript
# –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é –ø–∞—Ä–∞–±–æ–ª—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É–≥–ª–∞
var arc_derivative = cos(progress * PI) * PI * arc_height / max_flight_time

# –£–≥–æ–ª –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π –∫ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
var tangent_angle = atan2(
    (target_position.y - start_position.y) / max_flight_time - arc_derivative,
    (target_position.x - start_position.x) / max_flight_time
)

rotation = tangent_angle
```

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –í –Ω–∞—á–∞–ª–µ –ø–æ–ª—ë—Ç–∞: —Å—Ç—Ä–µ–ª–∞ —Å–º–æ—Ç—Ä–∏—Ç **–≤–≤–µ—Ä—Ö-–≤–ø–µ—Ä—ë–¥** (–Ω–∞—á–∞–ª–æ –¥—É–≥–∏)
- –í —Å–µ—Ä–µ–¥–∏–Ω–µ: —Å—Ç—Ä–µ–ª–∞ –ø–æ—á—Ç–∏ **–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞** (–≤–µ—Ä—à–∏–Ω–∞ –¥—É–≥–∏)
- –í –∫–æ–Ω—Ü–µ: —Å—Ç—Ä–µ–ª–∞ —Å–º–æ—Ç—Ä–∏—Ç **–≤–Ω–∏–∑-–≤–ø–µ—Ä—ë–¥** (–ø–∞–¥–µ–Ω–∏–µ)

---

## üìê –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø–∞—Ä–∞–±–æ–ª—ã:

### **–§—É–Ω–∫—Ü–∏—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏:**
```
y(t) = linear_y(t) - sin(t * œÄ) * arc_height
```

–≥–¥–µ:
- `t` ‚àà [0, 1] - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—ë—Ç–∞
- `linear_y(t)` - –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
- `sin(t * œÄ)` - –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `arc_height` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –¥—É–≥–∏

### **–ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è (–¥–ª—è —É–≥–ª–∞):**
```
dy/dt = d(linear_y)/dt - cos(t * œÄ) * œÄ * arc_height
```

–ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∫–ª–æ–Ω —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –≤ –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–≤–æ—Ä–æ—Ç–∞ —Å—Ç—Ä–µ–ª—ã.

---

## üéÆ –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

### **–ë—ã–ª–æ (–≤—Ä–∞—â–µ–Ω–∏–µ):**
```
  üîÑ      üîÑ      üîÑ      üîÑ
‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚Üí
‚îÇ      ‚îÇ      ‚îÇ      ‚îÇ
—Å—Ç—Ä–µ–ª–∞ –∫—Ä—É—Ç–∏—Ç—Å—è –∫–∞–∫ –ø—Ä–æ–ø–µ–ª–ª–µ—Ä
```

### **–°—Ç–∞–ª–æ (–ø–∞—Ä–∞–±–æ–ª–∞):**
```
        ‚ï±‚Äæ‚Äæ‚Äæüèπ
   ‚ï±‚Äæ‚Äæ‚Äæ‚ï±     ‚ï≤
 üèπ‚Äæ          ‚ï≤
              ‚ï≤üèπ
—Å—Ç—Ä–µ–ª–∞ –ª–µ—Ç–∏—Ç –ø–æ –¥—É–≥–µ, –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∞—è
```

---

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—ã—Å–æ—Ç—ã –¥—É–≥–∏:

–í `MagicArrowProjectile.gd` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä:

```gdscript
@export var arc_height: float = 50.0  # –í—ã—Å–æ—Ç–∞ –ø–∞—Ä–∞–±–æ–ª—ã –≤ –ø–∏–∫—Å–µ–ª—è—Ö
```

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
- `arc_height = 30.0` - **–Ω–∏–∑–∫–∞—è** –¥—É–≥–∞ (–±—ã—Å—Ç—Ä—ã–π –≤—ã—Å—Ç—Ä–µ–ª)
- `arc_height = 50.0` - **—Å—Ä–µ–¥–Ω—è—è** –¥—É–≥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚úÖ
- `arc_height = 80.0` - **–≤—ã—Å–æ–∫–∞—è** –¥—É–≥–∞ (–Ω–∞–≤–µ—Å–Ω–æ–π –≤—ã—Å—Ç—Ä–µ–ª)
- `arc_height = 0.0` - **–ø—Ä—è–º–∞—è** –ª–∏–Ω–∏—è (–±–µ–∑ –¥—É–≥–∏)

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- ‚ú® **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Ñ–∏–∑–∏–∫–∞** - —Å—Ç—Ä–µ–ª—ã –ª–µ—Ç—è—Ç –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–µ
- üéØ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è** - —Å—Ç—Ä–µ–ª–∞ –≤—Å–µ–≥–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–≤–∏–∂–µ–Ω–∏—è
- üëÅÔ∏è **–õ—É—á—à–µ —á–∏—Ç–∞–µ—Ç—Å—è** - –ª–µ–≥—á–µ –æ—Ç—Å–ª–µ–¥–∏—Ç—å —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é
- üé® **–ö—Ä–∞—Å–∏–≤–µ–µ** - –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –¥—É–≥–∞ –≤–º–µ—Å—Ç–æ –≤—Ä–∞—â–µ–Ω–∏—è
- ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤—ã—Å–æ—Ç—É –¥—É–≥–∏

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### **–ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è sin(progress * PI)?**

- `sin(0) = 0` ‚Üí –Ω–∞—á–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç–∞—Ä—Ç–∞
- `sin(œÄ/2) = 1` ‚Üí —Å–µ—Ä–µ–¥–∏–Ω–∞ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≤—ã—Å–æ—Ç–µ
- `sin(œÄ) = 0` ‚Üí –∫–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ü–µ–ª–∏

–≠—Ç–æ —Å–æ–∑–¥–∞—ë—Ç —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—É—é –ø–∞—Ä–∞–±–æ–ª—É –æ—Ç 0 –¥–æ 0 —Å –º–∞–∫—Å–∏–º—É–º–æ–º –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ.

### **–ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è –¥–ª—è —É–≥–ª–∞:**

–ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è `cos(progress * PI) * PI` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã:
- –í –Ω–∞—á–∞–ª–µ: `cos(0) = 1` ‚Üí —Å—Ç—Ä–µ–ª–∞ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ
- –í —Å–µ—Ä–µ–¥–∏–Ω–µ: `cos(œÄ/2) = 0` ‚Üí –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–æ–ª—ë—Ç
- –í –∫–æ–Ω—Ü–µ: `cos(œÄ) = -1` ‚Üí —Å—Ç—Ä–µ–ª–∞ –ø–∞–¥–∞–µ—Ç –±—ã—Å—Ç—Ä–æ

---

## üîß –ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

**–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `_process()`:**

```gdscript
# –õ–∏–Ω–µ–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (–ø—Ä—è–º–∞—è –æ—Ç —Å—Ç–∞—Ä—Ç–∞ –∫ —Ü–µ–ª–∏)
var linear_position = start_position.lerp(target_position, eased_progress)

# –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫—É—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É
var arc_offset = sin(progress * PI) * arc_height
global_position = linear_position + Vector2(0, -arc_offset)

# –ü–æ–≤–æ—Ä–æ—Ç –ø–æ –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π
var arc_derivative = cos(progress * PI) * PI * arc_height / max_flight_time
var tangent_angle = atan2(
    (target_position.y - start_position.y) / max_flight_time - arc_derivative,
    (target_position.x - start_position.x) / max_flight_time
)
rotation = tangent_angle
```

---

## ‚ú® –ò—Ç–æ–≥–æ:

–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–µ–ª—ã —Ç–µ–ø–µ—Ä—å:
- üèπ –õ–µ—Ç—è—Ç **–ø–æ –∫—Ä–∞—Å–∏–≤–æ–π –ø–∞—Ä–∞–±–æ–ª–µ**
- üéØ –ü–æ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è **–ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–≤–∏–∂–µ–Ω–∏—è**
- ‚ùå **–ù–ï –≤—Ä–∞—â–∞—é—Ç—Å—è** –∫–∞–∫ –ø—Ä–æ–ø–µ–ª–ª–µ—Ä
- ‚úÖ –í—ã–≥–ª—è–¥—è—Ç **—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ** –∏ **–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ**

**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üöÄ

