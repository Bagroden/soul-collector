# –≠—Ñ—Ñ–µ–∫—Ç –±–µ–ª–æ–π –≤—Å–ø—ã—à–∫–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞

## üé® –û–±–∑–æ—Ä

–í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –±–µ–ª—ã–º —Ü–≤–µ—Ç–æ–º –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞ –¥–ª—è –∏–≥—Ä–æ–∫–∞ –∏ –≤—Ä–∞–≥–æ–≤. –°–æ–∑–¥–∞–µ—Ç —á–µ—Ç–∫—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ –Ω–∞–Ω–µ—Å–µ–Ω–Ω–æ–º —É—Ä–æ–Ω–µ.

## ‚ú® –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç:
1. **–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ:** –ü–µ—Ä—Å–æ–Ω–∞–∂ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ø–†–ö–û-–±–µ–ª—ã–º (`Color(5.0, 5.0, 5.0, 1.0)`) —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–≤–µ—á–µ–Ω–∏—è
2. **–ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ:** –ó–∞ 0.15 —Å–µ–∫—É–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É —Ü–≤–µ—Ç—É

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

**–§—É–Ω–∫—Ü–∏—è:** `_flash_white(character: Node)`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```gdscript
1. –ù–∞—Ö–æ–¥–∏—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π —É–∑–µ–ª (Visual/AnimatedSprite2D/Sprite2D)
2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π modulate
3. –°–æ–∑–¥–∞–µ—Ç Tween –∞–Ω–∏–º–∞—Ü–∏—é:
   - –®–∞–≥ 1: modulate = Color(5.0, 5.0, 5.0, 1.0) –∑–∞ 0.0 —Å–µ–∫ (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
   - –®–∞–≥ 2: modulate = original_modulate –∑–∞ 0.15 —Å–µ–∫ (–ø–ª–∞–≤–Ω–æ)
```

## üéØ –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

### 1. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞ –∏–≥—Ä–æ–∫–æ–º

**–ú–µ—Å—Ç–æ:** `_on_player_attacked(amount)` –≤ `battle_manager.gd`

```gdscript
# –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞ (–±–µ–ª–∞—è –≤—Å–ø—ã—à–∫–∞)
if player_node and amount > 0:
    _flash_white(player_node)
```

**–¢—Ä–∏–≥–≥–µ—Ä:**
- –õ—é–±–æ–π —É—Ä–æ–Ω –æ—Ç –≤—Ä–∞–≥–∞ (–±–∞–∑–æ–≤–∞—è –∞—Ç–∞–∫–∞, —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)
- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ `amount > 0`

### 2. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞ –≤—Ä–∞–≥–æ–º

**–ú–µ—Å—Ç–æ:** `_on_enemy_attacked(amount)` –≤ `battle_manager.gd`

```gdscript
# –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞ (–±–µ–ª–∞—è –≤—Å–ø—ã—à–∫–∞)
if enemy_node and amount > 0:
    _flash_white(enemy_node)
```

**–¢—Ä–∏–≥–≥–µ—Ä:**
- –õ—é–±–æ–π —É—Ä–æ–Ω –æ—Ç –∏–≥—Ä–æ–∫–∞ (–±–∞–∑–æ–≤–∞—è –∞—Ç–∞–∫–∞, —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)
- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ `amount > 0`

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —ç—Ñ—Ñ–µ–∫—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| –¶–≤–µ—Ç –≤—Å–ø—ã—à–∫–∏ | `Color(5.0, 5.0, 5.0, 1.0)` | –û—á–µ–Ω—å —è—Ä–∫–∏–π –±–µ–ª—ã–π —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–≤–µ—á–µ–Ω–∏—è |
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 0.15 —Å–µ–∫—É–Ω–¥—ã | –í—Ä–µ–º—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É —Ü–≤–µ—Ç—É |
| –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è | Linear (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Tween) | –ü–ª–∞–≤–Ω–æ–µ –ª–∏–Ω–µ–π–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ |

## üéÆ –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç

```
–í—Ä–µ–º—è:  0.00 —Å–µ–∫          0.15 —Å–µ–∫
        ‚îÇ                 ‚îÇ
–¶–≤–µ—Ç:   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñë‚ñë‚ñë‚ñë‚ñë
        –Ø—Ä–∫–∏–π –±–µ–ª—ã–π (5.0) –û—Ä–∏–≥–∏–Ω–∞–ª (1.0)
        ‚òÄÔ∏è –°–í–ï–ß–ï–ù–ò–ï        
        
        ^                 ^
        ‚îÇ                 ‚îÇ
    –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ      –ü–ª–∞–≤–Ω–æ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –≤—Å–ø—ã—à–∫–∞** - –ø–µ—Ä—Å–æ–Ω–∞–∂ –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è –±–µ–ª—ã–º
- üåü **–ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ** - –∑–∞ 0.15 —Å–µ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –Ω–æ—Ä–º–µ
- üëÅÔ∏è **–ß–µ—Ç–∫–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –∏–≥—Ä–æ–∫ —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç, –∫—Ç–æ –ø–æ–ª—É—á–∏–ª —É—Ä–æ–Ω

## üìã –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —É–∑–ª–æ–≤:
- ‚úÖ `AnimatedSprite2D` (—Å —É–∑–ª–æ–º `Visual`)
- ‚úÖ `Sprite2D` (—Å —É–∑–ª–æ–º `Visual`)
- ‚úÖ –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `AnimatedSprite2D` –∏–ª–∏ `Sprite2D`

### –ü–æ–∏—Å–∫ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —É–∑–ª–∞:
1. –°–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª `Visual`
2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∞–º `character` –Ω–∞ —Ç–∏–ø `AnimatedSprite2D`/`Sprite2D`
3. –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è (–±–µ–∑ –æ—à–∏–±–∫–∏)

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ –∑–≤—É–∫–æ–º:
```gdscript
# –ó–≤—É–∫ –∏ –≤—Å–ø—ã—à–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
SoundManager.play_sound("Hit1", -5.0)  # –ó–≤—É–∫ —É–¥–∞—Ä–∞
_flash_white(player_node)               # –ë–µ–ª–∞—è –≤—Å–ø—ã—à–∫–∞
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —á–∏—Å–ª–∞–º–∏ —É—Ä–æ–Ω–∞:
- –í—Å–ø—ã—à–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** —Å –ø–æ—è–≤–ª–µ–Ω–∏–µ–º —á–∏—Å–µ–ª —É—Ä–æ–Ω–∞
- –£—Å–∏–ª–∏–≤–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ñ–∏–¥–±–µ–∫

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏ –≤—Å–ø—ã—à–∫–∏:
```gdscript
# –¢–µ–∫—É—â–µ–µ: Color(5.0, 5.0, 5.0, 1.0) - –æ—á–µ–Ω—å —è—Ä–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ
# –ï—â–µ —è—Ä—á–µ: Color(8.0, 8.0, 8.0, 1.0) - —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ —è—Ä–∫–æ–µ
# –ú–µ–Ω–µ–µ —è—Ä–∫–æ–µ: Color(3.0, 3.0, 3.0, 1.0) - —É–º–µ—Ä–µ–Ω–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ
# –ë–∞–∑–æ–≤–æ–µ: Color(2.0, 2.0, 2.0, 1.0) - –ª–µ–≥–∫–æ–µ –æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
```gdscript
# –¢–µ–∫—É—â–µ–µ: 0.15 —Å–µ–∫—É–Ω–¥—ã
# –ë—ã—Å—Ç—Ä–µ–µ: 0.1 —Å–µ–∫—É–Ω–¥—ã
# –ú–µ–¥–ª–µ–Ω–Ω–µ–µ: 0.2 —Å–µ–∫—É–Ω–¥—ã
tween.tween_property(visual_node, "modulate", original_modulate, 0.2)
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:
```gdscript
# –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä—è—Å–∫—É –∏–ª–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
tween.parallel().tween_property(visual_node, "scale", Vector2(1.1, 1.1), 0.05)
tween.tween_property(visual_node, "scale", Vector2.ONE, 0.1)
```

## üêõ Troubleshooting

### –í—Å–ø—ã—à–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∏–∑—É–∞–ª—å–Ω—ã–π —É–∑–µ–ª –Ω–µ –Ω–∞–π–¥–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –µ—Å—Ç—å —É–∑–µ–ª `Visual`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∏–ø —É–∑–ª–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `AnimatedSprite2D` –∏–ª–∏ `Sprite2D`)
3. –î–æ–±–∞–≤—å—Ç–µ debug –ª–æ–≥ –≤ `_flash_white()`:
```gdscript
if not visual_node:
    print("–û–®–ò–ë–ö–ê: –í–∏–∑—É–∞–ª—å–Ω—ã–π —É–∑–µ–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è ", character.name)
    return
```

### –í—Å–ø—ã—à–∫–∞ —Å–ª–∏—à–∫–æ–º —è—Ä–∫–∞—è/—Ç—É—Å–∫–ª–∞—è:

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ `Color(5.0, 5.0, 5.0, 1.0)`:
- –ü–µ—Ä–≤—ã–µ —Ç—Ä–∏ —á–∏—Å–ª–∞ - RGB (—É–≤–µ–ª–∏—á—å—Ç–µ –¥–ª—è —è—Ä–∫–æ—Å—Ç–∏, —É–º–µ–Ω—å—à–∏—Ç–µ –¥–ª—è —Ç—É—Å–∫–ª–æ—Å—Ç–∏)
- –ß–µ—Ç–≤–µ—Ä—Ç–æ–µ —á–∏—Å–ª–æ - alpha (–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, –æ–±—ã—á–Ω–æ 1.0)
- –ó–Ω–∞—á–µ–Ω–∏—è –≤—ã—à–µ 1.0 —Å–æ–∑–¥–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è

### –í—Å–ø—ã—à–∫–∞ –º–µ—à–∞–µ—Ç –¥—Ä—É–≥–∏–º —ç—Ñ—Ñ–µ–∫—Ç–∞–º:

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥—Ä—É–≥–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–µ –º–µ–Ω—è—é—Ç `modulate` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `parallel()` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π.

---

**–î–∞—Ç–∞:** 18 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–§–∞–π–ª:** `Scripts/Battle/battle_manager.gd`  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

