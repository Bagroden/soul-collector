# –°–∏—Å—Ç–µ–º–∞ –∏–∑—É—á–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –≤—Ä–∞–≥–æ–≤

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ –∏–∑—É—á–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–∫—É –∏–∑—É—á–∞—Ç—å –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Ä–∞–≥–æ–≤, –ø–æ–±–µ–∂–¥–∞—è –∏—Ö –≤ –±–æ—é. –ö–∞–∂–¥—ã–π —Ç–∏–ø –≤—Ä–∞–≥–∞ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Ä–µ–¥–∫–æ—Å—Ç—å—é –¥–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–∑—É—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `Scripts/Systems/AbilityLearningSystem.gd` - –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–∑—É—á–µ–Ω–∏—è
- `Scripts/UI/AbilityLearningWindow.gd` - UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- `Scenes/UI/AbilityLearningWindow.tscn` - –°—Ü–µ–Ω–∞ –æ–∫–Ω–∞ –∏–∑—É—á–µ–Ω–∏—è
- `Scripts/Battle/battle_manager.gd` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- `Scripts/UI/CharacterPreparation.gd` - –ö–Ω–æ–ø–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–µ

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

### **–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫—Ä—ã—Å—ã:**

#### **1. –ö—Ä—ã—Å–∏–Ω–∞—è –∂–∏–≤—É—á–µ—Å—Ç—å (rat_vitality)**
- **–¢—Ä–µ–±—É–µ–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 100%
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
  - –û–±—ã—á–Ω–∞—è –∫—Ä—ã—Å–∞: 10%
  - –ù–µ–æ–±—ã—á–Ω–∞—è –∫—Ä—ã—Å–∞: 10%
  - –†–µ–¥–∫–∞—è –∫—Ä—ã—Å–∞: 10%
  - –≠–ø–∏—á–µ—Å–∫–∞—è –∫—Ä—ã—Å–∞: 10%
  - –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –∫—Ä—ã—Å–∞: 10%

#### **2. –£–≤–æ—Ä–æ—Ç (dodge)**
- **–¢—Ä–µ–±—É–µ–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 100%
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
  - –ù–µ–æ–±—ã—á–Ω–∞—è –∫—Ä—ã—Å–∞: 10%
  - –†–µ–¥–∫–∞—è –∫—Ä—ã—Å–∞: 10%
  - –≠–ø–∏—á–µ—Å–∫–∞—è –∫—Ä—ã—Å–∞: 10%
  - –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –∫—Ä—ã—Å–∞: 10%

#### **3. –ö—Ä–æ–≤–æ—Ç–æ–∫ (blood_flow)**
- **–¢—Ä–µ–±—É–µ–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 100%
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
  - –†–µ–¥–∫–∞—è –∫—Ä—ã—Å–∞: 10%
  - –≠–ø–∏—á–µ—Å–∫–∞—è –∫—Ä—ã—Å–∞: 10%
  - –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –∫—Ä—ã—Å–∞: 10%

#### **4. –ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç—å (agility)**
- **–¢—Ä–µ–±—É–µ–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 100%
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
  - –≠–ø–∏—á–µ—Å–∫–∞—è –∫—Ä—ã—Å–∞: 10%
  - –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –∫—Ä—ã—Å–∞: 10%

#### **5. –ó–∞–≥–Ω–∞–Ω–Ω—ã–π –≤ —É–≥–æ–ª (cornered)**
- **–¢—Ä–µ–±—É–µ–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 100%
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
  - –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –∫—Ä—ã—Å–∞: 10%

## üîÑ –ú–µ—Ö–∞–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π:**
1. **–ò–≥—Ä–æ–∫ –ø–æ–±–µ–∂–¥–∞–µ—Ç –≤—Ä–∞–≥–∞** –≤ –±–æ—é
2. **–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç** —Ç–∏–ø –∏ —Ä–µ–¥–∫–æ—Å—Ç—å –≤—Ä–∞–≥–∞
3. **–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å** –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
4. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ** –∏–∑—É—á–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
5. **–û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –∏ –∏–∑—É—á–µ–Ω–∏–∏

### **–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:**
```
–ü–æ–±–µ–¥–∞ –Ω–∞–¥ –Ω–µ–æ–±—ã—á–Ω–æ–π –∫—Ä—ã—Å–æ–π:
‚Üí –ö—Ä—ã—Å–∏–Ω–∞—è –∂–∏–≤—É—á–µ—Å—Ç—å: +10%
‚Üí –£–≤–æ—Ä–æ—Ç: +10%
‚Üí –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: +0%

–ü–æ–±–µ–¥–∞ –Ω–∞–¥ —Ä–µ–¥–∫–æ–π –∫—Ä—ã—Å–æ–π:
‚Üí –ö—Ä—ã—Å–∏–Ω–∞—è –∂–∏–≤—É—á–µ—Å—Ç—å: +10% (–∏—Ç–æ–≥–æ: 20%)
‚Üí –£–≤–æ—Ä–æ—Ç: +10% (–∏—Ç–æ–≥–æ: 20%)
‚Üí –ö—Ä–æ–≤–æ—Ç–æ–∫: +10%
‚Üí –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: +0%
```

## üéÆ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### **–û–∫–Ω–æ –∏–∑—É—á–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**
- **–°–ø–∏—Å–æ–∫ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π** —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
- **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- **–°—Ç–∞—Ç—É—Å –∏–∑—É—á–µ–Ω–∏—è** (–∏–∑—É—á–µ–Ω–∞/–Ω–µ –∏–∑—É—á–µ–Ω–∞)
- **–ö–Ω–æ–ø–∫–∞ –¥–µ—Ç–∞–ª–µ–π** –¥–ª—è –∫–∞–∂–¥–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –∏ –∏–∑—É—á–µ–Ω–∏–∏

### **–î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ:**
- **–ö–Ω–æ–ø–∫–∞ "–ò–ó–£–ß–ï–ù–ò–ï –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô"** –≤ CharacterPreparation
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –∏–∑—É—á–µ–Ω–∏–∏
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

## üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### **–§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:** `user://ability_learning_progress.save`

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "learning_progress": {
    "rat_vitality": {
      "current_progress": 100,
      "is_learned": true,
      "learned_at": "2024-01-15 14:30:00",
      "sources": {}
    }
  },
  "last_updated": "2024-01-15 14:30:00"
}
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **–°–∏–≥–Ω–∞–ª—ã —Å–∏—Å—Ç–µ–º—ã:**
- `ability_learned(ability_id: String, progress: int)` - –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏–∑—É—á–µ–Ω–∞
- `progress_updated(ability_id: String, progress: int)` - –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω

### **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `add_progress(enemy_type: String, enemy_rarity: String)` - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- `get_ability_progress(ability_id: String)` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- `is_ability_learned(ability_id: String)` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑—É—á–µ–Ω–∏–µ
- `get_learned_abilities()` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑—É—á–µ–Ω–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π:**
```gdscript
# –í battle_manager.gd
func _add_ability_learning_progress():
    var ability_learning_system = get_node_or_null("/root/AbilityLearningSystem")
    if ability_learning_system and enemy_node:
        var enemy_type = "rat"  # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –∏–º–µ–Ω–∏ –≤—Ä–∞–≥–∞
        var enemy_rarity = enemy_node.rarity.to_lower()
        ability_learning_system.add_progress(enemy_type, enemy_rarity)
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–ü—Ä–∏–º–µ—Ä 1: –ò–∑—É—á–µ–Ω–∏–µ "–ö—Ä—ã—Å–∏–Ω–æ–π –∂–∏–≤—É—á–µ—Å—Ç–∏"**
```
–ü–æ–±–µ–¥–∞ –Ω–∞–¥ 10 –æ–±—ã—á–Ω—ã–º–∏ –∫—Ä—ã—Å–∞–º–∏:
‚Üí 10 √ó 10% = 100% 
‚Üí –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏–∑—É—á–µ–Ω–∞!

–ü–æ–±–µ–¥–∞ –Ω–∞–¥ 5 –Ω–µ–æ–±—ã—á–Ω—ã–º–∏ –∫—Ä—ã—Å–∞–º–∏:
‚Üí 5 √ó 10% = 50%
‚Üí –ü—Ä–æ–≥—Ä–µ—Å—Å: 50/100%

–ü–æ–±–µ–¥–∞ –Ω–∞–¥ 2 —Ä–µ–¥–∫–∏–º–∏ –∫—Ä—ã—Å–∞–º–∏:
‚Üí 2 √ó 10% = 20%
‚Üí –ü—Ä–æ–≥—Ä–µ—Å—Å: 20/100%
```

### **–ü—Ä–∏–º–µ—Ä 2: –ò–∑—É—á–µ–Ω–∏–µ "–ò–∑–≤–æ—Ä–æ—Ç–ª–∏–≤–æ—Å—Ç–∏"**
```
–ü–æ–±–µ–¥–∞ –Ω–∞–¥ 10 —ç–ø–∏—á–µ—Å–∫–∏–º–∏ –∫—Ä—ã—Å–∞–º–∏:
‚Üí 10 √ó 10% = 100%
‚Üí –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏–∑—É—á–µ–Ω–∞!

–ü–æ–±–µ–¥–∞ –Ω–∞–¥ 10 –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–º–∏ –∫—Ä—ã—Å–∞–º–∏:
‚Üí 10 √ó 10% = 100%
‚Üí –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏–∑—É—á–µ–Ω–∞!
```

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**
1. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –≤ `AbilityLearningSystem.gd`
2. **–î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –¥–ª—è –Ω–æ–≤—ã—Ö –≤—Ä–∞–≥–æ–≤
3. **–°–æ–∑–¥–∞—Ç—å –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö
4. **–û–±–Ω–æ–≤–∏—Ç—å UI** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

### **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤:**
1. **–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –≤ `ability_learning_config`
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
3. **–û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –≤—Ä–∞–≥–∞** –≤ `battle_manager.gd`

## üéÆ –ò–≥—Ä–æ–≤–æ–π –±–∞–ª–∞–Ω—Å

### **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–∑—É—á–µ–Ω–∏—è:**
- **–ë—ã—Å—Ç—Ä–æ–µ –∏–∑—É—á–µ–Ω–∏–µ:** –§–æ–∫—É—Å –Ω–∞ –Ω–µ–æ–±—ã—á–Ω—ã—Ö –∫—Ä—ã—Å–∞—Ö (70% –∑–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å)
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ:** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–¥–∫–æ—Å—Ç–µ–π
- **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### **–ë–∞–ª–∞–Ω—Å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:**
- **–õ–µ–≥–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:** –ò–∑—É—á–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ (–æ–±—ã—á–Ω—ã–µ/–Ω–µ–æ–±—ã—á–Ω—ã–µ –≤—Ä–∞–≥–∏)
- **–°—Ä–µ–¥–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:** –¢—Ä–µ–±—É—é—Ç —Ä–µ–¥–∫–∏—Ö –≤—Ä–∞–≥–æ–≤
- **–°–ª–æ–∂–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:** –¢—Ä–µ–±—É—é—Ç —ç–ø–∏—á–µ—Å–∫–∏—Ö/–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤

**–°–∏—Å—Ç–µ–º–∞ –∏–∑—É—á–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéØ‚ú®
