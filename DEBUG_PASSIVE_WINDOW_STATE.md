# –û—Ç–ª–∞–¥–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–∫–Ω–∞ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
–ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –æ–∫–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—Ö–æ–¥–∞, —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ "–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ", —Ö–æ—Ç—è –±–æ–Ω—É—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–º–∏.

## üîç –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞:

### **1. –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ `load_passive_abilities()`:**

```gdscript
func load_passive_abilities():
	"""–ó–∞–≥—Ä—É–∂–∞–µ–º –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞"""
	passive_abilities = player_data.get_available_passives_for_ui()
	
	# –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
	print("=== –ó–ê–ì–†–£–ó–ö–ê –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===")
	print("–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", player_data.get_learned_passives())
	print("–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", player_data.get_active_passives())
	print("–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è UI: ", passive_abilities.size())
	for passive_data in passive_abilities:
		print("  - ", passive_data.name, " (", passive_data.id, "): ", "–ê–∫—Ç–∏–≤–Ω–∞" if passive_data.is_active else "–ù–µ–∞–∫—Ç–∏–≤–Ω–∞")
	print("=== –ö–û–ù–ï–¶ –ó–ê–ì–†–£–ó–ö–ò –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===")
```

### **2. –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ `_on_toggle_passive()`:**

```gdscript
func _on_toggle_passive(ability_id: String):
	"""–ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏"""
	print("=== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –ü–ê–°–°–ò–í–ù–û–ô –°–ü–û–°–û–ë–ù–û–°–¢–ò ===")
	print("–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è: ", ability_id)
	print("–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –î–û –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è: ", player_data.get_active_passives())
	
	var success = player_data.toggle_passive_ability(ability_id)
	if success:
		print("–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞ –ø–∞—Å—Å–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: ", ability_id)
		print("–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ü–û–°–õ–ï –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è: ", player_data.get_active_passives())
		# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ–º UI
		load_passive_abilities()
		update_ui()
	else:
		print("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", ability_id)
	print("=== –ö–û–ù–ï–¶ –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –ü–ê–°–°–ò–í–ù–û–ô –°–ü–û–°–û–ë–ù–û–°–¢–ò ===")
```

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

### **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞:**
```
=== –ó–ê–ì–†–£–ó–ö–ê –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_fortress", "player_strong", "player_wise", "player_vitality"]
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: []
–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è UI: 4
  - –ö—Ä–µ–ø–æ—Å—Ç—å (player_fortress): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –°–∏–ª—å–Ω—ã–π (player_strong): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ú—É–¥—Ä—ã–π (player_wise): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ñ–∏–≤—É—á–µ—Å—Ç—å (player_vitality): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
=== –ö–û–ù–ï–¶ –ó–ê–ì–†–£–ó–ö–ò –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
```

### **–ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ "–°–∏–ª—å–Ω—ã–π":**
```
=== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –ü–ê–°–°–ò–í–ù–û–ô –°–ü–û–°–û–ë–ù–û–°–¢–ò ===
–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è: player_strong
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –î–û –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è: []
–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞ –ø–∞—Å—Å–∏–≤–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: player_strong
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ü–û–°–õ–ï –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è: ["player_strong"]
=== –ö–û–ù–ï–¶ –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –ü–ê–°–°–ò–í–ù–û–ô –°–ü–û–°–û–ë–ù–û–°–¢–ò ===

=== –ó–ê–ì–†–£–ó–ö–ê –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_fortress", "player_strong", "player_wise", "player_vitality"]
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_strong"]
–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è UI: 4
  - –ö—Ä–µ–ø–æ—Å—Ç—å (player_fortress): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –°–∏–ª—å–Ω—ã–π (player_strong): –ê–∫—Ç–∏–≤–Ω–∞
  - –ú—É–¥—Ä—ã–π (player_wise): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ñ–∏–≤—É—á–µ—Å—Ç—å (player_vitality): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
=== –ö–û–ù–ï–¶ –ó–ê–ì–†–£–ó–ö–ò –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
```

### **–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞ (–µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –µ—Å—Ç—å):**
```
=== –ó–ê–ì–†–£–ó–ö–ê –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_fortress", "player_strong", "player_wise", "player_vitality"]
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: []  # ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–±—Ä–æ—à–µ–Ω—ã!
–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è UI: 4
  - –ö—Ä–µ–ø–æ—Å—Ç—å (player_fortress): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –°–∏–ª—å–Ω—ã–π (player_strong): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞  # ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω–∞!
  - –ú—É–¥—Ä—ã–π (player_wise): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ñ–∏–≤—É—á–µ—Å—Ç—å (player_vitality): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
=== –ö–û–ù–ï–¶ –ó–ê–ì–†–£–ó–ö–ò –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
```

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:

### **1. –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PlayerData:**
- **–ü—Ä–æ–±–ª–µ–º–∞:** `active_passives` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –º–µ–∂–¥—É –æ—Ç–∫—Ä—ã—Ç–∏—è–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `active_passives` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `PlayerData`

### **2. –§—É–Ω–∫—Ü–∏—è `get_available_passives_for_ui()` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å `is_active`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É `ability_id in active_passives`

### **3. –û–∫–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑:**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–æ–≤–æ–µ –æ–∫–Ω–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∫–∞–∂—É—Ç:
- ‚úÖ **–ö–∞–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–∑—É—á–µ–Ω—ã** - —Å–ø–∏—Å–æ–∫ `learned_passives`
- ‚úÖ **–ö–∞–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ã** - —Å–ø–∏—Å–æ–∫ `active_passives`
- ‚úÖ **–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å** - –¥–ª—è –∫–∞–∂–¥–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏** - –¥–æ –∏ –ø–æ—Å–ª–µ
- ‚úÖ **–ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±—Ä–æ—Å** - –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –µ—Å—Ç—å

**–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –≥–¥–µ —Ç–µ—Ä—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π!** üéØ‚ú®
