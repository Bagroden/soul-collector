# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å "–ñ–∏–≤—É—á–µ—Å—Ç—å" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω–∞—è, —Ö–æ—Ç—è –∏–≥—Ä–æ–∫ –µ—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±–∏—Ä–∞–ª.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### **1. –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ `sync_active_passives_with_bonuses()`:**

#### **–ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```gdscript
# –û—á–∏—â–∞–µ–º –º–∞—Å—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
active_passives = []

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –±–æ–Ω—É—Å—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
if passive_strength_bonus > 0:
	active_passives.append("player_strong")
```

#### **–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```gdscript
# –ù–ï –æ—á–∏—â–∞–µ–º –º–∞—Å—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π - —Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –±–æ–Ω—É—Å–∞–º–∏
# –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –µ—Å–ª–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±—ã–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –±–æ–Ω—É—Å—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ
if passive_strength_bonus > 0 and "player_strong" not in active_passives:
	active_passives.append("player_strong")
	print("–ù–∞–π–¥–µ–Ω –±–æ–Ω—É—Å —Å–∏–ª—ã: ", passive_strength_bonus, " - –¥–æ–±–∞–≤–ª—è–µ–º player_strong")
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**

```gdscript
# –£–¥–∞–ª—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏–º–µ—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –±–æ–Ω—É—Å–æ–≤
var to_remove = []
for ability_id in active_passives:
	var should_remove = false
	match ability_id:
		"player_strong":
			if passive_strength_bonus <= 0:
				should_remove = true
		"player_fortress":
			if passive_vitality_bonus <= 0:
				should_remove = true
		"player_wise":
			if passive_wisdom_bonus <= 0:
				should_remove = true
		"player_vitality":
			if max_hp < 150:
				should_remove = true
	
	if should_remove:
		to_remove.append(ability_id)
		print("–£–¥–∞–ª—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å ", ability_id, " - –Ω–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –±–æ–Ω—É—Å–∞")

for ability_id in to_remove:
	active_passives.erase(ability_id)
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### **–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:**

#### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ø—Ä–æ–±–ª–µ–º–∞):**
```
=== –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –° –ë–û–ù–£–°–ê–ú–ò ===
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –î–û —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: []
–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –±–æ–Ω—É—Å—ã:
  –ë–æ–Ω—É—Å —Å–∏–ª—ã: 0
  –ë–æ–Ω—É—Å –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏: 0
  –ë–æ–Ω—É—Å –º—É–¥—Ä–æ—Å—Ç–∏: 0
  –ú–∞–∫—Å. HP: 100 (–±–∞–∑–æ–≤–æ–µ: 100)
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ü–û–°–õ–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: []  # ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –æ—á–∏—â–∞–ª—Å—è –º–∞—Å—Å–∏–≤
=== –ö–û–ù–ï–¶ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô ===

=== –ó–ê–ì–†–£–ó–ö–ê –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_fortress", "player_strong", "player_wise", "player_vitality"]
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: []
–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è UI: 4
  - –ö—Ä–µ–ø–æ—Å—Ç—å (player_fortress): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –°–∏–ª—å–Ω—ã–π (player_strong): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ú—É–¥—Ä—ã–π (player_wise): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ñ–∏–≤—É—á–µ—Å—Ç—å (player_vitality): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞  # ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω–∞—è!
=== –ö–û–ù–ï–¶ –ó–ê–ì–†–£–ó–ö–ò –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
```

#### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```
=== –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –° –ë–û–ù–£–°–ê–ú–ò ===
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –î–û —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: []
–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –±–æ–Ω—É—Å—ã:
  –ë–æ–Ω—É—Å —Å–∏–ª—ã: 0
  –ë–æ–Ω—É—Å –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏: 0
  –ë–æ–Ω—É—Å –º—É–¥—Ä–æ—Å—Ç–∏: 0
  –ú–∞–∫—Å. HP: 100 (–±–∞–∑–æ–≤–æ–µ: 100)
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ü–û–°–õ–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: []  # ‚Üê –ò–°–ü–†–ê–í–õ–ï–ù–û: –æ—Å—Ç–∞–µ—Ç—Å—è –ø—É—Å—Ç—ã–º
=== –ö–û–ù–ï–¶ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô ===

=== –ó–ê–ì–†–£–ó–ö–ê –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_fortress", "player_strong", "player_wise", "player_vitality"]
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: []
–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è UI: 4
  - –ö—Ä–µ–ø–æ—Å—Ç—å (player_fortress): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –°–∏–ª—å–Ω—ã–π (player_strong): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ú—É–¥—Ä—ã–π (player_wise): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ñ–∏–≤—É—á–µ—Å—Ç—å (player_vitality): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞  # ‚Üê –ò–°–ü–†–ê–í–õ–ï–ù–û: —Ç–µ–ø–µ—Ä—å –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞!
=== –ö–û–ù–ï–¶ –ó–ê–ì–†–£–ó–ö–ò –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
```

## üîß –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

### **1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
- **–ù–ï –æ—á–∏—â–∞–µ—Ç** –º–∞—Å—Å–∏–≤ `active_passives` –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç** –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- **–î–æ–±–∞–≤–ª—è–µ—Ç** —Ç–æ–ª—å–∫–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å –±–æ–Ω—É—Å–∞–º–∏

### **2. –£–º–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
```gdscript
# –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –±–æ–Ω—É—Å –ò —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
if passive_strength_bonus > 0 and "player_strong" not in active_passives:
	active_passives.append("player_strong")
```

### **3. –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö:**
```gdscript
# –£–¥–∞–ª—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –±–æ–Ω—É—Å–æ–≤
if passive_strength_bonus <= 0:
	should_remove = true
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:
- ‚úÖ **–ù–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –±–æ–Ω—É—Å–æ–≤
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏** - –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ **–£–¥–∞–ª—è–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** - –æ—á–∏—â–∞–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±–µ–∑ –±–æ–Ω—É—Å–æ–≤
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏** - –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å –±–æ–Ω—É—Å–∞–º–∏** - —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã

**–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Å–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ!** üéØ‚ú®
