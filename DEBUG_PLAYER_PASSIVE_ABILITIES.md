# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –∏–≥—Ä–æ–∫–∞

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:
–ü–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç - –•–ü –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ "–ñ–∏–≤—É—á–µ—Å—Ç—å".

## üîç –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

### **1. –í `battle_manager.gd` - –º–µ—Ç–æ–¥ `_apply_player_passive_abilities()`:**
```gdscript
func _apply_player_passive_abilities():
	"""–ü—Ä–∏–º–µ–Ω—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞"""
	if not player_manager:
		return
	
	var player_data = player_manager.get_player_data()
	if not player_data:
		return
	
	# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—É –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
	player_data.initialize_passive_system()
	
	# –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
	var active_passives = player_data.get_active_passives()
	print("=== –ü–ê–°–°–ò–í–ù–´–ï –°–ü–û–°–û–ë–ù–û–°–¢–ò –ò–ì–†–û–ö–ê ===")
	print("–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", active_passives)
	print("–ú–∞–∫—Å. HP –î–û –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π: ", player_node.max_hp)
	
	# –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–∞–∂–¥—É—é –∞–∫—Ç–∏–≤–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
	for ability_id in active_passives:
		var ability = player_data.get_passive_ability_info(ability_id)
		if ability:
			print("–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: ", ability.name, " (", ability_id, ")")
			# –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ –∏–≥—Ä–æ–∫—É
			player_node.add_passive_ability(ability)
	
	print("–ú–∞–∫—Å. HP –ü–û–°–õ–ï –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π: ", player_node.max_hp)
	print("=== –ö–û–ù–ï–¶ –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –ò–ì–†–û–ö–ê ===")
```

### **2. –í `body.gd` - –º–µ—Ç–æ–¥ `_apply_passive_effects()` –¥–ª—è `player_vitality`:**
```gdscript
"player_vitality":
	# –ñ–∏–≤—É—á–µ—Å—Ç—å –∏–≥—Ä–æ–∫–∞ - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ HP
	var old_max_hp = max_hp
	max_hp += int(ability.value)
	hp = min(hp + int(ability.value), max_hp)  # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º HP
	print("=== –ñ–ò–í–£–ß–ï–°–¢–¨ –ò–ì–†–û–ö–ê ===")
	print(display_name, " –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å –∂–∏–≤—É—á–µ—Å—Ç–∏: +", int(ability.value), " HP")
	print("–ú–∞–∫—Å. HP –î–û: ", old_max_hp)
	print("–ú–∞–∫—Å. HP –ü–û–°–õ–ï: ", max_hp)
	print("–¢–µ–∫—É—â–µ–µ HP: ", hp)
	print("=== –ö–û–ù–ï–¶ –ñ–ò–í–£–ß–ï–°–¢–ò –ò–ì–†–û–ö–ê ===")
```

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### **1. –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∫–∞–∂—É—Ç:**
```
=== –ü–ê–°–°–ò–í–ù–´–ï –°–ü–û–°–û–ë–ù–û–°–¢–ò –ò–ì–†–û–ö–ê ===
–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: [player_dodge, player_strength, player_vitality, player_crit]
–ú–∞–∫—Å. HP –î–û –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π: 100
–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: –£–≤–æ—Ä–æ—Ç (player_dodge)
–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: –°–∏–ª–∞ –≤–æ–∏–Ω–∞ (player_strength)
–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: –ñ–∏–≤—É—á–µ—Å—Ç—å –∏–≥—Ä–æ–∫–∞ (player_vitality)
=== –ñ–ò–í–£–ß–ï–°–¢–¨ –ò–ì–†–û–ö–ê ===
Player –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å –∂–∏–≤—É—á–µ—Å—Ç–∏: +50 HP
–ú–∞–∫—Å. HP –î–û: 100
–ú–∞–∫—Å. HP –ü–û–°–õ–ï: 150
–¢–µ–∫—É—â–µ–µ HP: 150
=== –ö–û–ù–ï–¶ –ñ–ò–í–£–ß–ï–°–¢–ò –ò–ì–†–û–ö–ê ===
–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä –∏–≥—Ä–æ–∫–∞ (player_crit)
–ú–∞–∫—Å. HP –ü–û–°–õ–ï –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π: 150
=== –ö–û–ù–ï–¶ –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –ò–ì–†–û–ö–ê ===
```

### **2. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- **–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—É—Å—Ç—ã–µ** - `active_passives = []`
- **–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞** - `ability = null`
- **–ú–∞–∫—Å. HP –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è** - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- **–¢–µ–∫—É—â–µ–µ HP –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** - –ø—Ä–æ–±–ª–µ–º–∞ –≤ —É—Å—Ç–∞–Ω–æ–≤–∫–µ HP

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ HP** - –¥–æ –∏ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π —à–∞–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫

**–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ—á–µ–º—É –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç!** üéÆ‚ú®
