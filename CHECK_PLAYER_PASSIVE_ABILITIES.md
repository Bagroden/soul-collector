# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –∏–≥—Ä–æ–∫–∞

## üéØ –¶–µ–ª—å:
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –≥–ª–∞–≤–Ω–æ–º—É –≥–µ—Ä–æ—é.

## üîç –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

### **1. –í `battle_manager.gd` - –º–µ—Ç–æ–¥ `_apply_player_passive_abilities()`:**
```gdscript
func _apply_player_passive_abilities():
	"""–ü—Ä–∏–º–µ–Ω—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞"""
	if not player_manager:
		print("–û–®–ò–ë–ö–ê: player_manager –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ _apply_player_passive_abilities")
		return
	
	var player_data = player_manager.get_player_data()
	if not player_data:
		print("–û–®–ò–ë–ö–ê: player_data –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ _apply_player_passive_abilities")
		return
	
	# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—É –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
	player_data.initialize_passive_system()
	
	# –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
	var active_passives = player_data.get_active_passives()
	print("=== –ü–ê–°–°–ò–í–ù–´–ï –°–ü–û–°–û–ë–ù–û–°–¢–ò –ò–ì–†–û–ö–ê ===")
	print("–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", active_passives)
	print("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π: ", active_passives.size())
	
	# –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–∞–∂–¥—É—é –∞–∫—Ç–∏–≤–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
	for ability_id in active_passives:
		var ability = player_data.get_passive_ability_info(ability_id)
		if ability:
			print("–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: ", ability.name, " (", ability_id, ")")
			# –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ –∏–≥—Ä–æ–∫—É
			player_node.add_passive_ability(ability)
		else:
			print("–û–®–ò–ë–ö–ê: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", ability_id)
	
	print("=== –ö–û–ù–ï–¶ –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –ò–ì–†–û–ö–ê ===")
```

### **2. –í `body.gd` - –º–µ—Ç–æ–¥ `_apply_passive_effects()` –¥–ª—è –∏–≥—Ä–æ–∫–∞:**
```gdscript
# === –ü–ê–°–°–ò–í–ù–´–ï –°–ü–û–°–û–ë–ù–û–°–¢–ò –ò–ì–†–û–ö–ê ===
"player_dodge":
	# –£–≤–æ—Ä–æ—Ç –∏–≥—Ä–æ–∫–∞ - –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω
	print(display_name, " –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —É–≤–æ—Ä–æ—Ç–∞!")
"player_strength":
	# –°–∏–ª–∞ –≤–æ–∏–Ω–∞ - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —É—Ä–æ–Ω–∞
	var strength_bonus = int(attack_power * (ability.value / 100.0))
	add_damage_bonus(strength_bonus)
	print(display_name, " –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å —Å–∏–ª—ã –≤–æ–∏–Ω–∞: +", strength_bonus, " —É—Ä–æ–Ω–∞")
"player_vitality":
	# –ñ–∏–≤—É—á–µ—Å—Ç—å –∏–≥—Ä–æ–∫–∞ - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ HP
	max_hp += int(ability.value)
	hp = min(hp + int(ability.value), max_hp)  # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º HP
	print(display_name, " –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å –∂–∏–≤—É—á–µ—Å—Ç–∏: +", int(ability.value), " HP")
"player_crit":
	# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä –∏–≥—Ä–æ–∫–∞ - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —à–∞–Ω—Å–∞ –∫—Ä–∏—Ç–∞
	var old_crit_chance = crit_chance
	crit_chance += ability.value / 100.0
	print(display_name, " –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å –∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º—É —É–¥–∞—Ä—É: +", ability.value, "%")
	print("–®–∞–Ω—Å –∫—Ä–∏—Ç–∞ –î–û: ", old_crit_chance * 100, "%, –ü–û–°–õ–ï: ", crit_chance * 100, "%")
```

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### **1. –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∫–∞–∂—É—Ç:**
```
=== –ü–ê–°–°–ò–í–ù–´–ï –°–ü–û–°–û–ë–ù–û–°–¢–ò –ò–ì–†–û–ö–ê ===
–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: [player_dodge, player_strength, player_vitality, player_crit]
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π: 4
–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: –£–≤–æ—Ä–æ—Ç (player_dodge)
–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: –°–∏–ª–∞ –≤–æ–∏–Ω–∞ (player_strength)
–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: –ñ–∏–≤—É—á–µ—Å—Ç—å –∏–≥—Ä–æ–∫–∞ (player_vitality)
–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä –∏–≥—Ä–æ–∫–∞ (player_crit)
=== –ö–û–ù–ï–¶ –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –ò–ì–†–û–ö–ê ===
```

### **2. –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
```
Player –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —É–≤–æ—Ä–æ—Ç–∞!
Player –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å —Å–∏–ª—ã –≤–æ–∏–Ω–∞: +10 —É—Ä–æ–Ω–∞
Player –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å –∂–∏–≤—É—á–µ—Å—Ç–∏: +50 HP
Player –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å –∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º—É —É–¥–∞—Ä—É: +10%
–®–∞–Ω—Å –∫—Ä–∏—Ç–∞ –î–û: 5%, –ü–û–°–õ–ï: 15%
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** - —Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –∞–∫—Ç–∏–≤–Ω–æ
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ** - –∫–∞–∂–¥–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã –∫–∞–∂–¥–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

**–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –∏–≥—Ä–æ–∫—É!** üéÆ‚ú®
