# –°–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–≤–µ—Å—Ç–æ–≤

## ‚úÖ –°—Ç–∞—Ç—É—Å: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–≤–µ—Å—Ç–æ–≤ —É NPC "–°–∫—É–ª—å–ø—Ç–æ—Ä –¥—É—à".

---

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π NPC –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∏–≥—Ä–æ–∫—É –ø–æ–Ω—è—Ç—å, —á—Ç–æ –Ω—É–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å NPC.

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

1. **–ò–∫–æ–Ω–∫–∏ –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π NPC** - –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π (!) –∏–ª–∏ –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π (?) –∑–Ω–∞–∫
2. **–ü—É–ª—å—Å–∏—Ä—É—é—â–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ** - —Ü–≤–µ—Ç–Ω–∞—è –∞—É—Ä–∞ –≤–æ–∫—Ä—É–≥ NPC
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä

---

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### 1. –ö–≤–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤–∑—è—Ç–∏—è (AVAILABLE)

**–ò–∫–æ–Ω–∫–∞:** `!` (–ñ–µ–ª—Ç—ã–π/–ó–æ–ª–æ—Ç–æ–π –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫)  
**–°–≤–µ—á–µ–Ω–∏–µ:** –ó–æ–ª–æ—Ç–æ–µ –ø—É–ª—å—Å–∏—Ä—É—é—â–µ–µ (Color: 1.0, 0.85, 0.0)  
**–ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:**
- –ü–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞ —Å–æ –°–∫—É–ª—å–ø—Ç–æ—Ä–æ–º –¥—É—à (`met_soul_sculptor = false`)
- –£—Ä–Ω–∞ –¥—É—à —Å–¥–∞–Ω–∞, –Ω–æ –ö—Ä–∏—Å—Ç–∞–ª–ª –ø–æ–∑–Ω–∞–Ω–∏—è –Ω–µ –ø–æ–ª—É—á–µ–Ω
- –ö—Ä–∏—Å—Ç–∞–ª–ª –ø–æ–∑–Ω–∞–Ω–∏—è –ø–æ–ª—É—á–µ–Ω, –Ω–æ –§–∏–ª–∞–∫—Ç–µ—Ä–∏—è –Ω–µ –ø–æ–ª—É—á–µ–Ω–∞

```
      ‚ùó <- –ó–æ–ª–æ—Ç–æ–π –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫
      |
    üóø <- –°–∫—É–ª—å–ø—Ç–æ—Ä –¥—É—à —Å –∑–æ–ª–æ—Ç—ã–º —Å–≤–µ—á–µ–Ω–∏–µ–º
   /|\
```

### 2. –ö–≤–µ—Å—Ç –≤–∑—è—Ç, –Ω–æ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω (IN_PROGRESS)

**–ò–∫–æ–Ω–∫–∞:** `?` (–°–µ—Ä—ã–π –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫)  
**–°–≤–µ—á–µ–Ω–∏–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç  
**–ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:**
- –ö–≤–µ—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω, –Ω–æ –ø—Ä–µ–¥–º–µ—Ç –µ—â–µ –Ω–µ –Ω–∞–π–¥–µ–Ω
- –ù–∞–ø—Ä–∏–º–µ—Ä: `is_quest_active("find_soul_urn")` –Ω–æ `has_soul_urn = false`

```
      ‚ùì <- –°–µ—Ä—ã–π –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫
      |
    üóø <- –°–∫—É–ª—å–ø—Ç–æ—Ä –¥—É—à –±–µ–∑ —Å–≤–µ—á–µ–Ω–∏—è
   /|\
```

### 3. –ö–≤–µ—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω, –º–æ–∂–Ω–æ —Å–¥–∞—Ç—å (READY_TO_TURN_IN)

**–ò–∫–æ–Ω–∫–∞:** `!` (–ó–µ–ª–µ–Ω—ã–π –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫)  
**–°–≤–µ—á–µ–Ω–∏–µ:** –ó–µ–ª–µ–Ω–æ–µ –ø—É–ª—å—Å–∏—Ä—É—é—â–µ–µ (Color: 0.0, 1.0, 0.3)  
**–ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:**
- –ö–≤–µ—Å—Ç–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç –Ω–∞–π–¥–µ–Ω, –Ω–æ –Ω–µ —Å–¥–∞–Ω
- –ù–∞–ø—Ä–∏–º–µ—Ä: `has_soul_urn = true` –Ω–æ `soul_urn_delivered = false`

```
      ‚ùó <- –ó–µ–ª–µ–Ω—ã–π –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫
      |
    üóø <- –°–∫—É–ª—å–ø—Ç–æ—Ä –¥—É—à —Å –∑–µ–ª–µ–Ω—ã–º —Å–≤–µ—á–µ–Ω–∏–µ–º
   /|\
```

### 4. –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤ (NONE)

**–ò–∫–æ–Ω–∫–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç  
**–°–≤–µ—á–µ–Ω–∏–µ:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç  
**–ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:**
- –í—Å–µ –∫–≤–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤ –Ω–∞ —Ç–µ–∫—É—â–µ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏

```
    üóø <- –û–±—ã—á–Ω—ã–π –°–∫—É–ª—å–ø—Ç–æ—Ä –¥—É—à
   /|\
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

**–§–∞–π–ª:** `Scripts/NPC/SoulSculptor.gd`

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```gdscript
## –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
var quest_indicator: Label = null  # –ò–∫–æ–Ω–∫–∞ –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π (!, ?)
var glow_sprite: Sprite2D = null  # –ü—É–ª—å—Å–∏—Ä—É—é—â–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ
var glow_tween: Tween = null  # –ê–Ω–∏–º–∞—Ü–∏—è —Å–≤–µ—á–µ–Ω–∏—è

## –°–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
enum QuestIndicatorState {
    NONE,  # –ù–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
    AVAILABLE,  # –ö–≤–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω (–∂–µ–ª—Ç—ã–π !)
    IN_PROGRESS,  # –ö–≤–µ—Å—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ (—Å–µ—Ä—ã–π ?)
    READY_TO_TURN_IN  # –ú–æ–∂–Ω–æ —Å–¥–∞—Ç—å (–∑–µ–ª–µ–Ω—ã–π !)
}

var current_indicator_state: QuestIndicatorState = QuestIndicatorState.NONE
```

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –ª–æ–≥–∏–∫–∏:

#### 1. –ü–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ –Ω–∞ –°–∫—É–ª—å–ø—Ç–æ—Ä–∞ –¥—É—à:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `met_soul_sculptor = true`
- –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–≤–µ—Å—Ç `find_soul_urn`
- **–°—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥** —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–≤–µ—Å—Ç–∞
- –§–ª–∞–≥ `seen_first_dialogue` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `true`
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –º–µ–Ω—è–µ—Ç—Å—è —Å –∑–æ–ª–æ—Ç–æ–≥–æ `!` –Ω–∞ —Å–µ—Ä—ã–π `?`

#### 2. –ö–≤–µ—Å—Ç –Ω–∞ –ö—Ä–∏—Å—Ç–∞–ª–ª –ø–æ–∑–Ω–∞–Ω–∏—è
- **–ö–≤–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –Ω–∞–¥ –ì–Ω–∏–ª–æ—Å—Ç–Ω—ã–º —Å–ª–∏–∑–Ω–µ–º** (–±–æ—Å—Å –ø–µ—Ä–≤–æ–π –ª–æ–∫–∞—Ü–∏–∏)
- –ü–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –Ω–∞–¥ –±–æ—Å—Å–æ–º –∫–≤–µ—Å—Ç `find_knowledge_crystal` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ `battle_manager.gd`
- –î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–æ–ª–æ—Ç–æ–π `!`, –¥–∞–∂–µ –µ—Å–ª–∏ –£—Ä–Ω–∞ –¥—É—à —Å–¥–∞–Ω–∞
- –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –∑–æ–ª–æ—Ç–æ–π `!`

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

#### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

```gdscript
func _setup_quest_indicators():
    # –°–æ–∑–¥–∞–µ—Ç —Å–≤–µ—á–µ–Ω–∏–µ (Sprite2D —Å –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π —Ç–µ–∫—Å—Ç—É—Ä–æ–π)
    # –°–æ–∑–¥–∞–µ—Ç –∏–∫–æ–Ω–∫—É (Label —Å —Ç–µ–∫—Å—Ç–æ–º "!" –∏–ª–∏ "?")
```

**–°–≤–µ—á–µ–Ω–∏–µ:**
- –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞ 200x200 –ø–∏–∫—Å–µ–ª–µ–π
- –†–∞–¥–∏–∞–ª—å–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç —Å –ø–ª–∞–≤–Ω—ã–º –∑–∞—Ç—É—Ö–∞–Ω–∏–µ–º –∫ –∫—Ä–∞—è–º
- Z-Index: -1 (–ø–æ–∑–∞–¥–∏ NPC)
- Scale: 1.5x

**–ò–∫–æ–Ω–∫–∞:**
- Label —Å —Ä–∞–∑–º–µ—Ä–æ–º —à—Ä–∏—Ñ—Ç–∞ 48
- –ü–æ–∑–∏—Ü–∏—è: Vector2(-15, -250) –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ NPC (–Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π)
- Z-Index: 20 (–ø–æ–≤–µ—Ä—Ö NPC)

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```gdscript
func _process(_delta: float):
    _update_quest_indicator()  # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
```

```gdscript
func _update_quest_indicator():
    # –ü–æ–ª—É—á–∞–µ—Ç PlayerData
    # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
    # –û–±–Ω–æ–≤–ª—è–µ—Ç –≤–∏–∑—É–∞–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
```

#### 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–≤–µ—Å—Ç–∞

```gdscript
func _determine_quest_state(player_data) -> QuestIndicatorState:
    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∫–≤–µ—Å—Ç—ã –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
    # 1. –£—Ä–Ω–∞ –¥—É—à (find_soul_urn)
    # 2. –ö—Ä–∏—Å—Ç–∞–ª–ª –ø–æ–∑–Ω–∞–Ω–∏—è (find_knowledge_crystal) - —Ç–æ–ª—å–∫–æ –ü–û–°–õ–ï —É–±–∏–π—Å—Ç–≤–∞ –±–æ—Å—Å–∞
    # 3. –§–∏–ª–∞–∫—Ç–µ—Ä–∏—è (find_phylactery / find_eternity_sphere)
```

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**

```gdscript
# –ü–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–æ–ª–æ—Ç–æ–π !
if not player_data.met_soul_sculptor:
    return QuestIndicatorState.AVAILABLE

# –ö–≤–µ—Å—Ç –Ω–∞ –£—Ä–Ω—É –¥—É—à
if player_data.is_quest_active("find_soul_urn"):
    if player_data.has_soul_urn and not player_data.soul_urn_delivered:
        return QuestIndicatorState.READY_TO_TURN_IN
    else:
        return QuestIndicatorState.IN_PROGRESS

# –ö–≤–µ—Å—Ç –Ω–∞ –ö—Ä–∏—Å—Ç–∞–ª–ª –ø–æ–∑–Ω–∞–Ω–∏—è
# –í–ê–ñ–ù–û: –ö–≤–µ—Å—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –Ω–∞–¥ –ì–Ω–∏–ª–æ—Å—Ç–Ω—ã–º —Å–ª–∏–∑–Ω–µ–º!
if player_data.soul_urn_delivered and not player_data.has_knowledge_crystal:
    if player_data.is_quest_active("find_knowledge_crystal"):
        return QuestIndicatorState.IN_PROGRESS
    # –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º AVAILABLE –ø–æ–∫–∞ –∫–≤–µ—Å—Ç –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω (–±–æ—Å—Å –Ω–µ —É–±–∏—Ç)

# –ö–≤–µ—Å—Ç –Ω–∞ –§–∏–ª–∞–∫—Ç–µ—Ä–∏—é
if player_data.has_knowledge_crystal and not player_data.has_eternity_sphere:
    if player_data.is_quest_active("find_phylactery") or player_data.is_quest_active("find_eternity_sphere"):
        return QuestIndicatorState.IN_PROGRESS
    else:
        return QuestIndicatorState.AVAILABLE

# –í—Å–µ –∫–≤–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
return QuestIndicatorState.NONE
```

#### 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```gdscript
func _apply_indicator_state(state: QuestIndicatorState):
    match state:
        QuestIndicatorState.NONE:
            quest_indicator.visible = false
            _stop_glow_animation()
        
        QuestIndicatorState.AVAILABLE:
            quest_indicator.text = "!"
            quest_indicator.add_theme_color_override("font_color", Color(1.0, 0.85, 0.0))
            _start_glow_animation(Color(1.0, 0.85, 0.0, 0.3))
        
        QuestIndicatorState.IN_PROGRESS:
            quest_indicator.text = "?"
            quest_indicator.add_theme_color_override("font_color", Color(0.6, 0.6, 0.6))
            _stop_glow_animation()
        
        QuestIndicatorState.READY_TO_TURN_IN:
            quest_indicator.text = "!"
            quest_indicator.add_theme_color_override("font_color", Color(0.0, 1.0, 0.3))
            _start_glow_animation(Color(0.0, 1.0, 0.3, 0.4))
```

#### 5. –ê–Ω–∏–º–∞—Ü–∏—è —Å–≤–µ—á–µ–Ω–∏—è

```gdscript
func _start_glow_animation(glow_color: Color):
    # –°–æ–∑–¥–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π Tween
    # –ü—É–ª—å—Å–∞—Ü–∏—è –º–µ–∂–¥—É 30% –∏ 100% –æ—Ç –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
    # –ü–µ—Ä–µ—Ö–æ–¥: TRANS_SINE, EASE_IN_OUT
    # –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ü–∏–∫–ª–∞: 2 —Å–µ–∫—É–Ω–¥—ã (1 —Å–µ–∫ –≤–≤–µ—Ä—Ö, 1 —Å–µ–∫ –≤–Ω–∏–∑)
```

```gdscript
func _stop_glow_animation():
    # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Tween
    # –°–∫—Ä—ã–≤–∞–µ—Ç —Å–ø—Ä–∞–π—Ç —Å–≤–µ—á–µ–Ω–∏—è
```

---

## üìä –¢–∞–±–ª–∏—Ü–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–≤–µ—Å—Ç–æ–≤

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –ò–∫–æ–Ω–∫–∞ | –¶–≤–µ—Ç –∏–∫–æ–Ω–∫–∏ | –°–≤–µ—á–µ–Ω–∏–µ | –¶–≤–µ—Ç —Å–≤–µ—á–µ–Ω–∏—è | –£—Å–ª–æ–≤–∏–µ |
|-----------|--------|-------------|----------|---------------|---------|
| **NONE** | - | - | ‚ùå –ù–µ—Ç | - | –í—Å–µ –∫–≤–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã |
| **AVAILABLE** | ! | üü° –ó–æ–ª–æ—Ç–æ–π (1.0, 0.85, 0.0) | ‚úÖ –î–∞ | –ó–æ–ª–æ—Ç–æ–µ | –ö–≤–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤–∑—è—Ç–∏—è |
| **IN_PROGRESS** | ? | ‚ö™ –°–µ—Ä—ã–π (0.6, 0.6, 0.6) | ‚ùå –ù–µ—Ç | - | –ö–≤–µ—Å—Ç –≤–∑—è—Ç, –ø—Ä–µ–¥–º–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω |
| **READY_TO_TURN_IN** | ! | üü¢ –ó–µ–ª–µ–Ω—ã–π (0.0, 1.0, 0.3) | ‚úÖ –î–∞ | –ó–µ–ª–µ–Ω–æ–µ | –ü—Ä–µ–¥–º–µ—Ç –Ω–∞–π–¥–µ–Ω, –º–æ–∂–Ω–æ —Å–¥–∞—Ç—å |

---

## üéÆ –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞

### –ü—Ä–∏–º–µ—Ä: –ö–≤–µ—Å—Ç –Ω–∞ –£—Ä–Ω—É –¥—É—à

```
1. –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
   ‚îî‚îÄ> –ò–≥—Ä–æ–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
       ‚îî‚îÄ> met_soul_sculptor = false
           ‚îî‚îÄ> –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä: AVAILABLE (–ó–æ–ª–æ—Ç–æ–π ! + —Å–≤–µ—á–µ–Ω–∏–µ)

2. –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫ –Ω–∞ NPC
   ‚îî‚îÄ> met_soul_sculptor = true
       ‚îî‚îÄ> add_quest("find_soul_urn")
           ‚îî‚îÄ> –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä: IN_PROGRESS (–°–µ—Ä—ã–π ?)

3. –ü–æ–±–µ–¥–∞ –Ω–∞–¥ —Ä–µ–¥–∫–∏–º —Å–ª–∏–∑–Ω–µ–º
   ‚îî‚îÄ> has_soul_urn = true
       ‚îî‚îÄ> –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä: READY_TO_TURN_IN (–ó–µ–ª–µ–Ω—ã–π ! + —Å–≤–µ—á–µ–Ω–∏–µ)

4. –í–æ–∑–≤—Ä–∞—Ç –∫ NPC, –≤—ã–±–æ—Ä "üè∫ –î–æ—Å—Ç–∞–≤–∏—Ç—å –£—Ä–Ω—É –¥—É—à"
   ‚îî‚îÄ> soul_urn_delivered = true
       ‚îî‚îÄ> –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä: AVAILABLE (–ó–æ–ª–æ—Ç–æ–π ! + —Å–≤–µ—á–µ–Ω–∏–µ)
           (–î–æ—Å—Ç—É–ø–µ–Ω —Å–ª–µ–¥—É—é—â–∏–π –∫–≤–µ—Å—Ç –Ω–∞ –ö—Ä–∏—Å—Ç–∞–ª–ª –ø–æ–∑–Ω–∞–Ω–∏—è)

5. –í–∑—è—Ç–∏–µ –∫–≤–µ—Å—Ç–∞ –Ω–∞ –ö—Ä–∏—Å—Ç–∞–ª–ª –ø–æ–∑–Ω–∞–Ω–∏—è
   ‚îî‚îÄ> add_quest("find_knowledge_crystal")
       ‚îî‚îÄ> –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä: IN_PROGRESS (–°–µ—Ä—ã–π ?)

... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ
```

---

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è:
```
üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–æ: AVAILABLE
üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–æ: IN_PROGRESS
üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–æ: READY_TO_TURN_IN
üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–æ: NONE
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–æ–ª–æ—Ç–æ–π ! –Ω–∞–¥ –°–∫—É–ª—å–ø—Ç–æ—Ä–æ–º –¥—É—à
3. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ NPC (! –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä—ã–π ?)
4. –° –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å–æ–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: `PlayerManager.get_player_data().has_soul_urn = true`
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–µ–ª–µ–Ω—ã–π ! –∏ —Å–≤–µ—á–µ–Ω–∏–µ

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏:

```gdscript
quest_indicator.position = Vector2(-15, -250)  # –ù–∞–¥ –≥–æ–ª–æ–≤–æ–π
```

### –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏:

```gdscript
quest_indicator.add_theme_font_size_override("font_size", 48)
```

### –†–∞–∑–º–µ—Ä —Å–≤–µ—á–µ–Ω–∏—è:

```gdscript
glow_sprite.scale = Vector2(1.5, 1.5)
```

### –°–∫–æ—Ä–æ—Å—Ç—å –ø—É–ª—å—Å–∞—Ü–∏–∏:

```gdscript
glow_tween.tween_property(glow_sprite, "modulate", color_max, 1.0)  # 1 —Å–µ–∫—É–Ω–¥–∞
glow_tween.tween_property(glow_sprite, "modulate", color_min, 1.0)  # 1 —Å–µ–∫—É–Ω–¥–∞
```

### –¶–≤–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:

```gdscript
# –ó–æ–ª–æ—Ç–æ–π (–¥–æ—Å—Ç—É–ø–µ–Ω –∫–≤–µ—Å—Ç)
Color(1.0, 0.85, 0.0)

# –°–µ—Ä—ã–π (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
Color(0.6, 0.6, 0.6)

# –ó–µ–ª–µ–Ω—ã–π (–º–æ–∂–Ω–æ —Å–¥–∞—Ç—å)
Color(0.0, 1.0, 0.3)
```

---

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:

- –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ `current_indicator_state`
- –ê–Ω–∏–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–∏–Ω Tween –≤–º–µ—Å—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è
- –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç—É—Ä—ã —Å–≤–µ—á–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:

- **CPU:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ (–ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π —Ä–∞–∑ –≤ –∫–∞–¥—Ä)
- **GPU:** –ù–∏–∑–∫–æ–µ (–æ–¥–Ω–∞ —Ç–µ–∫—Å—Ç—É—Ä–∞ + –æ–¥–∏–Ω Label)
- **RAM:** ~50KB (—Ç–µ–∫—Å—Ç—É—Ä–∞ —Å–≤–µ—á–µ–Ω–∏—è 200x200 RGBA8)

---

## üìã –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–≤–µ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

### –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ PlayerData:

```gdscript
# –í—Å—Ç—Ä–µ—á–∏
player_data.met_soul_sculptor
player_data.seen_first_dialogue  # –ù–æ–≤–æ–µ: –≤–∏–¥–µ–ª –ª–∏ –∏–≥—Ä–æ–∫ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥

# –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
player_data.has_soul_urn
player_data.soul_urn_delivered
player_data.has_knowledge_crystal
player_data.has_eternity_sphere

# –ö–≤–µ—Å—Ç—ã
player_data.is_quest_active("find_soul_urn")
player_data.is_quest_active("find_knowledge_crystal")  # –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —É–±–∏–π—Å—Ç–≤–∞ –±–æ—Å—Å–∞
player_data.is_quest_active("find_phylactery")
player_data.is_quest_active("find_eternity_sphere")
```

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã:

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–≤–µ—Å—Ç–æ–≤ –Ω—É–∂–Ω–æ:

1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ `_determine_quest_state()`
2. –£–∫–∞–∑–∞—Ç—å —É—Å–ª–æ–≤–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ 4 —Å–æ—Å—Ç–æ—è–Ω–∏–π
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç –Ω—É–∂–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä

**–ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞:**

```gdscript
# –í _determine_quest_state():
if player_data.has_eternity_sphere and not player_data.has_new_artifact:
    if player_data.is_quest_active("find_new_artifact"):
        return QuestIndicatorState.IN_PROGRESS
    else:
        return QuestIndicatorState.AVAILABLE
```

---

## üí° UX –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –∏–≥—Ä–æ–∫ —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç, —á—Ç–æ –µ—Å—Ç—å –∫–≤–µ—Å—Ç  
‚úÖ **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ** - —Ü–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–æ–ª–æ—Ç–æ–π = –Ω–æ–≤–æ–µ, –∑–µ–ª–µ–Ω—ã–π = –≥–æ—Ç–æ–≤–æ)  
‚úÖ **–ü—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ** - –ø—É–ª—å—Å–∏—Ä—É—é—â–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ –ø—Ä–∏ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö  
‚úÖ **–ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç UI** - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ  
‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –µ–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≤—Å–µ—Ö –∫–≤–µ—Å—Ç–æ–≤  

---

## üé® Z-Index —Å–ª–æ–∏

| –≠–ª–µ–º–µ–Ω—Ç | Z-Index | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|---------|----------|
| –°–≤–µ—á–µ–Ω–∏–µ | -1 | –ü–æ–∑–∞–¥–∏ NPC |
| NPC (–°–∫—É–ª—å–ø—Ç–æ—Ä –¥—É—à) | 15 | –û—Å–Ω–æ–≤–Ω–æ–π —Å–ª–æ–π |
| –ò–∫–æ–Ω–∫–∞ –∫–≤–µ—Å—Ç–∞ | 20 | –ü–æ–≤–µ—Ä—Ö NPC |
| UI —ç–ª–µ–º–µ–Ω—Ç—ã | 20+ | –ö–Ω–æ–ø–∫–∏, —Ç–µ–∫—Å—Ç |
| –î–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ | 100 | –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ |

---

## üìù –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `META_PROGRESSION_SYSTEM.md` - –û–±—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–µ—Ç–∞-–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏
- `QUEST_SYSTEM_IMPLEMENTATION.md` - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–≤–µ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- `SOUL_SCULPTOR_NPC.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ NPC –°–∫—É–ª—å–ø—Ç–æ—Ä –¥—É—à
- `SOUL_SCULPTOR_DIALOG_SYSTEM.md` - –î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ NPC

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 30 –¥–µ–∫–∞–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

