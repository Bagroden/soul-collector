# –£–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Ä–æ–Ω–∞

## –î–∞—Ç–∞: 28 –æ–∫—Ç—è–±—Ä—è 2025

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ:
1. –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —Ü–∏—Ñ—Ä—ã —É—Ä–æ–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π, –Ω–æ –Ω–µ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∞—Ç–∞–∫
2. –£—Ä–æ–Ω –æ—Ç –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è
3. –¶–≤–µ—Ç–∞ —É—Ä–æ–Ω–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Ç–∏–ø–∞–º —É—Ä–æ–Ω–∞

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã (`Scripts/UI/DamageNumber.gd`)

–ò–∑–º–µ–Ω–µ–Ω—ã —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É—Ä–æ–Ω–∞:

- **–§–∏–∑–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω**: `Color.ORANGE` (–æ—Ä–∞–Ω–∂–µ–≤—ã–π) ‚úÖ
- **–ú–∞–≥–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω**: `Color(0.4, 0.8, 1.0)` (–≥–æ–ª—É–±–æ–π) ‚úÖ
- **–ö—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ**: `Color(1.0, 0.4, 0.7)` (—Ä–æ–∑–æ–≤—ã–π) ‚úÖ
- **–Ø–¥**: `Color(0.2, 0.9, 0.2)` (–∑–µ–ª–µ–Ω—ã–π) ‚úÖ
- **–õ–µ—á–µ–Ω–∏–µ**: `Color(0.5, 1.0, 0.3)` (—Å–∞–ª–∞—Ç–æ–≤—ã–π) ‚úÖ

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –æ—Ç –æ–±—ã—á–Ω—ã—Ö –∞—Ç–∞–∫ –∏–≥—Ä–æ–∫–∞ (`Scripts/Battle/battle_manager.gd`)

#### –§—É–Ω–∫—Ü–∏—è `player_attack()`:

**–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞:**
- –ü—Ä–∏ –ø—Ä–æ–º–∞—Ö–µ: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ü–†–û–ú–ê–•!" –Ω–∞–¥ –≤—Ä–∞–≥–æ–º
- –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É—Ä–æ–Ω —Å —É—á–µ—Ç–æ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞

```gdscript
# –ü—Ä–∏ –ø—Ä–æ–º–∞—Ö–µ
DamageNumberManager.show_damage_on_character(enemy_node, 0, false, true, false, "physical")

# –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏
DamageNumberManager.show_damage_on_character(enemy_node, damage, is_crit, false, false, "physical")
```

### 2.1. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –æ—Ç –±–∞–∑–æ–≤—ã—Ö –∞—Ç–∞–∫ –≤—Ä–∞–≥–æ–≤ (`Scripts/Battle/battle_manager.gd`)

#### –§—É–Ω–∫—Ü–∏—è `_enemy_action()` (–±–ª–æ–∫ `if not ability_used:`):

**–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞:**
- –ü—Ä–∏ –ø—Ä–æ–º–∞—Ö–µ: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ü–†–û–ú–ê–•!" –Ω–∞–¥ –∏–≥—Ä–æ–∫–æ–º
- –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É—Ä–æ–Ω —Å —É—á–µ—Ç–æ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞ –∏ —Ç–∏–ø–∞ —É—Ä–æ–Ω–∞

```gdscript
# –ü—Ä–∏ –ø—Ä–æ–º–∞—Ö–µ –±–∞–∑–æ–≤–æ–π –∞—Ç–∞–∫–∏ –≤—Ä–∞–≥–∞ (—Å—Ç—Ä–æ–∫–∞ ~1066)
DamageNumberManager.show_damage_on_character(player_node, 0, false, true, false, damage_type)

# –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –±–∞–∑–æ–≤–æ–π –∞—Ç–∞–∫–∏ –≤—Ä–∞–≥–∞ (—Å—Ç—Ä–æ–∫–∞ ~1121)
DamageNumberManager.show_damage_on_character(player_node, damage, is_crit, false, false, damage_type)
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –æ—Ç –±–∞–∑–æ–≤—ã—Ö –∞—Ç–∞–∫ –≤—Ä–∞–≥–æ–≤ –±—ã–ª–æ –ø—Ä–æ–ø—É—â–µ–Ω–æ.

### 3. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –æ—Ç DoT-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (`Scripts/Battle/body.gd`)

#### –§—É–Ω–∫—Ü–∏—è `_apply_effect_damage()`:

–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –¥–ª—è:

1. **–ö—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ** (`bleeding`):
```gdscript
if DamageNumberManager.instance:
    DamageNumberManager.show_damage_on_character(self, bleeding_damage, false, false, false, "bleeding")
```

2. **–Ø–¥** (`poison`):
```gdscript
if DamageNumberManager.instance:
    DamageNumberManager.show_damage_on_character(self, poison_damage, false, false, false, "poison")
```

3. **–ì–Ω–∏–ª—å** (`rotten`):
```gdscript
if DamageNumberManager.instance:
    DamageNumberManager.show_damage_on_character(self, rotten_damage, false, false, false, "poison")
```

4. **–°—É–¥ –ø–∞–ª–∞—á–∞** (`judgment`):
```gdscript
if DamageNumberManager.instance:
    DamageNumberManager.show_damage_on_character(self, judgment_damage, false, false, false, "physical")
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –æ—Ç –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

#### `Scripts/PassiveAbilities/Legendary/StormShaman.gd`
–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –æ—Ç —É–¥–∞—Ä–∞ –º–æ–ª–Ω–∏–∏:
```gdscript
if DamageNumberManager.instance:
    DamageNumberManager.show_damage_on_character(_target, lightning_damage, false, false, false, "magic")
```

#### `Scripts/PassiveAbilities/Legendary/MouseKing.gd`
–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –æ—Ç –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∏ –ø—Ä–∏ —É–∫–ª–æ–Ω–µ–Ω–∏–∏:
```gdscript
if DamageNumberManager.instance:
    DamageNumberManager.show_damage_on_character(target, counter_damage_amount, false, false, false, "physical")
```

#### `Scripts/PassiveAbilities/Rare/AlkaraBloodRitual.gd`
–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –æ—Ç –∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è HP:
```gdscript
if DamageNumberManager.instance:
    DamageNumberManager.show_damage_on_character(owner, hp_cost, false, false, false, "bleeding")
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–û–±—ã—á–Ω—ã–µ –∞—Ç–∞–∫–∏ –∏–≥—Ä–æ–∫–∞** - —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —É—Ä–æ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ü–≤–µ—Ç–æ–º
‚úÖ **–£—Ä–æ–Ω –æ—Ç –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–æ–∑–æ–≤—ã–º —Ü–≤–µ—Ç–æ–º
‚úÖ **–£—Ä–æ–Ω –æ—Ç —è–¥–∞** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∑–µ–ª–µ–Ω—ã–º —Ü–≤–µ—Ç–æ–º
‚úÖ **–£—Ä–æ–Ω –æ—Ç –≥–Ω–∏–µ–Ω–∏—è** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∑–µ–ª–µ–Ω—ã–º —Ü–≤–µ—Ç–æ–º
‚úÖ **–ú–∞–≥–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≥–æ–ª—É–±—ã–º —Ü–≤–µ—Ç–æ–º
‚úÖ **–§–∏–∑–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ—Ä–∞–Ω–∂–µ–≤—ã–º —Ü–≤–µ—Ç–æ–º
‚úÖ **–õ–µ—á–µ–Ω–∏–µ** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–∞–ª–∞—Ç–æ–≤—ã–º —Ü–≤–µ—Ç–æ–º
‚úÖ **–ü–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** - —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —É—Ä–æ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ DamageNumberManager
–í–æ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:
```gdscript
if DamageNumberManager.instance:
    # ... –≤—ã–∑–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Ä–æ–Ω–∞
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –Ω–µ –±—É–¥–µ—Ç –æ—à–∏–±–æ–∫, –µ—Å–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö

### –¢–∏–ø—ã —É—Ä–æ–Ω–∞
–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã —É—Ä–æ–Ω–∞:
- `"physical"` - —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- `"magic"` - –º–∞–≥–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω (–≥–æ–ª—É–±–æ–π)
- `"bleeding"` - –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏–µ (—Ä–æ–∑–æ–≤—ã–π)
- `"poison"` - —è–¥ –∏ –≥–Ω–∏–ª—å (–∑–µ–ª–µ–Ω—ã–π)
- `"heal"` - –ª–µ—á–µ–Ω–∏–µ (—Å–∞–ª–∞—Ç–æ–≤—ã–π)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
1. ‚úÖ –û–±—ã—á–Ω—É—é –∞—Ç–∞–∫—É –∏–≥—Ä–æ–∫–∞
2. ‚úÖ –ü—Ä–æ–º–∞—Ö –∏–≥—Ä–æ–∫–∞
3. ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä –∏–≥—Ä–æ–∫–∞
4. ‚úÖ **–ë–∞–∑–æ–≤—É—é –∞—Ç–∞–∫—É –≤—Ä–∞–≥–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ì–æ–±–ª–∏–Ω –í–æ—Ä, –ö—Ä—ã—Å–∞)
5. ‚úÖ **–ü—Ä–æ–º–∞—Ö –±–∞–∑–æ–≤–æ–π –∞—Ç–∞–∫–∏ –≤—Ä–∞–≥–∞**
6. ‚úÖ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä –±–∞–∑–æ–≤–æ–π –∞—Ç–∞–∫–∏ –≤—Ä–∞–≥–∞**
7. ‚úÖ –£—Ä–æ–Ω –æ—Ç –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è
8. ‚úÖ –£—Ä–æ–Ω –æ—Ç —è–¥–∞
9. ‚úÖ –£—Ä–æ–Ω –æ—Ç –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ "–®–∞–º–∞–Ω –±—É—Ä—å"
10. ‚úÖ –£—Ä–æ–Ω –æ—Ç –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ "–°–º–µ—Ä—Ç–µ–ª—å–Ω—ã–π —É–≤–æ—Ä–æ—Ç"
11. ‚úÖ –£—Ä–æ–Ω –æ—Ç –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ "–ö—Ä–æ–≤–∞–≤—ã–π —Ä–∏—Ç—É–∞–ª –ê–ª–∫–∞—Ä—ã"

## –°—Ç–∞—Ç—É—Å
üü¢ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ** - –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–∏–Ω—Ç–µ—Ä–æ–º

