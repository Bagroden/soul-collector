# –°–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–º–Ω–∞—Ç

## üìã –û–±–∑–æ—Ä

–í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∏ —Å–∏—Å—Ç–µ–º–∞ –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–º–Ω–∞—Ç –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ –ª–æ–∫–∞—Ü–∏–π.

---

## ‚ú® –í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–º–Ω–∞—Ç

### –í–Ω–µ—à–Ω–∏–π –≤–∏–¥:

**–û–±—ã—á–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞:**
```
‚Üê –ù–ê–õ–ï–í–û
–¢–µ–º–Ω—ã–π –∫–æ—Ä–∏–¥–æ—Ä
–í–ø–µ—Ä–µ–¥–∏ —Å–ª—ã—à–Ω—ã –∑–ª–æ–≤–µ—â–∏–µ –∑–≤—É–∫–∏...
[–í—ã–±—Ä–∞—Ç—å]
```

**–ö–≤–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞:**
```
‚Üê –ù–ê–õ–ï–í–û (–∑–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç)
‚≠ê –õ–æ–≥–æ–≤–æ –≤–æ—Ä–∞ ‚≠ê (—É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç, –∑–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç —Å —Ç–µ–Ω—å—é)
üìú –ö–í–ï–°–¢–û–í–ê–Ø –ö–û–ú–ù–ê–¢–ê üìú (—è—Ä–∫–∞—è –º–µ—Ç–∫–∞)
–°—Ç–∞—Ä–æ–µ —É–±–µ–∂–∏—â–µ, –≥–¥–µ –∫–æ–≥–¥–∞-—Ç–æ —Å–∫—Ä—ã–≤–∞–ª—Å—è –≤–æ—Ä...
[‚öîÔ∏è –í–æ–π—Ç–∏] (–∑–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç, —É–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞)

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ó–û–õ–û–¢–ê–Ø –†–ê–ú–ö–ê (3px)  ‚îÇ
‚îÇ  —Å –ø—É–ª—å—Å–∏—Ä—É—é—â–∏–º       ‚îÇ
‚îÇ  —Å–≤–µ—á–µ–Ω–∏–µ–º            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

---

> **‚ÑπÔ∏è –ü–†–ò–ú–ï–ß–ê–ù–ò–ï:** –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–º–Ω–∞—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –æ–±—â–µ–π —Å–∏—Å—Ç–µ–º—ã –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–º–Ω–∞—Ç. –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç–∏–ª–µ–π —Å–º. –≤ **`ROOM_VISUAL_STYLES.md`**.

---

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

### 1. –ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞
```gdscript
var stylebox = StyleBoxFlat.new()
stylebox.bg_color = Color(0.15, 0.1, 0.05, 0.95)  # –¢–µ–º–Ω–æ-–∑–æ–ª–æ—Ç–∏—Å—Ç—ã–π —Ñ–æ–Ω
stylebox.border_width = 3  # –í—Å–µ —Å—Ç–æ—Ä–æ–Ω—ã
stylebox.border_color = Color(1.0, 0.8, 0.2, 1.0)  # –ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞
stylebox.corner_radius = 10  # –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã
```

### 2. –ò–∫–æ–Ω–∫–∏ –∏ —Ç–µ–∫—Å—Ç
| –≠–ª–µ–º–µ–Ω—Ç | –ò–∫–æ–Ω–∫–∞ | –¶–≤–µ—Ç | –†–∞–∑–º–µ—Ä |
|---------|--------|------|--------|
| –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã | ‚≠ê ... ‚≠ê | `Color(1.0, 0.9, 0.3)` | 20px (–æ–±—ã—á–Ω–∞—è: 16px) |
| –ú–µ—Ç–∫–∞ | üìú –ö–í–ï–°–¢–û–í–ê–Ø –ö–û–ú–ù–ê–¢–ê üìú | `Color(1.0, 0.8, 0.2)` | 14px |
| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | (–±–µ–∑ –∏–∫–æ–Ω–∫–∏) | `Color(1.0, 0.85, 0.3)` | 18px |
| –û–ø–∏—Å–∞–Ω–∏–µ | (–±–µ–∑ –∏–∫–æ–Ω–∫–∏) | `Color(0.9, 0.9, 0.9)` | 12px |
| –ö–Ω–æ–ø–∫–∞ | ‚öîÔ∏è –í–æ–π—Ç–∏ | `Color(1.0, 0.9, 0.3)` | 16px (–æ–±—ã—á–Ω–∞—è: 14px) |

### 3. –¢–µ–Ω—å –¥–ª—è —Ç–µ–∫—Å—Ç–∞
```gdscript
name_label.add_theme_color_override("font_shadow_color", Color(0.8, 0.6, 0.0, 0.8))
name_label.add_theme_constant_override("shadow_offset_x", 2)
name_label.add_theme_constant_override("shadow_offset_y", 2)
```

### 4. –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ
```gdscript
func _add_quest_glow_effect(panel: Panel):
    var tween = create_tween()
    tween.set_loops()  # –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
    tween.tween_property(panel, "modulate", Color(1.2, 1.1, 1.0, 1.0), 1.0)  # –Ø—Ä—á–µ
    tween.tween_property(panel, "modulate", Color(1.0, 1.0, 1.0, 1.0), 1.0)  # –û–±—ã—á–Ω—ã–π
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –ú—è–≥–∫–æ–µ –ø—É–ª—å—Å–∏—Ä—É—é—â–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã

---

## üéØ –õ–æ–≥–∏–∫–∞ –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–º–Ω–∞—Ç

### –ö–æ–º–Ω–∞—Ç–∞ "–õ–æ–≥–æ–≤–æ –≤–æ—Ä–∞"

**–£—Å–ª–æ–≤–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è:**
1. ‚úÖ –õ–æ–∫–∞—Ü–∏—è: "–ü–æ–¥–∑–µ–º–µ–ª—å–µ –ø–æ–¥ –≥–æ—Ä–æ–¥–æ–º" (`location_id == "dungeon"`)
2. ‚úÖ –≠—Ç–∞–ø: 4+ (—Ç.–µ. `rooms_cleared >= 3`)
3. ‚úÖ –ö–≤–µ—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω: `player_data.is_quest_active("find_soul_urn") == true`
4. ‚úÖ –£—Ä–Ω–∞ –Ω–µ –ø–æ–ª—É—á–µ–Ω–∞: `player_data.has_soul_urn == false`
5. ‚úÖ –°–ª—É—á–∞–π–Ω–æ—Å—Ç—å: 50% —à–∞–Ω—Å (`randf() < 0.5`)

**–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–Ω—ã:**
- ‚ùå –ö–æ–º–Ω–∞—Ç–∞ –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –ö–≤–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω
- ‚úÖ –û–±—ã—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã –≤–º–µ—Å—Ç–æ –Ω–µ–µ

---

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. RoomData.gd

**–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ:**
```gdscript
@export var is_quest_room: bool = false  # –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫–æ–º–Ω–∞—Ç–∞ –∫–≤–µ—Å—Ç–æ–≤–æ–π
```

### 2. RoomSelector.gd

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `_create_room_option()`:**
```gdscript
func _create_room_option(room: RoomData, index: int) -> VBoxContainer:
    var is_quest = room.get("is_quest_room")
    
    if is_quest:
        # –ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞
        var quest_panel = Panel.new()
        # ... stylebox —Å –∑–æ–ª–æ—Ç–æ–π —Ä–∞–º–∫–æ–π
        
        # –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ
        _add_quest_glow_effect(quest_panel)
    
    # –ù–∞–∑–≤–∞–Ω–∏–µ —Å –∏–∫–æ–Ω–∫–∞–º–∏ ‚≠ê
    name_label.text = ("‚≠ê " if is_quest else "") + room.room_name + (" ‚≠ê" if is_quest else "")
    
    # –ú–µ—Ç–∫–∞ "–ö–í–ï–°–¢–û–í–ê–Ø –ö–û–ú–ù–ê–¢–ê"
    if is_quest:
        var quest_label = Label.new()
        quest_label.text = "üìú –ö–í–ï–°–¢–û–í–ê–Ø –ö–û–ú–ù–ê–¢–ê üìú"
        # ...
    
    # –ö–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏" –≤–º–µ—Å—Ç–æ "–í—ã–±—Ä–∞—Ç—å"
    select_btn.text = "‚öîÔ∏è –í–æ–π—Ç–∏" if is_quest else "–í—ã–±—Ä–∞—Ç—å"
```

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:**
```gdscript
func _add_quest_glow_effect(panel: Panel):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –¥–ª—è –∫–≤–µ—Å—Ç–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã"""
    # Tween –∞–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏
```

### 3. RoomGenerator.gd

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `generate_next_room_options()`:**
```gdscript
func generate_next_room_options() -> Array[RoomData]:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–≤–µ—Å—Ç–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É
    var should_add_quest_room = _check_for_quest_room()
    
    if should_add_quest_room:
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–≤–µ—Å—Ç–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É –≤ —Å–ª—É—á–∞–π–Ω—ã–π —Å–ª–æ—Ç (0-2)
        var quest_slot = randi() % 3
        for i in range(3):
            if i == quest_slot:
                var quest_room = _create_thiefs_lair_quest_room()
                options.append(quest_room)
            else:
                # –û–±—ã—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
```

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `_check_for_quest_room()`:**
```gdscript
func _check_for_quest_room() -> bool:
    # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞—Ü–∏–∏ (dungeon)
    if current_location.location_id != "dungeon":
        return false
    
    # 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ç–∞–ø–∞ (>= 4)
    if rooms_cleared < 3:
        return false
    
    # 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–µ—Å—Ç–∞ (–∞–∫—Ç–∏–≤–µ–Ω + —É—Ä–Ω–∞ –Ω–µ –ø–æ–ª—É—á–µ–Ω–∞)
    if not player_data.is_quest_active("find_soul_urn"):
        return false
    
    if player_data.has_soul_urn:
        return false
    
    # 4. –°–ª—É—á–∞–π–Ω–æ—Å—Ç—å 50%
    return randf() < 0.5
```

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `_create_thiefs_lair_quest_room()`:**
```gdscript
func _create_thiefs_lair_quest_room() -> RoomData:
    var room = RoomData.new()
    room.room_id = "thiefs_lair"
    room.room_name = "–õ–æ–≥–æ–≤–æ –≤–æ—Ä–∞"
    room.description = "–°—Ç–∞—Ä–æ–µ —É–±–µ–∂–∏—â–µ, –≥–¥–µ –∫–æ–≥–¥–∞-—Ç–æ —Å–∫—Ä—ã–≤–∞–ª—Å—è –≤–æ—Ä..."
    room.is_quest_room = true  # –í–ê–ñ–ù–û!
    
    # –†–µ–¥–∫–∏–π —Å–ª–∏–∑–µ–Ω—å —Å –£—Ä–Ω–æ–π –¥—É—à
    room.enemy_scene = "res://Scenes/Battle/Enemy_Slime.tscn"
    room.enemy_rarity = "rare"
    
    return room
```

---

## üìä –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ—è–≤–ª–µ–Ω–∏—è

```
1. –ò–≥—Ä–æ–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ–º–Ω–∞—Ç—ã –≤ "–ü–æ–¥–∑–µ–º–µ–ª—å–µ –ø–æ–¥ –≥–æ—Ä–æ–¥–æ–º"
   ‚îú‚îÄ> –ö–æ–º–Ω–∞—Ç–∞ 1: –û–±—ã—á–Ω–∞—è
   ‚îú‚îÄ> –ö–æ–º–Ω–∞—Ç–∞ 2: –û–±—ã—á–Ω–∞—è
   ‚îú‚îÄ> –ö–æ–º–Ω–∞—Ç–∞ 3: –û–±—ã—á–Ω–∞—è
   ‚îî‚îÄ> –ö–æ–º–Ω–∞—Ç–∞ 4+: –ü–†–û–í–ï–†–ö–ê –ö–í–ï–°–¢–û–í–û–ô –ö–û–ú–ù–ê–¢–´
       ‚îú‚îÄ> –ö–≤–µ—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω?
       ‚îÇ   ‚îú‚îÄ> –ù–µ—Ç ‚Üí –û–±—ã—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
       ‚îÇ   ‚îî‚îÄ> –î–∞ ‚Üí –£—Ä–Ω–∞ –ø–æ–ª—É—á–µ–Ω–∞?
       ‚îÇ       ‚îú‚îÄ> –î–∞ ‚Üí –û–±—ã—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
       ‚îÇ       ‚îî‚îÄ> –ù–µ—Ç ‚Üí –ë—Ä–æ—Å–æ–∫ 50%
       ‚îÇ           ‚îú‚îÄ> –ü—Ä–æ–≤–∞–ª ‚Üí –û–±—ã—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
       ‚îÇ           ‚îî‚îÄ> –£—Å–ø–µ—Ö ‚Üí –ö–í–ï–°–¢–û–í–ê–Ø –ö–û–ú–ù–ê–¢–ê (–õ–æ–≥–æ–≤–æ –≤–æ—Ä–∞)
       ‚îÇ               ‚îú‚îÄ> –ü–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –∏–∑ 3 —Å–ª–æ—Ç–æ–≤ (—Å–ª—É—á–∞–π–Ω–æ)
       ‚îÇ               ‚îú‚îÄ> –ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞ + —Å–≤–µ—á–µ–Ω–∏–µ
       ‚îÇ               ‚îî‚îÄ> –†–µ–¥–∫–∏–π —Å–ª–∏–∑–µ–Ω—å –≤–Ω—É—Ç—Ä–∏
```

---

## üéÆ –ò–≥—Ä–æ–≤–æ–π –æ–ø—ã—Ç

### –î–æ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–Ω—ã:
```
–≠—Ç–∞–ø 4: –í—ã–±–æ—Ä –∫–æ–º–Ω–∞—Ç—ã

‚Üê –ù–ê–õ–ï–í–û                 ‚Üë –ü–†–Ø–ú–û                    ‚Üí –ù–ê–ü–†–ê–í–û
–¢–µ–º–Ω—ã–π –∫–æ—Ä–∏–¥–æ—Ä          ‚≠ê –õ–æ–≥–æ–≤–æ –≤–æ—Ä–∞ ‚≠ê         –ó–∞–±—Ä–æ—à–µ–Ω–Ω—ã–π –∑–∞–ª
–û–±—ã—á–Ω—ã–π –≤—Ä–∞–≥            üìú –ö–í–ï–°–¢–û–í–ê–Ø –ö–û–ú–ù–ê–¢–ê üìú    –û–±—ã—á–Ω—ã–π –≤—Ä–∞–≥
[–í—ã–±—Ä–∞—Ç—å]               [‚öîÔ∏è –í–æ–π—Ç–∏]                [–í—ã–±—Ä–∞—Ç—å]

                    (–∑–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞ –ø—É–ª—å—Å–∏—Ä—É–µ—Ç)
```

**–ò–≥—Ä–æ–∫ –≤–∏–¥–∏—Ç:** –Ø—Ä–∫–∞—è, –≤—ã–¥–µ–ª–µ–Ω–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ  
**–ò–≥—Ä–æ–∫ –ø–æ–Ω–∏–º–∞–µ—Ç:** –≠—Ç–æ –≤–∞–∂–Ω–∞—è –∫–≤–µ—Å—Ç–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è  
**–ò–≥—Ä–æ–∫ –¥–µ–π—Å—Ç–≤—É–µ—Ç:** –í—ã–±–∏—Ä–∞–µ—Ç –∫–≤–µ—Å—Ç–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É

### –ü–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –Ω–∞–¥ —Ä–µ–¥–∫–∏–º —Å–ª–∏–∑–Ω–µ–º:
```
üè∫ –í—ã –Ω–∞—à–ª–∏ –£—Ä–Ω—É –¥—É—à —Å—Ä–µ–¥–∏ –æ—Å—Ç–∞–Ω–∫–æ–≤ —Å–ª–∏–∑–Ω—è!
–û—Ç–Ω–µ—Å–∏—Ç–µ –µ—ë –°–∫—É–ª—å–ø—Ç–æ—Ä—É –¥—É—à.
```

### –ü–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏ —É—Ä–Ω—ã:
- ‚ùå –ö–æ–º–Ω–∞—Ç–∞ "–õ–æ–≥–æ–≤–æ –≤–æ—Ä–∞" –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –¢–æ–ª—å–∫–æ –æ–±—ã—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã –≤ —ç—Ç–æ–π –ª–æ–∫–∞—Ü–∏–∏

---

## üîÆ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –ë—É–¥—É—â–∏–µ –∫–≤–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–Ω–∞—Ç—ã:

#### "–°–≤—è—Ç–∏–ª–∏—â–µ —Å—Ç—Ä–∞–∂–∞" (–ö—Ä–∏—Å—Ç–∞–ª–ª –ø–æ–∑–Ω–∞–Ω–∏—è)
```gdscript
func _create_guardians_sanctum_quest_room() -> RoomData:
    var room = RoomData.new()
    room.room_id = "guardians_sanctum"
    room.room_name = "–°–≤—è—Ç–∏–ª–∏—â–µ —Å—Ç—Ä–∞–∂–∞"
    room.is_quest_room = true
    room.enemy_scene = "res://Scenes/Battle/Enemy_AncientGuardian.tscn"
    room.enemy_rarity = "epic"
    # –£—Å–ª–æ–≤–∏–µ: player_data.is_quest_active("find_knowledge_crystal")
    return room
```

#### "–¢—Ä–æ–Ω–Ω—ã–π –∑–∞–ª –ø—Ä–æ–∫–ª—è—Ç—ã—Ö" (–°—Ñ–µ—Ä–∞ –≤–µ—á–Ω–æ—Å—Ç–∏)
```gdscript
func _create_cursed_throne_quest_room() -> RoomData:
    var room = RoomData.new()
    room.room_id = "cursed_throne"
    room.room_name = "–¢—Ä–æ–Ω–Ω—ã–π –∑–∞–ª –ø—Ä–æ–∫–ª—è—Ç—ã—Ö"
    room.is_quest_room = true
    room.enemy_scene = "res://Scenes/Battle/Enemy_CursedOverlord.tscn"
    room.enemy_rarity = "legendary"
    # –£—Å–ª–æ–≤–∏–µ: player_data.is_quest_active("find_eternity_sphere")
    return room
```

### –í–∞—Ä–∏–∞—Ü–∏–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è:

| –ö–≤–µ—Å—Ç | –¶–≤–µ—Ç —Ä–∞–º–∫–∏ | –ò–∫–æ–Ω–∫–∞ | –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ |
|-------|------------|--------|-------------|
| –£—Ä–Ω–∞ –¥—É—à | –ó–æ–ª–æ—Ç–æ–π | ‚≠êüìú | –ó–æ–ª–æ—Ç–æ–π |
| –ö—Ä–∏—Å—Ç–∞–ª–ª –ø–æ–∑–Ω–∞–Ω–∏—è | –§–∏–æ–ª–µ—Ç–æ–≤—ã–π | üíéüîÆ | –§–∏–æ–ª–µ—Ç–æ–≤—ã–π |
| –°—Ñ–µ—Ä–∞ –≤–µ—á–Ω–æ—Å—Ç–∏ | –†–∞–¥—É–∂–Ω—ã–π | üåü‚ú® | –†–∞–¥—É–∂–Ω—ã–π (–∞–Ω–∏–º–∞—Ü–∏—è) |

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏:

**–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–≤–µ—Å—Ç–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã:**
```
üìú –°–æ–∑–¥–∞–Ω–∞ –∫–≤–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞: –õ–æ–≥–æ–≤–æ –≤–æ—Ä–∞ (–†–µ–¥–∫–∏–π —Å–ª–∏–∑–µ–Ω—å)
```

**–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```gdscript
print("–õ–æ–∫–∞—Ü–∏—è:", current_location.location_id)
print("–≠—Ç–∞–ø:", rooms_cleared)
print("–ö–≤–µ—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω:", player_data.is_quest_active("find_soul_urn"))
print("–£—Ä–Ω–∞ –ø–æ–ª—É—á–µ–Ω–∞:", player_data.has_soul_urn)
print("–®–∞–Ω—Å –∫–≤–µ—Å—Ç–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã:", randf())
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–≤–µ—Å—Ç (–∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –°–∫—É–ª—å–ø—Ç–æ—Ä–∞)
2. –í–æ–π–¥–∏—Ç–µ –≤ "–ü–æ–¥–∑–µ–º–µ–ª—å–µ –ø–æ–¥ –≥–æ—Ä–æ–¥–æ–º"
3. –ü—Ä–æ–π–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–µ 3 –∫–æ–º–Ω–∞—Ç—ã
4. –ù–∞ 4-–π –∫–æ–º–Ω–∞—Ç–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
   - ‚úÖ –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–≤–∏–¥–µ—Ç—å –∫–≤–µ—Å—Ç–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É
   - ‚úÖ –ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞ –∏ —Å–≤–µ—á–µ–Ω–∏–µ
   - ‚úÖ –ò–∫–æ–Ω–∫–∏ ‚≠ê –∏ –º–µ—Ç–∫–∞ üìú
5. –ü–æ–±–µ–¥–∏—Ç–µ —Ä–µ–¥–∫–æ–≥–æ —Å–ª–∏–∑–Ω—è
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —É—Ä–Ω—ã
7. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–æ–º–Ω–∞—Ç–∞ –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤—ã—Ö –∫–≤–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–º–Ω–∞—Ç

- [ ] –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_create_[name]_quest_room()` –≤ RoomGenerator
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `_check_for_quest_room()`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `room.is_quest_room = true`
- [ ] –£–∫–∞–∑–∞–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `room_id`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `enemy_scene` –∏ `enemy_rarity`
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –∫–≤–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ PlayerData
- [ ] –õ–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 20 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è "–õ–æ–≥–æ–≤–æ –≤–æ—Ä–∞"  
**–§–∞–π–ª—ã:** 
- `Scripts/RoomData.gd`
- `Scripts/RoomSelector.gd`
- `Scripts/RoomGenerator.gd`

