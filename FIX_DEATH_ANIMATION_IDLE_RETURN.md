# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ idle –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞:
–ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –∞–Ω–∏–º–∞—Ü–∏–∏ `idle`, —Ö–æ—Ç—è –æ–Ω –º–µ—Ä—Ç–≤.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã:

### **1. –ü—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ –∞–Ω–∏–º–∞—Ü–∏–π:**
- ‚úÖ **–ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è** - `play_die()` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå **–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ idle** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –≤ `character_visual.gd`
- ‚ùå **–ü–µ—Ä—Å–æ–Ω–∞–∂ –≤—ã–≥–ª—è–¥–∏—Ç –∂–∏–≤—ã–º** - –∞–Ω–∏–º–∞—Ü–∏—è idle –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏

### **2. –ü—Ä–∏—á–∏–Ω–∞:**
–í `character_visual.gd` –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫ `idle` –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π:
```gdscript
func play_attack() -> void:
	play(attack_anim)
	await animation_finished
	play_idle()  # ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–∑–≤—Ä–∞—Ç –∫ idle

func play_hurt() -> void:
	play(hurt_anim)
	await animation_finished
	play_idle()  # ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–∑–≤—Ä–∞—Ç –∫ idle
```

## üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### **1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–∏–≥–Ω–∞–ª—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤ `play_die()`:**
```gdscript
func play_die() -> void:
	if has_animation(die_anim):
		# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
		animation = die_anim
		play(die_anim)
		# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–∏–≥–Ω–∞–ª—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, —á—Ç–æ–±—ã –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ idle
		animation_finished.connect(_on_die_animation_finished, CONNECT_ONE_SHOT)
```

### **2. –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏:**
```gdscript
func _on_die_animation_finished():
	print("–ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è ", get_parent().name)
	print("–¢–µ–∫—É—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: ", animation)
	# –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ idle - –ø–µ—Ä—Å–æ–Ω–∞–∂ –º–µ—Ä—Ç–≤!
	print("–ü–µ—Ä—Å–æ–Ω–∞–∂ –º–µ—Ä—Ç–≤, –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ idle")
```

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### **1. –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–∫–∞–∂—É—Ç:**
```
–ò–≥—Ä–æ–∫ –ø–æ–≥–∏–±, –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏...
Visual –Ω–∞–π–¥–µ–Ω: Visual:<AnimatedSprite2D#193290307301>
–í—ã–∑—ã–≤–∞–µ–º play_die()
play_die() –≤—ã–∑–≤–∞–Ω –¥–ª—è PlayerBody
die_anim = die
has_animation(die_anim) = true
sprite_frames = [SpriteFrames:1234]
current animation = idle
–ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏: die
–ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞, —Ç–µ–∫—É—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è: die
–ê–Ω–∏–º–∞—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
play_die() –≤—ã–∑–≤–∞–Ω (–±–µ–∑ await, –∫–∞–∫ —É –≤—Ä–∞–≥–æ–≤)
–ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è PlayerBody
–¢–µ–∫—É—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: die
–ü–µ—Ä—Å–æ–Ω–∞–∂ –º–µ—Ä—Ç–≤, –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ idle
–°–æ–æ–±—â–µ–Ω–∏–µ: –¢—ã –ø–æ–≥–∏–±. –î—É—à–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.
```

### **2. –†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **–ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è** - `play_die()` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ idle** - –ø–µ—Ä—Å–æ–Ω–∞–∂ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏
- ‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–∂ –≤—ã–≥–ª—è–¥–∏—Ç –º–µ—Ä—Ç–≤—ã–º** - –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –æ—Å—Ç–∞–µ—Ç—Å—è

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ **–ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è** - `play_die()` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ idle** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- ‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–∂ –æ—Å—Ç–∞–µ—Ç—Å—è –º–µ—Ä—Ç–≤—ã–º** - –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- ‚úÖ **–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–∞–∂–¥—ã–π —à–∞–≥

**–¢–µ–ø–µ—Ä—å –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏–≥—Ä–∞—Ç—å—Å—è –∏ –æ—Å—Ç–∞—Ç—å—Å—è!** üéÆüíÄ
