# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π —Å –±–æ–Ω—É—Å–∞–º–∏

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
–ë–æ–Ω—É—Å—ã –æ—Ç –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏, –Ω–æ –≤ –æ–∫–Ω–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –ø–æ—ç—Ç–æ–º—É –∏—Ö –Ω–µ–ª—å–∑—è –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### **1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ `PlayerData.gd`:**

```gdscript
func sync_active_passives_with_bonuses():
	"""–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –±–æ–Ω—É—Å–∞–º–∏"""
	print("=== –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –° –ë–û–ù–£–°–ê–ú–ò ===")
	print("–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –î–û —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ", active_passives)
	
	# –û—á–∏—â–∞–µ–º –º–∞—Å—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
	active_passives = []
	
	# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –±–æ–Ω—É—Å—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
	if passive_strength_bonus > 0:
		active_passives.append("player_strong")
		print("–ù–∞–π–¥–µ–Ω –±–æ–Ω—É—Å —Å–∏–ª—ã: ", passive_strength_bonus, " - –¥–æ–±–∞–≤–ª—è–µ–º player_strong")
	
	if passive_vitality_bonus > 0:
		active_passives.append("player_fortress")
		print("–ù–∞–π–¥–µ–Ω –±–æ–Ω—É—Å –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏: ", passive_vitality_bonus, " - –¥–æ–±–∞–≤–ª—è–µ–º player_fortress")
	
	if passive_wisdom_bonus > 0:
		active_passives.append("player_wise")
		print("–ù–∞–π–¥–µ–Ω –±–æ–Ω—É—Å –º—É–¥—Ä–æ—Å—Ç–∏: ", passive_wisdom_bonus, " - –¥–æ–±–∞–≤–ª—è–µ–º player_wise")
	
	if max_hp > 100:  # –ë–∞–∑–æ–≤–æ–µ HP = 100
		active_passives.append("player_vitality")
		print("–ù–∞–π–¥–µ–Ω –±–æ–Ω—É—Å HP: ", max_hp, " - –¥–æ–±–∞–≤–ª—è–µ–º player_vitality")
	
	print("–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ü–û–°–õ–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ", active_passives)
	print("=== –ö–û–ù–ï–¶ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô ===")
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ `PassiveAbilitiesWindow.gd`:**

```gdscript
func load_passive_abilities():
	"""–ó–∞–≥—Ä—É–∂–∞–µ–º –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞"""
	# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –±–æ–Ω—É—Å–∞–º–∏
	player_data.sync_active_passives_with_bonuses()
	
	passive_abilities = player_data.get_available_passives_for_ui()
	
	# –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
	print("=== –ó–ê–ì–†–£–ó–ö–ê –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===")
	print("–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", player_data.get_learned_passives())
	print("–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", player_data.get_active_passives())
	print("–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è UI: ", passive_abilities.size())
	for passive_data in passive_abilities:
		print("  - ", passive_data.name, " (", passive_data.id, "): ", "–ê–∫—Ç–∏–≤–Ω–∞" if passive_data.is_active else "–ù–µ–∞–∫—Ç–∏–≤–Ω–∞")
	print("=== –ö–û–ù–ï–¶ –ó–ê–ì–†–£–ó–ö–ò –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===")
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### **–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**

#### **–î–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–ø—Ä–æ–±–ª–µ–º–∞):**
```
=== –ó–ê–ì–†–£–ó–ö–ê –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_fortress", "player_strong", "player_wise", "player_vitality"]
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: []  # ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è UI: 4
  - –ö—Ä–µ–ø–æ—Å—Ç—å (player_fortress): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –°–∏–ª—å–Ω—ã–π (player_strong): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞  # ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω–∞!
  - –ú—É–¥—Ä—ã–π (player_wise): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ñ–∏–≤—É—á–µ—Å—Ç—å (player_vitality): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
=== –ö–û–ù–ï–¶ –ó–ê–ì–†–£–ó–ö–ò –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
```

#### **–ü–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ):**
```
=== –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –° –ë–û–ù–£–°–ê–ú–ò ===
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –î–û —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: []
–ù–∞–π–¥–µ–Ω –±–æ–Ω—É—Å —Å–∏–ª—ã: 30 - –¥–æ–±–∞–≤–ª—è–µ–º player_strong
–ù–∞–π–¥–µ–Ω –±–æ–Ω—É—Å –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏: 3 - –¥–æ–±–∞–≤–ª—è–µ–º player_fortress
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ü–û–°–õ–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ["player_strong", "player_fortress"]
=== –ö–û–ù–ï–¶ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô ===

=== –ó–ê–ì–†–£–ó–ö–ê –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_fortress", "player_strong", "player_wise", "player_vitality"]
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_strong", "player_fortress"]  # ‚Üê –ò–°–ü–†–ê–í–õ–ï–ù–û: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!
–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –¥–ª—è UI: 4
  - –ö—Ä–µ–ø–æ—Å—Ç—å (player_fortress): –ê–∫—Ç–∏–≤–Ω–∞  # ‚Üê –ò–°–ü–†–ê–í–õ–ï–ù–û: —Ç–µ–ø–µ—Ä—å –∞–∫—Ç–∏–≤–Ω–∞!
  - –°–∏–ª—å–Ω—ã–π (player_strong): –ê–∫—Ç–∏–≤–Ω–∞  # ‚Üê –ò–°–ü–†–ê–í–õ–ï–ù–û: —Ç–µ–ø–µ—Ä—å –∞–∫—Ç–∏–≤–Ω–∞!
  - –ú—É–¥—Ä—ã–π (player_wise): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
  - –ñ–∏–≤—É—á–µ—Å—Ç—å (player_vitality): –ù–µ–∞–∫—Ç–∏–≤–Ω–∞
=== –ö–û–ù–ï–¶ –ó–ê–ì–†–£–ó–ö–ò –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –î–õ–Ø UI ===
```

## üîß –õ–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–æ–≤ —Å–∏–ª—ã:**
```gdscript
if passive_strength_bonus > 0:
	active_passives.append("player_strong")
```
- **–£—Å–ª–æ–≤–∏–µ:** –ï—Å–ª–∏ –±–æ–Ω—É—Å —Å–∏–ª—ã –±–æ–ª—å—à–µ 0
- **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–ª—è–µ–º "player_strong" –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–æ–≤ –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏:**
```gdscript
if passive_vitality_bonus > 0:
	active_passives.append("player_fortress")
```
- **–£—Å–ª–æ–≤–∏–µ:** –ï—Å–ª–∏ –±–æ–Ω—É—Å –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏ –±–æ–ª—å—à–µ 0
- **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–ª—è–µ–º "player_fortress" –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–æ–≤ –º—É–¥—Ä–æ—Å—Ç–∏:**
```gdscript
if passive_wisdom_bonus > 0:
	active_passives.append("player_wise")
```
- **–£—Å–ª–æ–≤–∏–µ:** –ï—Å–ª–∏ –±–æ–Ω—É—Å –º—É–¥—Ä–æ—Å—Ç–∏ –±–æ–ª—å—à–µ 0
- **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–ª—è–µ–º "player_wise" –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### **4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–æ–≤ HP:**
```gdscript
if max_hp > 100:  # –ë–∞–∑–æ–≤–æ–µ HP = 100
	active_passives.append("player_vitality")
```
- **–£—Å–ª–æ–≤–∏–µ:** –ï—Å–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ HP –±–æ–ª—å—à–µ –±–∞–∑–æ–≤–æ–≥–æ (100)
- **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–ª—è–µ–º "player_vitality" –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –æ–∫–Ω–æ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –±–æ–Ω—É—Å–∞–º–∏
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å** - –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏
- ‚úÖ **–ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—é** - –º–æ–∂–Ω–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ** - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –æ—Ç–∫—Ä—ã—Ç–∏—è–º–∏
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é** - –≤—Å–µ —ç—Ç–∞–ø—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–¢–µ–ø–µ—Ä—å –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±—É–¥—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å "–ê–∫—Ç–∏–≤–Ω–∞" –∏ –∏—Ö –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å!** üéØ‚ú®
