# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –≤ –±–æ—é

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:
–ü–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –≤ –º–µ–Ω—é –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –±–æ–Ω—É—Å—ã –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö, –Ω–æ –≤ –±–æ—é –±–æ–Ω—É—Å—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è, —Ö–æ—Ç—è –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–ª–∏.

## üîç –ü—Ä–∏—á–∏–Ω–∞:
–§—É–Ω–∫—Ü–∏—è `sync_active_passives_with_bonuses()` –±—ã–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∞, —á—Ç–æ–±—ã –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Ç–æ–º—É, —á—Ç–æ –±–æ–Ω—É—Å—ã –æ—Ç –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ –±–æ—é.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### **–î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ `_sync_player_data()`:**

```gdscript
func _sync_player_data():
	# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å –±–æ–Ω—É—Å–∞–º–∏
	player_data.sync_active_passives_with_bonuses()
	
	# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
	var active_passives = player_data.get_active_passives()
	print("–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ", active_passives)
	
	# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π —É–∑–µ–ª
	player_node.strength = player_data.strength
	player_node.agility = player_data.agility
	player_node.vitality = player_data.vitality
	player_node.endurance = player_data.endurance
	player_node.intelligence = player_data.intelligence
	player_node.wisdom = player_data.wisdom
	player_node.level = player_data.level
	
	# –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –±–æ–Ω—É—Å—ã
	player_node.calculate_stat_bonuses()
	player_node.apply_stat_bonuses()
	
	# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ PlayerData
	player_node.max_hp = player_data.max_hp
	player_node.max_mp = player_data.max_mp
	player_node.max_stamina = player_data.max_stamina
	
	# –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞ –ü–û–°–õ–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ max_hp
	_apply_player_passive_abilities()
	
	# –í–ê–ñ–ù–û: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ª–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –≤ –Ω–∞—á–∞–ª–µ –±–æ—è –ü–û–°–õ–ï –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
	player_node.hp = player_node.max_hp
	player_node.mp = player_node.max_mp
	player_node.stamina = player_node.max_stamina
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### **–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –±–æ–π:**

#### **1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**
```
=== –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –° –ë–û–ù–£–°–ê–ú–ò ===
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –î–û —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ["player_strong"]
–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –±–æ–Ω—É—Å—ã:
  –ë–æ–Ω—É—Å —Å–∏–ª—ã: 30
  –ë–æ–Ω—É—Å –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç–∏: 0
  –ë–æ–Ω—É—Å –º—É–¥—Ä–æ—Å—Ç–∏: 0
  –ú–∞–∫—Å. HP: 100 (–±–∞–∑–æ–≤–æ–µ: 100)
–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ü–û–°–õ–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ["player_strong"]
=== –ö–û–ù–ï–¶ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò –ê–ö–¢–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô ===
```

#### **2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π:**
```
=== –ü–ê–°–°–ò–í–ù–´–ï –°–ü–û–°–û–ë–ù–û–°–¢–ò –ò–ì–†–û–ö–ê ===
–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: ["player_strong"]
–ú–∞–∫—Å. HP –î–û –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π: 100
–ü—Ä–∏–º–µ–Ω—è–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: –°–∏–ª—å–Ω—ã–π (player_strong)
=== –°–ò–õ–¨–ù–´–ô ===
–ò–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å —Å–∏–ª—ã: +30 –∫ —Å–∏–ª–µ
–°–∏–ª–∞ –î–û: 5
–°–∏–ª–∞ –ü–û–°–õ–ï: 35
=== –ö–û–ù–ï–¶ –°–ò–õ–¨–ù–û–ì–û ===
–ú–∞–∫—Å. HP –ü–û–°–õ–ï –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π: 100
=== –ö–û–ù–ï–¶ –ü–ê–°–°–ò–í–ù–´–• –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô –ò–ì–†–û–ö–ê ===
```

## üîß –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

### **1. –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ –±–æ—é:**
1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π** - `sync_active_passives_with_bonuses()`
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫** - –∏–∑ `PlayerData` –≤ `player_node`
3. **–ü–µ—Ä–µ—Å—á–µ—Ç –±–æ–Ω—É—Å–æ–≤** - `calculate_stat_bonuses()` –∏ `apply_stat_bonuses()`
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤** - `max_hp`, `max_mp`, `max_stamina`
5. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π** - `_apply_player_passive_abilities()`
6. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤** - `hp = max_hp`, `mp = max_mp`, `stamina = max_stamina`

### **2. –§—É–Ω–∫—Ü–∏—è `sync_active_passives_with_bonuses()` —Ç–µ–ø–µ—Ä—å:**
- ‚úÖ **–ù–ï –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏
- ‚úÖ **–£–¥–∞–ª—è–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** - –±–µ–∑ –±–æ–Ω—É—Å–æ–≤
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏** - –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–º
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –±–æ–Ω—É—Å–∞–º–∏** - –≤ –±–æ—é

### **3. –§—É–Ω–∫—Ü–∏—è `_apply_player_passive_abilities()`:**
- ‚úÖ **–ü—Ä–∏–º–µ–Ω—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏** - –∫ `player_node`
- ‚úÖ **–î–æ–±–∞–≤–ª—è–µ—Ç –±–æ–Ω—É—Å—ã** - —Å–∏–ª–∞, –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç—å, –º—É–¥—Ä–æ—Å—Ç—å, HP
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –≤ –±–æ—é** - –±–æ–Ω—É—Å—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –ø–∞—Å—Å–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:
- ‚úÖ **–ê–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏** - –≤ –º–µ–Ω—é
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –±–æ–Ω—É—Å—ã –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö** - –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- ‚úÖ **–ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ –±–æ—é** - –±–æ–Ω—É—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –º–µ–∂–¥—É –º–µ–Ω—é –∏ –±–æ–µ–º
- ‚úÖ **–†–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ** - –±–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

**–¢–µ–ø–µ—Ä—å –±–æ–Ω—É—Å—ã –æ—Ç –ø–∞—Å—Å–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –±—É–¥—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –≤ –±–æ—é!** üéØ‚ú®
